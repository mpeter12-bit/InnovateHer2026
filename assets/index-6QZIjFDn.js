(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function gy(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Hh={exports:{}},Ea={},Wh={exports:{}},Ne={};var Om;function W0(){if(Om)return Ne;Om=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,W={};function z(O,$,ue){this.props=O,this.context=$,this.refs=W,this.updater=ue||U}z.prototype.isReactComponent={},z.prototype.setState=function(O,$){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,$,"setState")},z.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function re(){}re.prototype=z.prototype;function ce(O,$,ue){this.props=O,this.context=$,this.refs=W,this.updater=ue||U}var se=ce.prototype=new re;se.constructor=ce,H(se,z.prototype),se.isPureReactComponent=!0;var pe=Array.isArray,ke=Object.prototype.hasOwnProperty,Ie={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function I(O,$,ue){var Ce,Re={},be=null,Me=null;if($!=null)for(Ce in $.ref!==void 0&&(Me=$.ref),$.key!==void 0&&(be=""+$.key),$)ke.call($,Ce)&&!P.hasOwnProperty(Ce)&&(Re[Ce]=$[Ce]);var Ue=arguments.length-2;if(Ue===1)Re.children=ue;else if(1<Ue){for(var He=Array(Ue),ft=0;ft<Ue;ft++)He[ft]=arguments[ft+2];Re.children=He}if(O&&O.defaultProps)for(Ce in Ue=O.defaultProps,Ue)Re[Ce]===void 0&&(Re[Ce]=Ue[Ce]);return{$$typeof:i,type:O,key:be,ref:Me,props:Re,_owner:Ie.current}}function C(O,$){return{$$typeof:i,type:O.type,key:$,ref:O.ref,props:O.props,_owner:O._owner}}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function b(O){var $={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ue){return $[ue]})}var V=/\/+/g;function k(O,$){return typeof O=="object"&&O!==null&&O.key!=null?b(""+O.key):$.toString(36)}function Ye(O,$,ue,Ce,Re){var be=typeof O;(be==="undefined"||be==="boolean")&&(O=null);var Me=!1;if(O===null)Me=!0;else switch(be){case"string":case"number":Me=!0;break;case"object":switch(O.$$typeof){case i:case e:Me=!0}}if(Me)return Me=O,Re=Re(Me),O=Ce===""?"."+k(Me,0):Ce,pe(Re)?(ue="",O!=null&&(ue=O.replace(V,"$&/")+"/"),Ye(Re,$,ue,"",function(ft){return ft})):Re!=null&&(N(Re)&&(Re=C(Re,ue+(!Re.key||Me&&Me.key===Re.key?"":(""+Re.key).replace(V,"$&/")+"/")+O)),$.push(Re)),1;if(Me=0,Ce=Ce===""?".":Ce+":",pe(O))for(var Ue=0;Ue<O.length;Ue++){be=O[Ue];var He=Ce+k(be,Ue);Me+=Ye(be,$,ue,He,Re)}else if(He=x(O),typeof He=="function")for(O=He.call(O),Ue=0;!(be=O.next()).done;)be=be.value,He=Ce+k(be,Ue++),Me+=Ye(be,$,ue,He,Re);else if(be==="object")throw $=String(O),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Me}function ot(O,$,ue){if(O==null)return O;var Ce=[],Re=0;return Ye(O,Ce,"","",function(be){return $.call(ue,be,Re++)}),Ce}function at(O){if(O._status===-1){var $=O._result;$=$(),$.then(function(ue){(O._status===0||O._status===-1)&&(O._status=1,O._result=ue)},function(ue){(O._status===0||O._status===-1)&&(O._status=2,O._result=ue)}),O._status===-1&&(O._status=0,O._result=$)}if(O._status===1)return O._result.default;throw O._result}var ee={current:null},Y={transition:null},oe={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:Y,ReactCurrentOwner:Ie};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:ot,forEach:function(O,$,ue){ot(O,function(){$.apply(this,arguments)},ue)},count:function(O){var $=0;return ot(O,function(){$++}),$},toArray:function(O){return ot(O,function($){return $})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ne.Component=z,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=ce,Ne.StrictMode=s,Ne.Suspense=g,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Ne.act=ie,Ne.cloneElement=function(O,$,ue){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Ce=H({},O.props),Re=O.key,be=O.ref,Me=O._owner;if($!=null){if($.ref!==void 0&&(be=$.ref,Me=Ie.current),$.key!==void 0&&(Re=""+$.key),O.type&&O.type.defaultProps)var Ue=O.type.defaultProps;for(He in $)ke.call($,He)&&!P.hasOwnProperty(He)&&(Ce[He]=$[He]===void 0&&Ue!==void 0?Ue[He]:$[He])}var He=arguments.length-2;if(He===1)Ce.children=ue;else if(1<He){Ue=Array(He);for(var ft=0;ft<He;ft++)Ue[ft]=arguments[ft+2];Ce.children=Ue}return{$$typeof:i,type:O.type,key:Re,ref:be,props:Ce,_owner:Me}},Ne.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:u,_context:O},O.Consumer=O},Ne.createElement=I,Ne.createFactory=function(O){var $=I.bind(null,O);return $.type=O,$},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(O){return{$$typeof:m,render:O}},Ne.isValidElement=N,Ne.lazy=function(O){return{$$typeof:T,_payload:{_status:-1,_result:O},_init:at}},Ne.memo=function(O,$){return{$$typeof:v,type:O,compare:$===void 0?null:$}},Ne.startTransition=function(O){var $=Y.transition;Y.transition={};try{O()}finally{Y.transition=$}},Ne.unstable_act=ie,Ne.useCallback=function(O,$){return ee.current.useCallback(O,$)},Ne.useContext=function(O){return ee.current.useContext(O)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(O){return ee.current.useDeferredValue(O)},Ne.useEffect=function(O,$){return ee.current.useEffect(O,$)},Ne.useId=function(){return ee.current.useId()},Ne.useImperativeHandle=function(O,$,ue){return ee.current.useImperativeHandle(O,$,ue)},Ne.useInsertionEffect=function(O,$){return ee.current.useInsertionEffect(O,$)},Ne.useLayoutEffect=function(O,$){return ee.current.useLayoutEffect(O,$)},Ne.useMemo=function(O,$){return ee.current.useMemo(O,$)},Ne.useReducer=function(O,$,ue){return ee.current.useReducer(O,$,ue)},Ne.useRef=function(O){return ee.current.useRef(O)},Ne.useState=function(O){return ee.current.useState(O)},Ne.useSyncExternalStore=function(O,$,ue){return ee.current.useSyncExternalStore(O,$,ue)},Ne.useTransition=function(){return ee.current.useTransition()},Ne.version="18.3.1",Ne}var Vm;function bd(){return Vm||(Vm=1,Wh.exports=W0()),Wh.exports}var Lm;function q0(){if(Lm)return Ea;Lm=1;var i=bd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,v){var T,A={},x=null,U=null;v!==void 0&&(x=""+v),g.key!==void 0&&(x=""+g.key),g.ref!==void 0&&(U=g.ref);for(T in g)s.call(g,T)&&!u.hasOwnProperty(T)&&(A[T]=g[T]);if(m&&m.defaultProps)for(T in g=m.defaultProps,g)A[T]===void 0&&(A[T]=g[T]);return{$$typeof:e,type:m,key:x,ref:U,props:A,_owner:o.current}}return Ea.Fragment=t,Ea.jsx=h,Ea.jsxs=h,Ea}var Mm;function G0(){return Mm||(Mm=1,Hh.exports=q0()),Hh.exports}var E=G0(),_e=bd();const yy=gy(_e);var _u={},qh={exports:{}},rn={},Gh={exports:{}},Kh={};var Fm;function K0(){return Fm||(Fm=1,(function(i){function e(Y,oe){var ie=Y.length;Y.push(oe);e:for(;0<ie;){var O=ie-1>>>1,$=Y[O];if(0<o($,oe))Y[O]=oe,Y[ie]=$,ie=O;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var oe=Y[0],ie=Y.pop();if(ie!==oe){Y[0]=ie;e:for(var O=0,$=Y.length,ue=$>>>1;O<ue;){var Ce=2*(O+1)-1,Re=Y[Ce],be=Ce+1,Me=Y[be];if(0>o(Re,ie))be<$&&0>o(Me,Re)?(Y[O]=Me,Y[be]=ie,O=be):(Y[O]=Re,Y[Ce]=ie,O=Ce);else if(be<$&&0>o(Me,ie))Y[O]=Me,Y[be]=ie,O=be;else break e}}return oe}function o(Y,oe){var ie=Y.sortIndex-oe.sortIndex;return ie!==0?ie:Y.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var g=[],v=[],T=1,A=null,x=3,U=!1,H=!1,W=!1,z=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function se(Y){for(var oe=t(v);oe!==null;){if(oe.callback===null)s(v);else if(oe.startTime<=Y)s(v),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=t(v)}}function pe(Y){if(W=!1,se(Y),!H)if(t(g)!==null)H=!0,at(ke);else{var oe=t(v);oe!==null&&ee(pe,oe.startTime-Y)}}function ke(Y,oe){H=!1,W&&(W=!1,re(I),I=-1),U=!0;var ie=x;try{for(se(oe),A=t(g);A!==null&&(!(A.expirationTime>oe)||Y&&!b());){var O=A.callback;if(typeof O=="function"){A.callback=null,x=A.priorityLevel;var $=O(A.expirationTime<=oe);oe=i.unstable_now(),typeof $=="function"?A.callback=$:A===t(g)&&s(g),se(oe)}else s(g);A=t(g)}if(A!==null)var ue=!0;else{var Ce=t(v);Ce!==null&&ee(pe,Ce.startTime-oe),ue=!1}return ue}finally{A=null,x=ie,U=!1}}var Ie=!1,P=null,I=-1,C=5,N=-1;function b(){return!(i.unstable_now()-N<C)}function V(){if(P!==null){var Y=i.unstable_now();N=Y;var oe=!0;try{oe=P(!0,Y)}finally{oe?k():(Ie=!1,P=null)}}else Ie=!1}var k;if(typeof ce=="function")k=function(){ce(V)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,ot=Ye.port2;Ye.port1.onmessage=V,k=function(){ot.postMessage(null)}}else k=function(){z(V,0)};function at(Y){P=Y,Ie||(Ie=!0,k())}function ee(Y,oe){I=z(function(){Y(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_continueExecution=function(){H||U||(H=!0,at(ke))},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return t(g)},i.unstable_next=function(Y){switch(x){case 1:case 2:case 3:var oe=3;break;default:oe=x}var ie=x;x=oe;try{return Y()}finally{x=ie}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Y,oe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ie=x;x=Y;try{return oe()}finally{x=ie}},i.unstable_scheduleCallback=function(Y,oe,ie){var O=i.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?O+ie:O):ie=O,Y){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ie+$,Y={id:T++,callback:oe,priorityLevel:Y,startTime:ie,expirationTime:$,sortIndex:-1},ie>O?(Y.sortIndex=ie,e(v,Y),t(g)===null&&Y===t(v)&&(W?(re(I),I=-1):W=!0,ee(pe,ie-O))):(Y.sortIndex=$,e(g,Y),H||U||(H=!0,at(ke))),Y},i.unstable_shouldYield=b,i.unstable_wrapCallback=function(Y){var oe=x;return function(){var ie=x;x=oe;try{return Y.apply(this,arguments)}finally{x=ie}}}})(Kh)),Kh}var jm;function Q0(){return jm||(jm=1,Gh.exports=K0()),Gh.exports}var Um;function Y0(){if(Um)return rn;Um=1;var i=bd(),e=Q0();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function u(n,r){h(n,r),h(n+"Capture",r)}function h(n,r){for(o[n]=r,n=0;n<r.length;n++)s.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T={},A={};function x(n){return g.call(A,n)?!0:g.call(T,n)?!1:v.test(n)?A[n]=!0:(T[n]=!0,!1)}function U(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function H(n,r,a,c){if(r===null||typeof r>"u"||U(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function W(n,r,a,c,d,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){z[n]=new W(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];z[r]=new W(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){z[n]=new W(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){z[n]=new W(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){z[n]=new W(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){z[n]=new W(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){z[n]=new W(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){z[n]=new W(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){z[n]=new W(n,5,!1,n.toLowerCase(),null,!1,!1)});var re=/[\-:]([a-z])/g;function ce(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(re,ce);z[r]=new W(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(re,ce);z[r]=new W(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(re,ce);z[r]=new W(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){z[n]=new W(n,1,!1,n.toLowerCase(),null,!1,!1)}),z.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){z[n]=new W(n,1,!1,n.toLowerCase(),null,!0,!0)});function se(n,r,a,c){var d=z.hasOwnProperty(r)?z[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(H(r,a,d,c)&&(a=null),c||d===null?x(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var pe=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ke=Symbol.for("react.element"),Ie=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),b=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),ot=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),Y=Symbol.iterator;function oe(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,O;function $(n){if(O===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);O=r&&r[1]||""}return`
`+O+n}var ue=!1;function Ce(n,r){if(!n||ue)return"";ue=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(j){var c=j}Reflect.construct(n,[],r)}else{try{r.call()}catch(j){c=j}n.call(r.prototype)}else{try{throw Error()}catch(j){c=j}n()}}catch(j){if(j&&c&&typeof j.stack=="string"){for(var d=j.stack.split(`
`),p=c.stack.split(`
`),_=d.length-1,S=p.length-1;1<=_&&0<=S&&d[_]!==p[S];)S--;for(;1<=_&&0<=S;_--,S--)if(d[_]!==p[S]){if(_!==1||S!==1)do if(_--,S--,0>S||d[_]!==p[S]){var R=`
`+d[_].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=_&&0<=S);break}}}finally{ue=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?$(n):""}function Re(n){switch(n.tag){case 5:return $(n.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return n=Ce(n.type,!1),n;case 11:return n=Ce(n.type.render,!1),n;case 1:return n=Ce(n.type,!0),n;default:return""}}function be(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case Ie:return"Portal";case C:return"Profiler";case I:return"StrictMode";case k:return"Suspense";case Ye:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case b:return(n.displayName||"Context")+".Consumer";case N:return(n._context.displayName||"Context")+".Provider";case V:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ot:return r=n.displayName||null,r!==null?r:be(n.type)||"Memo";case at:r=n._payload,n=n._init;try{return be(n(r))}catch{}}return null}function Me(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function He(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ft(n){var r=He(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(_){c=""+_,p.call(this,_)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function J(n){n._valueTracker||(n._valueTracker=ft(n))}function ne(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=He(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function De(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function qe(n,r){var a=r.checked;return ie({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ut(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Ue(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function on(n,r){r=r.checked,r!=null&&se(n,"checked",r,!1)}function Co(n,r){on(n,r);var a=Ue(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?ms(n,r.type,a):r.hasOwnProperty("defaultValue")&&ms(n,r.type,Ue(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function il(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ms(n,r,a){(r!=="number"||De(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var dr=Array.isArray;function fr(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ue(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function Ro(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function gs(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(dr(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Ue(a)}}function ys(n,r){var a=Ue(r.value),c=Ue(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Po(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function vt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _t(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?vt(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var pr,No=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(pr=pr||document.createElement("div"),pr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=pr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Fr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ri=["Webkit","ms","Moz","O"];Object.keys(Ci).forEach(function(n){Ri.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Ci[r]=Ci[n]})});function Do(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Ci.hasOwnProperty(n)&&Ci[n]?(""+r).trim():r+"px"}function bo(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Do(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Oo=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vo(n,r){if(r){if(Oo[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Lo(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pi=null;function vs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _s=null,mn=null,qn=null;function ws(n){if(n=oa(n)){if(typeof _s!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Ol(r),_s(n.stateNode,n.type,r))}}function Gn(n){mn?qn?qn.push(n):qn=[n]:mn=n}function Mo(){if(mn){var n=mn,r=qn;if(qn=mn=null,ws(n),r)for(n=0;n<r.length;n++)ws(r[n])}}function Ni(n,r){return n(r)}function Fo(){}var mr=!1;function jo(n,r,a){if(mr)return n(r,a);mr=!0;try{return Ni(n,r,a)}finally{mr=!1,(mn!==null||qn!==null)&&(Fo(),Mo())}}function ct(n,r){var a=n.stateNode;if(a===null)return null;var c=Ol(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var Es=!1;if(m)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){Es=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{Es=!1}function Di(n,r,a,c,d,p,_,S,R){var j=Array.prototype.slice.call(arguments,3);try{r.apply(a,j)}catch(K){this.onError(K)}}var bi=!1,Ts=null,Rn=!1,Uo=null,vc={onError:function(n){bi=!0,Ts=n}};function Is(n,r,a,c,d,p,_,S,R){bi=!1,Ts=null,Di.apply(vc,arguments)}function sl(n,r,a,c,d,p,_,S,R){if(Is.apply(this,arguments),bi){if(bi){var j=Ts;bi=!1,Ts=null}else throw Error(t(198));Rn||(Rn=!0,Uo=j)}}function Pn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Oi(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Nn(n){if(Pn(n)!==n)throw Error(t(188))}function ol(n){var r=n.alternate;if(!r){if(r=Pn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Nn(d),n;if(p===c)return Nn(d),r;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var _=!1,S=d.child;S;){if(S===a){_=!0,a=d,c=p;break}if(S===c){_=!0,c=d,a=p;break}S=S.sibling}if(!_){for(S=p.child;S;){if(S===a){_=!0,a=p,c=d;break}if(S===c){_=!0,c=p,a=d;break}S=S.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function Bo(n){return n=ol(n),n!==null?Ss(n):null}function Ss(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Ss(n);if(r!==null)return r;n=n.sibling}return null}var As=e.unstable_scheduleCallback,zo=e.unstable_cancelCallback,al=e.unstable_shouldYield,_c=e.unstable_requestPaint,Ke=e.unstable_now,ll=e.unstable_getCurrentPriorityLevel,Vi=e.unstable_ImmediatePriority,jr=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,$o=e.unstable_LowPriority,ul=e.unstable_IdlePriority,Li=null,an=null;function cl(n){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Li,n,void 0,(n.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:dl,Ho=Math.log,hl=Math.LN2;function dl(n){return n>>>=0,n===0?32:31-(Ho(n)/hl|0)|0}var xs=64,ks=4194304;function Ur(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Mi(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,_=a&268435455;if(_!==0){var S=_&~d;S!==0?c=Ur(S):(p&=_,p!==0&&(c=Ur(p)))}else _=a&~d,_!==0?c=Ur(_):p!==0&&(c=Ur(p));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,p=r&-r,d>=p||d===16&&(p&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-qt(r),d=1<<a,c|=n[a],r&=~d;return c}function wc(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gr(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var _=31-qt(p),S=1<<_,R=d[_];R===-1?((S&a)===0||(S&c)!==0)&&(d[_]=wc(S,r)):R<=r&&(n.expiredLanes|=S),p&=~S}}function ln(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Fi(){var n=xs;return xs<<=1,(xs&4194240)===0&&(xs=64),n}function Br(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function zr(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-qt(r),n[r]=a}function Ge(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-qt(a),p=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function $r(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-qt(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var Le=0;function Hr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var fl,Cs,pl,ml,gl,Wo=!1,Kn=[],Nt=null,Dn=null,bn=null,Wr=new Map,yn=new Map,Qn=[],Ec="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yl(n,r){switch(n){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":Wr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(r.pointerId)}}function Yt(n,r,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},r!==null&&(r=oa(r),r!==null&&Cs(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function Tc(n,r,a,c,d){switch(r){case"focusin":return Nt=Yt(Nt,n,r,a,c,d),!0;case"dragenter":return Dn=Yt(Dn,n,r,a,c,d),!0;case"mouseover":return bn=Yt(bn,n,r,a,c,d),!0;case"pointerover":var p=d.pointerId;return Wr.set(p,Yt(Wr.get(p)||null,n,r,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,yn.set(p,Yt(yn.get(p)||null,n,r,a,c,d)),!0}return!1}function vl(n){var r=$i(n.target);if(r!==null){var a=Pn(r);if(a!==null){if(r=a.tag,r===13){if(r=Oi(a),r!==null){n.blockedOn=r,gl(n.priority,function(){pl(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yr(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Rs(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Pi=c,a.target.dispatchEvent(c),Pi=null}else return r=oa(a),r!==null&&Cs(r),n.blockedOn=a,!1;r.shift()}return!0}function ji(n,r,a){yr(n)&&a.delete(r)}function _l(){Wo=!1,Nt!==null&&yr(Nt)&&(Nt=null),Dn!==null&&yr(Dn)&&(Dn=null),bn!==null&&yr(bn)&&(bn=null),Wr.forEach(ji),yn.forEach(ji)}function On(n,r){n.blockedOn===r&&(n.blockedOn=null,Wo||(Wo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_l)))}function Vn(n){function r(d){return On(d,n)}if(0<Kn.length){On(Kn[0],n);for(var a=1;a<Kn.length;a++){var c=Kn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Nt!==null&&On(Nt,n),Dn!==null&&On(Dn,n),bn!==null&&On(bn,n),Wr.forEach(r),yn.forEach(r),a=0;a<Qn.length;a++)c=Qn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Qn.length&&(a=Qn[0],a.blockedOn===null);)vl(a),a.blockedOn===null&&Qn.shift()}var vr=pe.ReactCurrentBatchConfig,qr=!0;function et(n,r,a,c){var d=Le,p=vr.transition;vr.transition=null;try{Le=1,qo(n,r,a,c)}finally{Le=d,vr.transition=p}}function Ic(n,r,a,c){var d=Le,p=vr.transition;vr.transition=null;try{Le=4,qo(n,r,a,c)}finally{Le=d,vr.transition=p}}function qo(n,r,a,c){if(qr){var d=Rs(n,r,a,c);if(d===null)Oc(n,r,c,Ui,a),yl(n,c);else if(Tc(d,n,r,a,c))c.stopPropagation();else if(yl(n,c),r&4&&-1<Ec.indexOf(n)){for(;d!==null;){var p=oa(d);if(p!==null&&fl(p),p=Rs(n,r,a,c),p===null&&Oc(n,r,c,Ui,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else Oc(n,r,c,null,a)}}var Ui=null;function Rs(n,r,a,c){if(Ui=null,n=vs(c),n=$i(n),n!==null)if(r=Pn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Oi(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Ui=n,null}function Go(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ll()){case Vi:return 1;case jr:return 4;case gn:case $o:return 16;case ul:return 536870912;default:return 16}default:return 16}}var un=null,Ps=null,Xt=null;function Ko(){if(Xt)return Xt;var n,r=Ps,a=r.length,c,d="value"in un?un.value:un.textContent,p=d.length;for(n=0;n<a&&r[n]===d[n];n++);var _=a-n;for(c=1;c<=_&&r[a-c]===d[p-c];c++);return Xt=d.slice(n,1<c?1-c:void 0)}function Ns(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Yn(){return!0}function Qo(){return!1}function Dt(n){function r(a,c,d,p,_){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Yn:Qo,this.isPropagationStopped=Qo,this}return ie(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),r}var Ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=Dt(Ln),Xn=ie({},Ln,{view:0,detail:0}),Sc=Dt(Xn),bs,_r,Gr,Bi=ie({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Gr&&(Gr&&n.type==="mousemove"?(bs=n.screenX-Gr.screenX,_r=n.screenY-Gr.screenY):_r=bs=0,Gr=n),bs)},movementY:function(n){return"movementY"in n?n.movementY:_r}}),Os=Dt(Bi),Yo=ie({},Bi,{dataTransfer:0}),wl=Dt(Yo),Vs=ie({},Xn,{relatedTarget:0}),Ls=Dt(Vs),El=ie({},Ln,{animationName:0,elapsedTime:0,pseudoElement:0}),wr=Dt(El),Tl=ie({},Ln,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Il=Dt(Tl),Sl=ie({},Ln,{data:0}),Xo=Dt(Sl),Ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Al={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Al[n])?!!r[n]:!1}function Jn(){return xl}var l=ie({},Xn,{key:function(n){if(n.key){var r=Ms[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ns(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Gt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jn,charCode:function(n){return n.type==="keypress"?Ns(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ns(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),f=Dt(l),y=ie({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=Dt(y),L=ie({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jn}),B=Dt(L),te=ie({},Ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=Dt(te),wt=ie({},Bi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Dt(wt),At=[9,13,27,32],pt=m&&"CompositionEvent"in window,vn=null;m&&"documentMode"in document&&(vn=document.documentMode);var cn=m&&"TextEvent"in window&&!vn,zi=m&&(!pt||vn&&8<vn&&11>=vn),Fs=" ",Cf=!1;function Rf(n,r){switch(n){case"keyup":return At.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var js=!1;function z_(n,r){switch(n){case"compositionend":return Pf(r);case"keypress":return r.which!==32?null:(Cf=!0,Fs);case"textInput":return n=r.data,n===Fs&&Cf?null:n;default:return null}}function $_(n,r){if(js)return n==="compositionend"||!pt&&Rf(n,r)?(n=Ko(),Xt=Ps=un=null,js=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return zi&&r.locale!=="ko"?null:r.data;default:return null}}var H_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!H_[n.type]:r==="textarea"}function Df(n,r,a,c){Gn(c),r=Nl(r,"onChange"),0<r.length&&(a=new Ds("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var Jo=null,Zo=null;function W_(n){Yf(n,0)}function kl(n){var r=Hs(n);if(ne(r))return n}function q_(n,r){if(n==="change")return r}var bf=!1;if(m){var Ac;if(m){var xc="oninput"in document;if(!xc){var Of=document.createElement("div");Of.setAttribute("oninput","return;"),xc=typeof Of.oninput=="function"}Ac=xc}else Ac=!1;bf=Ac&&(!document.documentMode||9<document.documentMode)}function Vf(){Jo&&(Jo.detachEvent("onpropertychange",Lf),Zo=Jo=null)}function Lf(n){if(n.propertyName==="value"&&kl(Zo)){var r=[];Df(r,Zo,n,vs(n)),jo(W_,r)}}function G_(n,r,a){n==="focusin"?(Vf(),Jo=r,Zo=a,Jo.attachEvent("onpropertychange",Lf)):n==="focusout"&&Vf()}function K_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return kl(Zo)}function Q_(n,r){if(n==="click")return kl(r)}function Y_(n,r){if(n==="input"||n==="change")return kl(r)}function X_(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Mn=typeof Object.is=="function"?Object.is:X_;function ea(n,r){if(Mn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(r,d)||!Mn(n[d],r[d]))return!1}return!0}function Mf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ff(n,r){var a=Mf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Mf(a)}}function jf(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?jf(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Uf(){for(var n=window,r=De();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=De(n.document)}return r}function kc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function J_(n){var r=Uf(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&jf(a.ownerDocument.documentElement,a)){if(c!==null&&kc(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=Ff(a,p);var _=Ff(a,c);d&&_&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(r),n.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Z_=m&&"documentMode"in document&&11>=document.documentMode,Us=null,Cc=null,ta=null,Rc=!1;function Bf(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rc||Us==null||Us!==De(c)||(c=Us,"selectionStart"in c&&kc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ta&&ea(ta,c)||(ta=c,c=Nl(Cc,"onSelect"),0<c.length&&(r=new Ds("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Us)))}function Cl(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Bs={animationend:Cl("Animation","AnimationEnd"),animationiteration:Cl("Animation","AnimationIteration"),animationstart:Cl("Animation","AnimationStart"),transitionend:Cl("Transition","TransitionEnd")},Pc={},zf={};m&&(zf=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Rl(n){if(Pc[n])return Pc[n];if(!Bs[n])return n;var r=Bs[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in zf)return Pc[n]=r[a];return n}var $f=Rl("animationend"),Hf=Rl("animationiteration"),Wf=Rl("animationstart"),qf=Rl("transitionend"),Gf=new Map,Kf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(n,r){Gf.set(n,r),u(r,[n])}for(var Nc=0;Nc<Kf.length;Nc++){var Dc=Kf[Nc],e0=Dc.toLowerCase(),t0=Dc[0].toUpperCase()+Dc.slice(1);Kr(e0,"on"+t0)}Kr($f,"onAnimationEnd"),Kr(Hf,"onAnimationIteration"),Kr(Wf,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(qf,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n0=new Set("cancel close invalid load scroll toggle".split(" ").concat(na));function Qf(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,sl(c,r,void 0,n),n.currentTarget=null}function Yf(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var _=c.length-1;0<=_;_--){var S=c[_],R=S.instance,j=S.currentTarget;if(S=S.listener,R!==p&&d.isPropagationStopped())break e;Qf(d,S,j),p=R}else for(_=0;_<c.length;_++){if(S=c[_],R=S.instance,j=S.currentTarget,S=S.listener,R!==p&&d.isPropagationStopped())break e;Qf(d,S,j),p=R}}}if(Rn)throw n=Uo,Rn=!1,Uo=null,n}function Xe(n,r){var a=r[Uc];a===void 0&&(a=r[Uc]=new Set);var c=n+"__bubble";a.has(c)||(Xf(r,n,2,!1),a.add(c))}function bc(n,r,a){var c=0;r&&(c|=4),Xf(a,n,c,r)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function ra(n){if(!n[Pl]){n[Pl]=!0,s.forEach(function(a){a!=="selectionchange"&&(n0.has(a)||bc(a,!1,n),bc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Pl]||(r[Pl]=!0,bc("selectionchange",!1,r))}}function Xf(n,r,a,c){switch(Go(r)){case 1:var d=et;break;case 4:d=Ic;break;default:d=qo}a=d.bind(null,r,a,n),d=void 0,!Es||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function Oc(n,r,a,c,d){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(_===4)for(_=c.return;_!==null;){var R=_.tag;if((R===3||R===4)&&(R=_.stateNode.containerInfo,R===d||R.nodeType===8&&R.parentNode===d))return;_=_.return}for(;S!==null;){if(_=$i(S),_===null)return;if(R=_.tag,R===5||R===6){c=p=_;continue e}S=S.parentNode}}c=c.return}jo(function(){var j=p,K=vs(a),X=[];e:{var G=Gf.get(n);if(G!==void 0){var ae=Ds,de=n;switch(n){case"keypress":if(Ns(a)===0)break e;case"keydown":case"keyup":ae=f;break;case"focusin":de="focus",ae=Ls;break;case"focusout":de="blur",ae=Ls;break;case"beforeblur":case"afterblur":ae=Ls;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Os;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=wl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=B;break;case $f:case Hf:case Wf:ae=wr;break;case qf:ae=We;break;case"scroll":ae=Sc;break;case"wheel":ae=Fe;break;case"copy":case"cut":case"paste":ae=Il;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=w}var fe=(r&4)!==0,ht=!fe&&n==="scroll",M=fe?G!==null?G+"Capture":null:G;fe=[];for(var D=j,F;D!==null;){F=D;var Z=F.stateNode;if(F.tag===5&&Z!==null&&(F=Z,M!==null&&(Z=ct(D,M),Z!=null&&fe.push(ia(D,Z,F)))),ht)break;D=D.return}0<fe.length&&(G=new ae(G,de,null,a,K),X.push({event:G,listeners:fe}))}}if((r&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",G&&a!==Pi&&(de=a.relatedTarget||a.fromElement)&&($i(de)||de[Er]))break e;if((ae||G)&&(G=K.window===K?K:(G=K.ownerDocument)?G.defaultView||G.parentWindow:window,ae?(de=a.relatedTarget||a.toElement,ae=j,de=de?$i(de):null,de!==null&&(ht=Pn(de),de!==ht||de.tag!==5&&de.tag!==6)&&(de=null)):(ae=null,de=j),ae!==de)){if(fe=Os,Z="onMouseLeave",M="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(fe=w,Z="onPointerLeave",M="onPointerEnter",D="pointer"),ht=ae==null?G:Hs(ae),F=de==null?G:Hs(de),G=new fe(Z,D+"leave",ae,a,K),G.target=ht,G.relatedTarget=F,Z=null,$i(K)===j&&(fe=new fe(M,D+"enter",de,a,K),fe.target=F,fe.relatedTarget=ht,Z=fe),ht=Z,ae&&de)t:{for(fe=ae,M=de,D=0,F=fe;F;F=zs(F))D++;for(F=0,Z=M;Z;Z=zs(Z))F++;for(;0<D-F;)fe=zs(fe),D--;for(;0<F-D;)M=zs(M),F--;for(;D--;){if(fe===M||M!==null&&fe===M.alternate)break t;fe=zs(fe),M=zs(M)}fe=null}else fe=null;ae!==null&&Jf(X,G,ae,fe,!1),de!==null&&ht!==null&&Jf(X,ht,de,fe,!0)}}e:{if(G=j?Hs(j):window,ae=G.nodeName&&G.nodeName.toLowerCase(),ae==="select"||ae==="input"&&G.type==="file")var me=q_;else if(Nf(G))if(bf)me=Y_;else{me=K_;var ye=G_}else(ae=G.nodeName)&&ae.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(me=Q_);if(me&&(me=me(n,j))){Df(X,me,a,K);break e}ye&&ye(n,G,j),n==="focusout"&&(ye=G._wrapperState)&&ye.controlled&&G.type==="number"&&ms(G,"number",G.value)}switch(ye=j?Hs(j):window,n){case"focusin":(Nf(ye)||ye.contentEditable==="true")&&(Us=ye,Cc=j,ta=null);break;case"focusout":ta=Cc=Us=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,Bf(X,a,K);break;case"selectionchange":if(Z_)break;case"keydown":case"keyup":Bf(X,a,K)}var ve;if(pt)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else js?Rf(n,a)&&(Se="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(zi&&a.locale!=="ko"&&(js||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&js&&(ve=Ko()):(un=K,Ps="value"in un?un.value:un.textContent,js=!0)),ye=Nl(j,Se),0<ye.length&&(Se=new Xo(Se,n,null,a,K),X.push({event:Se,listeners:ye}),ve?Se.data=ve:(ve=Pf(a),ve!==null&&(Se.data=ve)))),(ve=cn?z_(n,a):$_(n,a))&&(j=Nl(j,"onBeforeInput"),0<j.length&&(K=new Xo("onBeforeInput","beforeinput",null,a,K),X.push({event:K,listeners:j}),K.data=ve))}Yf(X,r)})}function ia(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Nl(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=ct(n,a),p!=null&&c.unshift(ia(n,p,d)),p=ct(n,r),p!=null&&c.push(ia(n,p,d))),n=n.return}return c}function zs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Jf(n,r,a,c,d){for(var p=r._reactName,_=[];a!==null&&a!==c;){var S=a,R=S.alternate,j=S.stateNode;if(R!==null&&R===c)break;S.tag===5&&j!==null&&(S=j,d?(R=ct(a,p),R!=null&&_.unshift(ia(a,R,S))):d||(R=ct(a,p),R!=null&&_.push(ia(a,R,S)))),a=a.return}_.length!==0&&n.push({event:r,listeners:_})}var r0=/\r\n?/g,i0=/\u0000|\uFFFD/g;function Zf(n){return(typeof n=="string"?n:""+n).replace(r0,`
`).replace(i0,"")}function Dl(n,r,a){if(r=Zf(r),Zf(n)!==r&&a)throw Error(t(425))}function bl(){}var Vc=null,Lc=null;function Mc(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Fc=typeof setTimeout=="function"?setTimeout:void 0,s0=typeof clearTimeout=="function"?clearTimeout:void 0,ep=typeof Promise=="function"?Promise:void 0,o0=typeof queueMicrotask=="function"?queueMicrotask:typeof ep<"u"?function(n){return ep.resolve(null).then(n).catch(a0)}:Fc;function a0(n){setTimeout(function(){throw n})}function jc(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Vn(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Vn(r)}function Qr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function tp(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var $s=Math.random().toString(36).slice(2),Zn="__reactFiber$"+$s,sa="__reactProps$"+$s,Er="__reactContainer$"+$s,Uc="__reactEvents$"+$s,l0="__reactListeners$"+$s,u0="__reactHandles$"+$s;function $i(n){var r=n[Zn];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Er]||a[Zn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=tp(n);n!==null;){if(a=n[Zn])return a;n=tp(n)}return r}n=a,a=n.parentNode}return null}function oa(n){return n=n[Zn]||n[Er],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Hs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ol(n){return n[sa]||null}var Bc=[],Ws=-1;function Yr(n){return{current:n}}function Je(n){0>Ws||(n.current=Bc[Ws],Bc[Ws]=null,Ws--)}function Qe(n,r){Ws++,Bc[Ws]=n.current,n.current=r}var Xr={},Ft=Yr(Xr),Jt=Yr(!1),Hi=Xr;function qs(n,r){var a=n.type.contextTypes;if(!a)return Xr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=r[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function Zt(n){return n=n.childContextTypes,n!=null}function Vl(){Je(Jt),Je(Ft)}function np(n,r,a){if(Ft.current!==Xr)throw Error(t(168));Qe(Ft,r),Qe(Jt,a)}function rp(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,Me(n)||"Unknown",d));return ie({},a,c)}function Ll(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Xr,Hi=Ft.current,Qe(Ft,n),Qe(Jt,Jt.current),!0}function ip(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=rp(n,r,Hi),c.__reactInternalMemoizedMergedChildContext=n,Je(Jt),Je(Ft),Qe(Ft,n)):Je(Jt),Qe(Jt,a)}var Tr=null,Ml=!1,zc=!1;function sp(n){Tr===null?Tr=[n]:Tr.push(n)}function c0(n){Ml=!0,sp(n)}function Jr(){if(!zc&&Tr!==null){zc=!0;var n=0,r=Le;try{var a=Tr;for(Le=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Tr=null,Ml=!1}catch(d){throw Tr!==null&&(Tr=Tr.slice(n+1)),As(Vi,Jr),d}finally{Le=r,zc=!1}}return null}var Gs=[],Ks=0,Fl=null,jl=0,_n=[],wn=0,Wi=null,Ir=1,Sr="";function qi(n,r){Gs[Ks++]=jl,Gs[Ks++]=Fl,Fl=n,jl=r}function op(n,r,a){_n[wn++]=Ir,_n[wn++]=Sr,_n[wn++]=Wi,Wi=n;var c=Ir;n=Sr;var d=32-qt(c)-1;c&=~(1<<d),a+=1;var p=32-qt(r)+d;if(30<p){var _=d-d%5;p=(c&(1<<_)-1).toString(32),c>>=_,d-=_,Ir=1<<32-qt(r)+d|a<<d|c,Sr=p+n}else Ir=1<<p|a<<d|c,Sr=n}function $c(n){n.return!==null&&(qi(n,1),op(n,1,0))}function Hc(n){for(;n===Fl;)Fl=Gs[--Ks],Gs[Ks]=null,jl=Gs[--Ks],Gs[Ks]=null;for(;n===Wi;)Wi=_n[--wn],_n[wn]=null,Sr=_n[--wn],_n[wn]=null,Ir=_n[--wn],_n[wn]=null}var hn=null,dn=null,tt=!1,Fn=null;function ap(n,r){var a=Sn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function lp(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,hn=n,dn=Qr(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,hn=n,dn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Wi!==null?{id:Ir,overflow:Sr}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Sn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,hn=n,dn=null,!0):!1;default:return!1}}function Wc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function qc(n){if(tt){var r=dn;if(r){var a=r;if(!lp(n,r)){if(Wc(n))throw Error(t(418));r=Qr(a.nextSibling);var c=hn;r&&lp(n,r)?ap(c,a):(n.flags=n.flags&-4097|2,tt=!1,hn=n)}}else{if(Wc(n))throw Error(t(418));n.flags=n.flags&-4097|2,tt=!1,hn=n}}}function up(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;hn=n}function Ul(n){if(n!==hn)return!1;if(!tt)return up(n),tt=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Mc(n.type,n.memoizedProps)),r&&(r=dn)){if(Wc(n))throw cp(),Error(t(418));for(;r;)ap(n,r),r=Qr(r.nextSibling)}if(up(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){dn=Qr(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}dn=null}}else dn=hn?Qr(n.stateNode.nextSibling):null;return!0}function cp(){for(var n=dn;n;)n=Qr(n.nextSibling)}function Qs(){dn=hn=null,tt=!1}function Gc(n){Fn===null?Fn=[n]:Fn.push(n)}var h0=pe.ReactCurrentBatchConfig;function aa(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var S=d.refs;_===null?delete S[p]:S[p]=_},r._stringRef=p,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Bl(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function hp(n){var r=n._init;return r(n._payload)}function dp(n){function r(M,D){if(n){var F=M.deletions;F===null?(M.deletions=[D],M.flags|=16):F.push(D)}}function a(M,D){if(!n)return null;for(;D!==null;)r(M,D),D=D.sibling;return null}function c(M,D){for(M=new Map;D!==null;)D.key!==null?M.set(D.key,D):M.set(D.index,D),D=D.sibling;return M}function d(M,D){return M=oi(M,D),M.index=0,M.sibling=null,M}function p(M,D,F){return M.index=F,n?(F=M.alternate,F!==null?(F=F.index,F<D?(M.flags|=2,D):F):(M.flags|=2,D)):(M.flags|=1048576,D)}function _(M){return n&&M.alternate===null&&(M.flags|=2),M}function S(M,D,F,Z){return D===null||D.tag!==6?(D=Fh(F,M.mode,Z),D.return=M,D):(D=d(D,F),D.return=M,D)}function R(M,D,F,Z){var me=F.type;return me===P?K(M,D,F.props.children,Z,F.key):D!==null&&(D.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===at&&hp(me)===D.type)?(Z=d(D,F.props),Z.ref=aa(M,D,F),Z.return=M,Z):(Z=hu(F.type,F.key,F.props,null,M.mode,Z),Z.ref=aa(M,D,F),Z.return=M,Z)}function j(M,D,F,Z){return D===null||D.tag!==4||D.stateNode.containerInfo!==F.containerInfo||D.stateNode.implementation!==F.implementation?(D=jh(F,M.mode,Z),D.return=M,D):(D=d(D,F.children||[]),D.return=M,D)}function K(M,D,F,Z,me){return D===null||D.tag!==7?(D=es(F,M.mode,Z,me),D.return=M,D):(D=d(D,F),D.return=M,D)}function X(M,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Fh(""+D,M.mode,F),D.return=M,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ke:return F=hu(D.type,D.key,D.props,null,M.mode,F),F.ref=aa(M,null,D),F.return=M,F;case Ie:return D=jh(D,M.mode,F),D.return=M,D;case at:var Z=D._init;return X(M,Z(D._payload),F)}if(dr(D)||oe(D))return D=es(D,M.mode,F,null),D.return=M,D;Bl(M,D)}return null}function G(M,D,F,Z){var me=D!==null?D.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return me!==null?null:S(M,D,""+F,Z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ke:return F.key===me?R(M,D,F,Z):null;case Ie:return F.key===me?j(M,D,F,Z):null;case at:return me=F._init,G(M,D,me(F._payload),Z)}if(dr(F)||oe(F))return me!==null?null:K(M,D,F,Z,null);Bl(M,F)}return null}function ae(M,D,F,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return M=M.get(F)||null,S(D,M,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case ke:return M=M.get(Z.key===null?F:Z.key)||null,R(D,M,Z,me);case Ie:return M=M.get(Z.key===null?F:Z.key)||null,j(D,M,Z,me);case at:var ye=Z._init;return ae(M,D,F,ye(Z._payload),me)}if(dr(Z)||oe(Z))return M=M.get(F)||null,K(D,M,Z,me,null);Bl(D,Z)}return null}function de(M,D,F,Z){for(var me=null,ye=null,ve=D,Se=D=0,Ct=null;ve!==null&&Se<F.length;Se++){ve.index>Se?(Ct=ve,ve=null):Ct=ve.sibling;var ze=G(M,ve,F[Se],Z);if(ze===null){ve===null&&(ve=Ct);break}n&&ve&&ze.alternate===null&&r(M,ve),D=p(ze,D,Se),ye===null?me=ze:ye.sibling=ze,ye=ze,ve=Ct}if(Se===F.length)return a(M,ve),tt&&qi(M,Se),me;if(ve===null){for(;Se<F.length;Se++)ve=X(M,F[Se],Z),ve!==null&&(D=p(ve,D,Se),ye===null?me=ve:ye.sibling=ve,ye=ve);return tt&&qi(M,Se),me}for(ve=c(M,ve);Se<F.length;Se++)Ct=ae(ve,M,Se,F[Se],Z),Ct!==null&&(n&&Ct.alternate!==null&&ve.delete(Ct.key===null?Se:Ct.key),D=p(Ct,D,Se),ye===null?me=Ct:ye.sibling=Ct,ye=Ct);return n&&ve.forEach(function(ai){return r(M,ai)}),tt&&qi(M,Se),me}function fe(M,D,F,Z){var me=oe(F);if(typeof me!="function")throw Error(t(150));if(F=me.call(F),F==null)throw Error(t(151));for(var ye=me=null,ve=D,Se=D=0,Ct=null,ze=F.next();ve!==null&&!ze.done;Se++,ze=F.next()){ve.index>Se?(Ct=ve,ve=null):Ct=ve.sibling;var ai=G(M,ve,ze.value,Z);if(ai===null){ve===null&&(ve=Ct);break}n&&ve&&ai.alternate===null&&r(M,ve),D=p(ai,D,Se),ye===null?me=ai:ye.sibling=ai,ye=ai,ve=Ct}if(ze.done)return a(M,ve),tt&&qi(M,Se),me;if(ve===null){for(;!ze.done;Se++,ze=F.next())ze=X(M,ze.value,Z),ze!==null&&(D=p(ze,D,Se),ye===null?me=ze:ye.sibling=ze,ye=ze);return tt&&qi(M,Se),me}for(ve=c(M,ve);!ze.done;Se++,ze=F.next())ze=ae(ve,M,Se,ze.value,Z),ze!==null&&(n&&ze.alternate!==null&&ve.delete(ze.key===null?Se:ze.key),D=p(ze,D,Se),ye===null?me=ze:ye.sibling=ze,ye=ze);return n&&ve.forEach(function(H0){return r(M,H0)}),tt&&qi(M,Se),me}function ht(M,D,F,Z){if(typeof F=="object"&&F!==null&&F.type===P&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case ke:e:{for(var me=F.key,ye=D;ye!==null;){if(ye.key===me){if(me=F.type,me===P){if(ye.tag===7){a(M,ye.sibling),D=d(ye,F.props.children),D.return=M,M=D;break e}}else if(ye.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===at&&hp(me)===ye.type){a(M,ye.sibling),D=d(ye,F.props),D.ref=aa(M,ye,F),D.return=M,M=D;break e}a(M,ye);break}else r(M,ye);ye=ye.sibling}F.type===P?(D=es(F.props.children,M.mode,Z,F.key),D.return=M,M=D):(Z=hu(F.type,F.key,F.props,null,M.mode,Z),Z.ref=aa(M,D,F),Z.return=M,M=Z)}return _(M);case Ie:e:{for(ye=F.key;D!==null;){if(D.key===ye)if(D.tag===4&&D.stateNode.containerInfo===F.containerInfo&&D.stateNode.implementation===F.implementation){a(M,D.sibling),D=d(D,F.children||[]),D.return=M,M=D;break e}else{a(M,D);break}else r(M,D);D=D.sibling}D=jh(F,M.mode,Z),D.return=M,M=D}return _(M);case at:return ye=F._init,ht(M,D,ye(F._payload),Z)}if(dr(F))return de(M,D,F,Z);if(oe(F))return fe(M,D,F,Z);Bl(M,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,D!==null&&D.tag===6?(a(M,D.sibling),D=d(D,F),D.return=M,M=D):(a(M,D),D=Fh(F,M.mode,Z),D.return=M,M=D),_(M)):a(M,D)}return ht}var Ys=dp(!0),fp=dp(!1),zl=Yr(null),$l=null,Xs=null,Kc=null;function Qc(){Kc=Xs=$l=null}function Yc(n){var r=zl.current;Je(zl),n._currentValue=r}function Xc(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Js(n,r){$l=n,Kc=Xs=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(en=!0),n.firstContext=null)}function En(n){var r=n._currentValue;if(Kc!==n)if(n={context:n,memoizedValue:r,next:null},Xs===null){if($l===null)throw Error(t(308));Xs=n,$l.dependencies={lanes:0,firstContext:n}}else Xs=Xs.next=n;return r}var Gi=null;function Jc(n){Gi===null?Gi=[n]:Gi.push(n)}function pp(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,Jc(r)):(a.next=d.next,d.next=a),r.interleaved=a,Ar(n,c)}function Ar(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Zr=!1;function Zc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mp(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function xr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function ei(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Be&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,Ar(n,a)}return d=c.interleaved,d===null?(r.next=r,Jc(c)):(r.next=d.next,d.next=r),c.interleaved=r,Ar(n,a)}function Hl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,$r(n,a)}}function gp(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=_:p=p.next=_,a=a.next}while(a!==null);p===null?d=p=r:p=p.next=r}else d=p=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function Wl(n,r,a,c){var d=n.updateQueue;Zr=!1;var p=d.firstBaseUpdate,_=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var R=S,j=R.next;R.next=null,_===null?p=j:_.next=j,_=R;var K=n.alternate;K!==null&&(K=K.updateQueue,S=K.lastBaseUpdate,S!==_&&(S===null?K.firstBaseUpdate=j:S.next=j,K.lastBaseUpdate=R))}if(p!==null){var X=d.baseState;_=0,K=j=R=null,S=p;do{var G=S.lane,ae=S.eventTime;if((c&G)===G){K!==null&&(K=K.next={eventTime:ae,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var de=n,fe=S;switch(G=r,ae=a,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){X=de.call(ae,X,G);break e}X=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,G=typeof de=="function"?de.call(ae,X,G):de,G==null)break e;X=ie({},X,G);break e;case 2:Zr=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,G=d.effects,G===null?d.effects=[S]:G.push(S))}else ae={eventTime:ae,lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},K===null?(j=K=ae,R=X):K=K.next=ae,_|=G;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;G=S,S=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(K===null&&(R=X),d.baseState=R,d.firstBaseUpdate=j,d.lastBaseUpdate=K,r=d.shared.interleaved,r!==null){d=r;do _|=d.lane,d=d.next;while(d!==r)}else p===null&&(d.shared.lanes=0);Yi|=_,n.lanes=_,n.memoizedState=X}}function yp(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var la={},er=Yr(la),ua=Yr(la),ca=Yr(la);function Ki(n){if(n===la)throw Error(t(174));return n}function eh(n,r){switch(Qe(ca,r),Qe(ua,n),Qe(er,la),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:_t(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=_t(r,n)}Je(er),Qe(er,r)}function Zs(){Je(er),Je(ua),Je(ca)}function vp(n){Ki(ca.current);var r=Ki(er.current),a=_t(r,n.type);r!==a&&(Qe(ua,n),Qe(er,a))}function th(n){ua.current===n&&(Je(er),Je(ua))}var nt=Yr(0);function ql(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var nh=[];function rh(){for(var n=0;n<nh.length;n++)nh[n]._workInProgressVersionPrimary=null;nh.length=0}var Gl=pe.ReactCurrentDispatcher,ih=pe.ReactCurrentBatchConfig,Qi=0,rt=null,Et=null,xt=null,Kl=!1,ha=!1,da=0,d0=0;function jt(){throw Error(t(321))}function sh(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Mn(n[a],r[a]))return!1;return!0}function oh(n,r,a,c,d,p){if(Qi=p,rt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Gl.current=n===null||n.memoizedState===null?g0:y0,n=a(c,d),ha){p=0;do{if(ha=!1,da=0,25<=p)throw Error(t(301));p+=1,xt=Et=null,r.updateQueue=null,Gl.current=v0,n=a(c,d)}while(ha)}if(Gl.current=Xl,r=Et!==null&&Et.next!==null,Qi=0,xt=Et=rt=null,Kl=!1,r)throw Error(t(300));return n}function ah(){var n=da!==0;return da=0,n}function tr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?rt.memoizedState=xt=n:xt=xt.next=n,xt}function Tn(){if(Et===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=Et.next;var r=xt===null?rt.memoizedState:xt.next;if(r!==null)xt=r,Et=n;else{if(n===null)throw Error(t(310));Et=n,n={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},xt===null?rt.memoizedState=xt=n:xt=xt.next=n}return xt}function fa(n,r){return typeof r=="function"?r(n):r}function lh(n){var r=Tn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Et,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var _=d.next;d.next=p.next,p.next=_}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var S=_=null,R=null,j=p;do{var K=j.lane;if((Qi&K)===K)R!==null&&(R=R.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),c=j.hasEagerState?j.eagerState:n(c,j.action);else{var X={lane:K,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};R===null?(S=R=X,_=c):R=R.next=X,rt.lanes|=K,Yi|=K}j=j.next}while(j!==null&&j!==p);R===null?_=c:R.next=S,Mn(c,r.memoizedState)||(en=!0),r.memoizedState=c,r.baseState=_,r.baseQueue=R,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,rt.lanes|=p,Yi|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function uh(n){var r=Tn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=r.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do p=n(p,_.action),_=_.next;while(_!==d);Mn(p,r.memoizedState)||(en=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,c]}function _p(){}function wp(n,r){var a=rt,c=Tn(),d=r(),p=!Mn(c.memoizedState,d);if(p&&(c.memoizedState=d,en=!0),c=c.queue,ch(Ip.bind(null,a,c,n),[n]),c.getSnapshot!==r||p||xt!==null&&xt.memoizedState.tag&1){if(a.flags|=2048,pa(9,Tp.bind(null,a,c,d,r),void 0,null),kt===null)throw Error(t(349));(Qi&30)!==0||Ep(a,r,d)}return d}function Ep(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=rt.updateQueue,r===null?(r={lastEffect:null,stores:null},rt.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Tp(n,r,a,c){r.value=a,r.getSnapshot=c,Sp(r)&&Ap(n)}function Ip(n,r,a){return a(function(){Sp(r)&&Ap(n)})}function Sp(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Mn(n,a)}catch{return!0}}function Ap(n){var r=Ar(n,1);r!==null&&zn(r,n,1,-1)}function xp(n){var r=tr();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:n},r.queue=n,n=n.dispatch=m0.bind(null,rt,n),[r.memoizedState,n]}function pa(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=rt.updateQueue,r===null?(r={lastEffect:null,stores:null},rt.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function kp(){return Tn().memoizedState}function Ql(n,r,a,c){var d=tr();rt.flags|=n,d.memoizedState=pa(1|r,a,void 0,c===void 0?null:c)}function Yl(n,r,a,c){var d=Tn();c=c===void 0?null:c;var p=void 0;if(Et!==null){var _=Et.memoizedState;if(p=_.destroy,c!==null&&sh(c,_.deps)){d.memoizedState=pa(r,a,p,c);return}}rt.flags|=n,d.memoizedState=pa(1|r,a,p,c)}function Cp(n,r){return Ql(8390656,8,n,r)}function ch(n,r){return Yl(2048,8,n,r)}function Rp(n,r){return Yl(4,2,n,r)}function Pp(n,r){return Yl(4,4,n,r)}function Np(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Dp(n,r,a){return a=a!=null?a.concat([n]):null,Yl(4,4,Np.bind(null,r,n),a)}function hh(){}function bp(n,r){var a=Tn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&sh(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function Op(n,r){var a=Tn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&sh(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function Vp(n,r,a){return(Qi&21)===0?(n.baseState&&(n.baseState=!1,en=!0),n.memoizedState=a):(Mn(a,r)||(a=Fi(),rt.lanes|=a,Yi|=a,n.baseState=!0),r)}function f0(n,r){var a=Le;Le=a!==0&&4>a?a:4,n(!0);var c=ih.transition;ih.transition={};try{n(!1),r()}finally{Le=a,ih.transition=c}}function Lp(){return Tn().memoizedState}function p0(n,r,a){var c=ii(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Mp(n))Fp(r,a);else if(a=pp(n,r,a,c),a!==null){var d=Qt();zn(a,n,c,d),jp(a,r,c)}}function m0(n,r,a){var c=ii(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Mp(n))Fp(r,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,S=p(_,a);if(d.hasEagerState=!0,d.eagerState=S,Mn(S,_)){var R=r.interleaved;R===null?(d.next=d,Jc(r)):(d.next=R.next,R.next=d),r.interleaved=d;return}}catch{}a=pp(n,r,d,c),a!==null&&(d=Qt(),zn(a,n,c,d),jp(a,r,c))}}function Mp(n){var r=n.alternate;return n===rt||r!==null&&r===rt}function Fp(n,r){ha=Kl=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function jp(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,$r(n,a)}}var Xl={readContext:En,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},g0={readContext:En,useCallback:function(n,r){return tr().memoizedState=[n,r===void 0?null:r],n},useContext:En,useEffect:Cp,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Ql(4194308,4,Np.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Ql(4194308,4,n,r)},useInsertionEffect:function(n,r){return Ql(4,2,n,r)},useMemo:function(n,r){var a=tr();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=tr();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=p0.bind(null,rt,n),[c.memoizedState,n]},useRef:function(n){var r=tr();return n={current:n},r.memoizedState=n},useState:xp,useDebugValue:hh,useDeferredValue:function(n){return tr().memoizedState=n},useTransition:function(){var n=xp(!1),r=n[0];return n=f0.bind(null,n[1]),tr().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=rt,d=tr();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),kt===null)throw Error(t(349));(Qi&30)!==0||Ep(c,r,a)}d.memoizedState=a;var p={value:a,getSnapshot:r};return d.queue=p,Cp(Ip.bind(null,c,p,n),[n]),c.flags|=2048,pa(9,Tp.bind(null,c,p,a,r),void 0,null),a},useId:function(){var n=tr(),r=kt.identifierPrefix;if(tt){var a=Sr,c=Ir;a=(c&~(1<<32-qt(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=da++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=d0++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},y0={readContext:En,useCallback:bp,useContext:En,useEffect:ch,useImperativeHandle:Dp,useInsertionEffect:Rp,useLayoutEffect:Pp,useMemo:Op,useReducer:lh,useRef:kp,useState:function(){return lh(fa)},useDebugValue:hh,useDeferredValue:function(n){var r=Tn();return Vp(r,Et.memoizedState,n)},useTransition:function(){var n=lh(fa)[0],r=Tn().memoizedState;return[n,r]},useMutableSource:_p,useSyncExternalStore:wp,useId:Lp,unstable_isNewReconciler:!1},v0={readContext:En,useCallback:bp,useContext:En,useEffect:ch,useImperativeHandle:Dp,useInsertionEffect:Rp,useLayoutEffect:Pp,useMemo:Op,useReducer:uh,useRef:kp,useState:function(){return uh(fa)},useDebugValue:hh,useDeferredValue:function(n){var r=Tn();return Et===null?r.memoizedState=n:Vp(r,Et.memoizedState,n)},useTransition:function(){var n=uh(fa)[0],r=Tn().memoizedState;return[n,r]},useMutableSource:_p,useSyncExternalStore:wp,useId:Lp,unstable_isNewReconciler:!1};function jn(n,r){if(n&&n.defaultProps){r=ie({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function dh(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:ie({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Jl={isMounted:function(n){return(n=n._reactInternals)?Pn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=Qt(),d=ii(n),p=xr(c,d);p.payload=r,a!=null&&(p.callback=a),r=ei(n,p,d),r!==null&&(zn(r,n,d,c),Hl(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=Qt(),d=ii(n),p=xr(c,d);p.tag=1,p.payload=r,a!=null&&(p.callback=a),r=ei(n,p,d),r!==null&&(zn(r,n,d,c),Hl(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Qt(),c=ii(n),d=xr(a,c);d.tag=2,r!=null&&(d.callback=r),r=ei(n,d,c),r!==null&&(zn(r,n,c,a),Hl(r,n,c))}};function Up(n,r,a,c,d,p,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,_):r.prototype&&r.prototype.isPureReactComponent?!ea(a,c)||!ea(d,p):!0}function Bp(n,r,a){var c=!1,d=Xr,p=r.contextType;return typeof p=="object"&&p!==null?p=En(p):(d=Zt(r)?Hi:Ft.current,c=r.contextTypes,p=(c=c!=null)?qs(n,d):Xr),r=new r(a,p),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Jl,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),r}function zp(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&Jl.enqueueReplaceState(r,r.state,null)}function fh(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Zc(n);var p=r.contextType;typeof p=="object"&&p!==null?d.context=En(p):(p=Zt(r)?Hi:Ft.current,d.context=qs(n,p)),d.state=n.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(dh(n,r,p,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Jl.enqueueReplaceState(d,d.state,null),Wl(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function eo(n,r){try{var a="",c=r;do a+=Re(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:r,stack:d,digest:null}}function ph(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function mh(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var _0=typeof WeakMap=="function"?WeakMap:Map;function $p(n,r,a){a=xr(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){su||(su=!0,Ph=c),mh(n,r)},a}function Hp(n,r,a){a=xr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){mh(n,r)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){mh(n,r),typeof c!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),a}function Wp(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new _0;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=b0.bind(null,n,r,a),r.then(n,n))}function qp(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Gp(n,r,a,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=xr(-1,1),r.tag=2,ei(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var w0=pe.ReactCurrentOwner,en=!1;function Kt(n,r,a,c){r.child=n===null?fp(r,null,a,c):Ys(r,n.child,a,c)}function Kp(n,r,a,c,d){a=a.render;var p=r.ref;return Js(r,d),c=oh(n,r,a,c,p,d),a=ah(),n!==null&&!en?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,kr(n,r,d)):(tt&&a&&$c(r),r.flags|=1,Kt(n,r,c,d),r.child)}function Qp(n,r,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!Mh(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=p,Yp(n,r,p,c,d)):(n=hu(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(p=n.child,(n.lanes&d)===0){var _=p.memoizedProps;if(a=a.compare,a=a!==null?a:ea,a(_,c)&&n.ref===r.ref)return kr(n,r,d)}return r.flags|=1,n=oi(p,c),n.ref=r.ref,n.return=r,r.child=n}function Yp(n,r,a,c,d){if(n!==null){var p=n.memoizedProps;if(ea(p,c)&&n.ref===r.ref)if(en=!1,r.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(en=!0);else return r.lanes=n.lanes,kr(n,r,d)}return gh(n,r,a,c,d)}function Xp(n,r,a){var c=r.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(no,fn),fn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Qe(no,fn),fn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Qe(no,fn),fn|=c}else p!==null?(c=p.baseLanes|a,r.memoizedState=null):c=a,Qe(no,fn),fn|=c;return Kt(n,r,d,a),r.child}function Jp(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function gh(n,r,a,c,d){var p=Zt(a)?Hi:Ft.current;return p=qs(r,p),Js(r,d),a=oh(n,r,a,c,p,d),c=ah(),n!==null&&!en?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,kr(n,r,d)):(tt&&c&&$c(r),r.flags|=1,Kt(n,r,a,d),r.child)}function Zp(n,r,a,c,d){if(Zt(a)){var p=!0;Ll(r)}else p=!1;if(Js(r,d),r.stateNode===null)eu(n,r),Bp(r,a,c),fh(r,a,c,d),c=!0;else if(n===null){var _=r.stateNode,S=r.memoizedProps;_.props=S;var R=_.context,j=a.contextType;typeof j=="object"&&j!==null?j=En(j):(j=Zt(a)?Hi:Ft.current,j=qs(r,j));var K=a.getDerivedStateFromProps,X=typeof K=="function"||typeof _.getSnapshotBeforeUpdate=="function";X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==c||R!==j)&&zp(r,_,c,j),Zr=!1;var G=r.memoizedState;_.state=G,Wl(r,c,_,d),R=r.memoizedState,S!==c||G!==R||Jt.current||Zr?(typeof K=="function"&&(dh(r,a,K,c),R=r.memoizedState),(S=Zr||Up(r,a,S,c,G,R,j))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=R),_.props=c,_.state=R,_.context=j,c=S):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,mp(n,r),S=r.memoizedProps,j=r.type===r.elementType?S:jn(r.type,S),_.props=j,X=r.pendingProps,G=_.context,R=a.contextType,typeof R=="object"&&R!==null?R=En(R):(R=Zt(a)?Hi:Ft.current,R=qs(r,R));var ae=a.getDerivedStateFromProps;(K=typeof ae=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==X||G!==R)&&zp(r,_,c,R),Zr=!1,G=r.memoizedState,_.state=G,Wl(r,c,_,d);var de=r.memoizedState;S!==X||G!==de||Jt.current||Zr?(typeof ae=="function"&&(dh(r,a,ae,c),de=r.memoizedState),(j=Zr||Up(r,a,j,c,G,de,R)||!1)?(K||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,de,R),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,de,R)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=de),_.props=c,_.state=de,_.context=R,c=j):(typeof _.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),c=!1)}return yh(n,r,a,c,p,d)}function yh(n,r,a,c,d,p){Jp(n,r);var _=(r.flags&128)!==0;if(!c&&!_)return d&&ip(r,a,!1),kr(n,r,p);c=r.stateNode,w0.current=r;var S=_&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&_?(r.child=Ys(r,n.child,null,p),r.child=Ys(r,null,S,p)):Kt(n,r,S,p),r.memoizedState=c.state,d&&ip(r,a,!0),r.child}function em(n){var r=n.stateNode;r.pendingContext?np(n,r.pendingContext,r.pendingContext!==r.context):r.context&&np(n,r.context,!1),eh(n,r.containerInfo)}function tm(n,r,a,c,d){return Qs(),Gc(d),r.flags|=256,Kt(n,r,a,c),r.child}var vh={dehydrated:null,treeContext:null,retryLane:0};function _h(n){return{baseLanes:n,cachePool:null,transitions:null}}function nm(n,r,a){var c=r.pendingProps,d=nt.current,p=!1,_=(r.flags&128)!==0,S;if((S=_)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(p=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Qe(nt,d&1),n===null)return qc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=c.children,n=c.fallback,p?(c=r.mode,p=r.child,_={mode:"hidden",children:_},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=du(_,c,0,null),n=es(n,c,a,null),p.return=r,n.return=r,p.sibling=n,r.child=p,r.child.memoizedState=_h(a),r.memoizedState=vh,n):wh(r,_));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return E0(n,r,_,c,S,d,a);if(p){p=c.fallback,_=r.mode,d=n.child,S=d.sibling;var R={mode:"hidden",children:c.children};return(_&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=R,r.deletions=null):(c=oi(d,R),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?p=oi(S,p):(p=es(p,_,a,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,_=n.child.memoizedState,_=_===null?_h(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=n.childLanes&~a,r.memoizedState=vh,c}return p=n.child,n=p.sibling,c=oi(p,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function wh(n,r){return r=du({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Zl(n,r,a,c){return c!==null&&Gc(c),Ys(r,n.child,null,a),n=wh(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function E0(n,r,a,c,d,p,_){if(a)return r.flags&256?(r.flags&=-257,c=ph(Error(t(422))),Zl(n,r,_,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(p=c.fallback,d=r.mode,c=du({mode:"visible",children:c.children},d,0,null),p=es(p,d,_,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,(r.mode&1)!==0&&Ys(r,n.child,null,_),r.child.memoizedState=_h(_),r.memoizedState=vh,p);if((r.mode&1)===0)return Zl(n,r,_,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,p=Error(t(419)),c=ph(p,c,void 0),Zl(n,r,_,c)}if(S=(_&n.childLanes)!==0,en||S){if(c=kt,c!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|_))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Ar(n,d),zn(c,n,d,-1))}return Lh(),c=ph(Error(t(421))),Zl(n,r,_,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=O0.bind(null,n),d._reactRetry=r,null):(n=p.treeContext,dn=Qr(d.nextSibling),hn=r,tt=!0,Fn=null,n!==null&&(_n[wn++]=Ir,_n[wn++]=Sr,_n[wn++]=Wi,Ir=n.id,Sr=n.overflow,Wi=r),r=wh(r,c.children),r.flags|=4096,r)}function rm(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Xc(n.return,r,a)}function Eh(n,r,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function im(n,r,a){var c=r.pendingProps,d=c.revealOrder,p=c.tail;if(Kt(n,r,c.children,a),c=nt.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&rm(n,a,r);else if(n.tag===19)rm(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Qe(nt,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&ql(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Eh(r,!1,d,a,p);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&ql(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Eh(r,!0,a,null,p);break;case"together":Eh(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function eu(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function kr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Yi|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=oi(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=oi(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function T0(n,r,a){switch(r.tag){case 3:em(r),Qs();break;case 5:vp(r);break;case 1:Zt(r.type)&&Ll(r);break;case 4:eh(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;Qe(zl,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Qe(nt,nt.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?nm(n,r,a):(Qe(nt,nt.current&1),n=kr(n,r,a),n!==null?n.sibling:null);Qe(nt,nt.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return im(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(nt,nt.current),c)break;return null;case 22:case 23:return r.lanes=0,Xp(n,r,a)}return kr(n,r,a)}var sm,Th,om,am;sm=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Th=function(){},om=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,Ki(er.current);var p=null;switch(a){case"input":d=qe(n,d),c=qe(n,c),p=[];break;case"select":d=ie({},d,{value:void 0}),c=ie({},c,{value:void 0}),p=[];break;case"textarea":d=Ro(n,d),c=Ro(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=bl)}Vo(a,c);var _;a=null;for(j in d)if(!c.hasOwnProperty(j)&&d.hasOwnProperty(j)&&d[j]!=null)if(j==="style"){var S=d[j];for(_ in S)S.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(o.hasOwnProperty(j)?p||(p=[]):(p=p||[]).push(j,null));for(j in c){var R=c[j];if(S=d?.[j],c.hasOwnProperty(j)&&R!==S&&(R!=null||S!=null))if(j==="style")if(S){for(_ in S)!S.hasOwnProperty(_)||R&&R.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in R)R.hasOwnProperty(_)&&S[_]!==R[_]&&(a||(a={}),a[_]=R[_])}else a||(p||(p=[]),p.push(j,a)),a=R;else j==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,S=S?S.__html:void 0,R!=null&&S!==R&&(p=p||[]).push(j,R)):j==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(j,""+R):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(o.hasOwnProperty(j)?(R!=null&&j==="onScroll"&&Xe("scroll",n),p||S===R||(p=[])):(p=p||[]).push(j,R))}a&&(p=p||[]).push("style",a);var j=p;(r.updateQueue=j)&&(r.flags|=4)}},am=function(n,r,a,c){a!==c&&(r.flags|=4)};function ma(n,r){if(!tt)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ut(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function I0(n,r,a){var c=r.pendingProps;switch(Hc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(r),null;case 1:return Zt(r.type)&&Vl(),Ut(r),null;case 3:return c=r.stateNode,Zs(),Je(Jt),Je(Ft),rh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Ul(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Fn!==null&&(bh(Fn),Fn=null))),Th(n,r),Ut(r),null;case 5:th(r);var d=Ki(ca.current);if(a=r.type,n!==null&&r.stateNode!=null)om(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Ut(r),null}if(n=Ki(er.current),Ul(r)){c=r.stateNode,a=r.type;var p=r.memoizedProps;switch(c[Zn]=r,c[sa]=p,n=(r.mode&1)!==0,a){case"dialog":Xe("cancel",c),Xe("close",c);break;case"iframe":case"object":case"embed":Xe("load",c);break;case"video":case"audio":for(d=0;d<na.length;d++)Xe(na[d],c);break;case"source":Xe("error",c);break;case"img":case"image":case"link":Xe("error",c),Xe("load",c);break;case"details":Xe("toggle",c);break;case"input":ut(c,p),Xe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Xe("invalid",c);break;case"textarea":gs(c,p),Xe("invalid",c)}Vo(a,p),d=null;for(var _ in p)if(p.hasOwnProperty(_)){var S=p[_];_==="children"?typeof S=="string"?c.textContent!==S&&(p.suppressHydrationWarning!==!0&&Dl(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&Dl(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(_)&&S!=null&&_==="onScroll"&&Xe("scroll",c)}switch(a){case"input":J(c),il(c,p,!0);break;case"textarea":J(c),Po(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=bl)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=vt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=_.createElement(a,{is:c.is}):(n=_.createElement(a),a==="select"&&(_=n,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):n=_.createElementNS(n,a),n[Zn]=r,n[sa]=c,sm(n,r,!1,!1),r.stateNode=n;e:{switch(_=Lo(a,c),a){case"dialog":Xe("cancel",n),Xe("close",n),d=c;break;case"iframe":case"object":case"embed":Xe("load",n),d=c;break;case"video":case"audio":for(d=0;d<na.length;d++)Xe(na[d],n);d=c;break;case"source":Xe("error",n),d=c;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),d=c;break;case"details":Xe("toggle",n),d=c;break;case"input":ut(n,c),d=qe(n,c),Xe("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ie({},c,{value:void 0}),Xe("invalid",n);break;case"textarea":gs(n,c),d=Ro(n,c),Xe("invalid",n);break;default:d=c}Vo(a,d),S=d;for(p in S)if(S.hasOwnProperty(p)){var R=S[p];p==="style"?bo(n,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&No(n,R)):p==="children"?typeof R=="string"?(a!=="textarea"||R!=="")&&Fr(n,R):typeof R=="number"&&Fr(n,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?R!=null&&p==="onScroll"&&Xe("scroll",n):R!=null&&se(n,p,R,_))}switch(a){case"input":J(n),il(n,c,!1);break;case"textarea":J(n),Po(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ue(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?fr(n,!!c.multiple,p,!1):c.defaultValue!=null&&fr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=bl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ut(r),null;case 6:if(n&&r.stateNode!=null)am(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=Ki(ca.current),Ki(er.current),Ul(r)){if(c=r.stateNode,a=r.memoizedProps,c[Zn]=r,(p=c.nodeValue!==a)&&(n=hn,n!==null))switch(n.tag){case 3:Dl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Dl(c.nodeValue,a,(n.mode&1)!==0)}p&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Zn]=r,r.stateNode=c}return Ut(r),null;case 13:if(Je(nt),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&dn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)cp(),Qs(),r.flags|=98560,p=!1;else if(p=Ul(r),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[Zn]=r}else Qs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ut(r),p=!1}else Fn!==null&&(bh(Fn),Fn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(nt.current&1)!==0?Tt===0&&(Tt=3):Lh())),r.updateQueue!==null&&(r.flags|=4),Ut(r),null);case 4:return Zs(),Th(n,r),n===null&&ra(r.stateNode.containerInfo),Ut(r),null;case 10:return Yc(r.type._context),Ut(r),null;case 17:return Zt(r.type)&&Vl(),Ut(r),null;case 19:if(Je(nt),p=r.memoizedState,p===null)return Ut(r),null;if(c=(r.flags&128)!==0,_=p.rendering,_===null)if(c)ma(p,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(_=ql(n),_!==null){for(r.flags|=128,ma(p,!1),c=_.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)p=a,n=c,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,n=_.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Qe(nt,nt.current&1|2),r.child}n=n.sibling}p.tail!==null&&Ke()>ro&&(r.flags|=128,c=!0,ma(p,!1),r.lanes=4194304)}else{if(!c)if(n=ql(_),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),ma(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!tt)return Ut(r),null}else 2*Ke()-p.renderingStartTime>ro&&a!==1073741824&&(r.flags|=128,c=!0,ma(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(a=p.last,a!==null?a.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Ke(),r.sibling=null,a=nt.current,Qe(nt,c?a&1|2:a&1),r):(Ut(r),null);case 22:case 23:return Vh(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(fn&1073741824)!==0&&(Ut(r),r.subtreeFlags&6&&(r.flags|=8192)):Ut(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function S0(n,r){switch(Hc(r),r.tag){case 1:return Zt(r.type)&&Vl(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Zs(),Je(Jt),Je(Ft),rh(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return th(r),null;case 13:if(Je(nt),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Qs()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Je(nt),null;case 4:return Zs(),null;case 10:return Yc(r.type._context),null;case 22:case 23:return Vh(),null;case 24:return null;default:return null}}var tu=!1,Bt=!1,A0=typeof WeakSet=="function"?WeakSet:Set,he=null;function to(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){lt(n,r,c)}else a.current=null}function Ih(n,r,a){try{a()}catch(c){lt(n,r,c)}}var lm=!1;function x0(n,r){if(Vc=qr,n=Uf(),kc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var _=0,S=-1,R=-1,j=0,K=0,X=n,G=null;t:for(;;){for(var ae;X!==a||d!==0&&X.nodeType!==3||(S=_+d),X!==p||c!==0&&X.nodeType!==3||(R=_+c),X.nodeType===3&&(_+=X.nodeValue.length),(ae=X.firstChild)!==null;)G=X,X=ae;for(;;){if(X===n)break t;if(G===a&&++j===d&&(S=_),G===p&&++K===c&&(R=_),(ae=X.nextSibling)!==null)break;X=G,G=X.parentNode}X=ae}a=S===-1||R===-1?null:{start:S,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lc={focusedElem:n,selectionRange:a},qr=!1,he=r;he!==null;)if(r=he,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,he=n;else for(;he!==null;){r=he;try{var de=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,ht=de.memoizedState,M=r.stateNode,D=M.getSnapshotBeforeUpdate(r.elementType===r.type?fe:jn(r.type,fe),ht);M.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){lt(r,r.return,Z)}if(n=r.sibling,n!==null){n.return=r.return,he=n;break}he=r.return}return de=lm,lm=!1,de}function ga(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&Ih(r,a,p)}d=d.next}while(d!==c)}}function nu(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function Sh(n){var r=n.ref;if(r!==null){var a=n.stateNode;n.tag,n=a,typeof r=="function"?r(n):r.current=n}}function um(n){var r=n.alternate;r!==null&&(n.alternate=null,um(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Zn],delete r[sa],delete r[Uc],delete r[l0],delete r[u0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function cm(n){return n.tag===5||n.tag===3||n.tag===4}function hm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||cm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ah(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=bl));else if(c!==4&&(n=n.child,n!==null))for(Ah(n,r,a),n=n.sibling;n!==null;)Ah(n,r,a),n=n.sibling}function xh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(xh(n,r,a),n=n.sibling;n!==null;)xh(n,r,a),n=n.sibling}var bt=null,Un=!1;function ti(n,r,a){for(a=a.child;a!==null;)dm(n,r,a),a=a.sibling}function dm(n,r,a){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Li,a)}catch{}switch(a.tag){case 5:Bt||to(a,r);case 6:var c=bt,d=Un;bt=null,ti(n,r,a),bt=c,Un=d,bt!==null&&(Un?(n=bt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):bt.removeChild(a.stateNode));break;case 18:bt!==null&&(Un?(n=bt,a=a.stateNode,n.nodeType===8?jc(n.parentNode,a):n.nodeType===1&&jc(n,a),Vn(n)):jc(bt,a.stateNode));break;case 4:c=bt,d=Un,bt=a.stateNode.containerInfo,Un=!0,ti(n,r,a),bt=c,Un=d;break;case 0:case 11:case 14:case 15:if(!Bt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&Ih(a,r,_),d=d.next}while(d!==c)}ti(n,r,a);break;case 1:if(!Bt&&(to(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){lt(a,r,S)}ti(n,r,a);break;case 21:ti(n,r,a);break;case 22:a.mode&1?(Bt=(c=Bt)||a.memoizedState!==null,ti(n,r,a),Bt=c):ti(n,r,a);break;default:ti(n,r,a)}}function fm(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new A0),r.forEach(function(c){var d=V0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Bn(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,_=r,S=_;e:for(;S!==null;){switch(S.tag){case 5:bt=S.stateNode,Un=!1;break e;case 3:bt=S.stateNode.containerInfo,Un=!0;break e;case 4:bt=S.stateNode.containerInfo,Un=!0;break e}S=S.return}if(bt===null)throw Error(t(160));dm(p,_,d),bt=null,Un=!1;var R=d.alternate;R!==null&&(R.return=null),d.return=null}catch(j){lt(d,r,j)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)pm(r,n),r=r.sibling}function pm(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Bn(r,n),nr(n),c&4){try{ga(3,n,n.return),nu(3,n)}catch(fe){lt(n,n.return,fe)}try{ga(5,n,n.return)}catch(fe){lt(n,n.return,fe)}}break;case 1:Bn(r,n),nr(n),c&512&&a!==null&&to(a,a.return);break;case 5:if(Bn(r,n),nr(n),c&512&&a!==null&&to(a,a.return),n.flags&32){var d=n.stateNode;try{Fr(d,"")}catch(fe){lt(n,n.return,fe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,_=a!==null?a.memoizedProps:p,S=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&on(d,p),Lo(S,_);var j=Lo(S,p);for(_=0;_<R.length;_+=2){var K=R[_],X=R[_+1];K==="style"?bo(d,X):K==="dangerouslySetInnerHTML"?No(d,X):K==="children"?Fr(d,X):se(d,K,X,j)}switch(S){case"input":Co(d,p);break;case"textarea":ys(d,p);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ae=p.value;ae!=null?fr(d,!!p.multiple,ae,!1):G!==!!p.multiple&&(p.defaultValue!=null?fr(d,!!p.multiple,p.defaultValue,!0):fr(d,!!p.multiple,p.multiple?[]:"",!1))}d[sa]=p}catch(fe){lt(n,n.return,fe)}}break;case 6:if(Bn(r,n),nr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(fe){lt(n,n.return,fe)}}break;case 3:if(Bn(r,n),nr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Vn(r.containerInfo)}catch(fe){lt(n,n.return,fe)}break;case 4:Bn(r,n),nr(n);break;case 13:Bn(r,n),nr(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Rh=Ke())),c&4&&fm(n);break;case 22:if(K=a!==null&&a.memoizedState!==null,n.mode&1?(Bt=(j=Bt)||K,Bn(r,n),Bt=j):Bn(r,n),nr(n),c&8192){if(j=n.memoizedState!==null,(n.stateNode.isHidden=j)&&!K&&(n.mode&1)!==0)for(he=n,K=n.child;K!==null;){for(X=he=K;he!==null;){switch(G=he,ae=G.child,G.tag){case 0:case 11:case 14:case 15:ga(4,G,G.return);break;case 1:to(G,G.return);var de=G.stateNode;if(typeof de.componentWillUnmount=="function"){c=G,a=G.return;try{r=c,de.props=r.memoizedProps,de.state=r.memoizedState,de.componentWillUnmount()}catch(fe){lt(c,a,fe)}}break;case 5:to(G,G.return);break;case 22:if(G.memoizedState!==null){ym(X);continue}}ae!==null?(ae.return=G,he=ae):ym(X)}K=K.sibling}e:for(K=null,X=n;;){if(X.tag===5){if(K===null){K=X;try{d=X.stateNode,j?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=X.stateNode,R=X.memoizedProps.style,_=R!=null&&R.hasOwnProperty("display")?R.display:null,S.style.display=Do("display",_))}catch(fe){lt(n,n.return,fe)}}}else if(X.tag===6){if(K===null)try{X.stateNode.nodeValue=j?"":X.memoizedProps}catch(fe){lt(n,n.return,fe)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break e;for(;X.sibling===null;){if(X.return===null||X.return===n)break e;K===X&&(K=null),X=X.return}K===X&&(K=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Bn(r,n),nr(n),c&4&&fm(n);break;case 21:break;default:Bn(r,n),nr(n)}}function nr(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(cm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Fr(d,""),c.flags&=-33);var p=hm(n);xh(n,p,d);break;case 3:case 4:var _=c.stateNode.containerInfo,S=hm(n);Ah(n,S,_);break;default:throw Error(t(161))}}catch(R){lt(n,n.return,R)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function k0(n,r,a){he=n,mm(n)}function mm(n,r,a){for(var c=(n.mode&1)!==0;he!==null;){var d=he,p=d.child;if(d.tag===22&&c){var _=d.memoizedState!==null||tu;if(!_){var S=d.alternate,R=S!==null&&S.memoizedState!==null||Bt;S=tu;var j=Bt;if(tu=_,(Bt=R)&&!j)for(he=d;he!==null;)_=he,R=_.child,_.tag===22&&_.memoizedState!==null?vm(d):R!==null?(R.return=_,he=R):vm(d);for(;p!==null;)he=p,mm(p),p=p.sibling;he=d,tu=S,Bt=j}gm(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,he=p):gm(n)}}function gm(n){for(;he!==null;){var r=he;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Bt||nu(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Bt)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:jn(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&yp(r,p,c);break;case 3:var _=r.updateQueue;if(_!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}yp(r,_,a)}break;case 5:var S=r.stateNode;if(a===null&&r.flags&4){a=S;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&a.focus();break;case"img":R.src&&(a.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var j=r.alternate;if(j!==null){var K=j.memoizedState;if(K!==null){var X=K.dehydrated;X!==null&&Vn(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bt||r.flags&512&&Sh(r)}catch(G){lt(r,r.return,G)}}if(r===n){he=null;break}if(a=r.sibling,a!==null){a.return=r.return,he=a;break}he=r.return}}function ym(n){for(;he!==null;){var r=he;if(r===n){he=null;break}var a=r.sibling;if(a!==null){a.return=r.return,he=a;break}he=r.return}}function vm(n){for(;he!==null;){var r=he;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{nu(4,r)}catch(R){lt(r,a,R)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(R){lt(r,d,R)}}var p=r.return;try{Sh(r)}catch(R){lt(r,p,R)}break;case 5:var _=r.return;try{Sh(r)}catch(R){lt(r,_,R)}}}catch(R){lt(r,r.return,R)}if(r===n){he=null;break}var S=r.sibling;if(S!==null){S.return=r.return,he=S;break}he=r.return}}var C0=Math.ceil,ru=pe.ReactCurrentDispatcher,kh=pe.ReactCurrentOwner,In=pe.ReactCurrentBatchConfig,Be=0,kt=null,mt=null,Ot=0,fn=0,no=Yr(0),Tt=0,ya=null,Yi=0,iu=0,Ch=0,va=null,tn=null,Rh=0,ro=1/0,Cr=null,su=!1,Ph=null,ni=null,ou=!1,ri=null,au=0,_a=0,Nh=null,lu=-1,uu=0;function Qt(){return(Be&6)!==0?Ke():lu!==-1?lu:lu=Ke()}function ii(n){return(n.mode&1)===0?1:(Be&2)!==0&&Ot!==0?Ot&-Ot:h0.transition!==null?(uu===0&&(uu=Fi()),uu):(n=Le,n!==0||(n=window.event,n=n===void 0?16:Go(n.type)),n)}function zn(n,r,a,c){if(50<_a)throw _a=0,Nh=null,Error(t(185));zr(n,a,c),((Be&2)===0||n!==kt)&&(n===kt&&((Be&2)===0&&(iu|=a),Tt===4&&si(n,Ot)),nn(n,c),a===1&&Be===0&&(r.mode&1)===0&&(ro=Ke()+500,Ml&&Jr()))}function nn(n,r){var a=n.callbackNode;gr(n,r);var c=Mi(n,n===kt?Ot:0);if(c===0)a!==null&&zo(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&zo(a),r===1)n.tag===0?c0(wm.bind(null,n)):sp(wm.bind(null,n)),o0(function(){(Be&6)===0&&Jr()}),a=null;else{switch(Hr(c)){case 1:a=Vi;break;case 4:a=jr;break;case 16:a=gn;break;case 536870912:a=ul;break;default:a=gn}a=Cm(a,_m.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function _m(n,r){if(lu=-1,uu=0,(Be&6)!==0)throw Error(t(327));var a=n.callbackNode;if(io()&&n.callbackNode!==a)return null;var c=Mi(n,n===kt?Ot:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=cu(n,c);else{r=c;var d=Be;Be|=2;var p=Tm();(kt!==n||Ot!==r)&&(Cr=null,ro=Ke()+500,Ji(n,r));do try{N0();break}catch(S){Em(n,S)}while(!0);Qc(),ru.current=p,Be=d,mt!==null?r=0:(kt=null,Ot=0,r=Tt)}if(r!==0){if(r===2&&(d=ln(n),d!==0&&(c=d,r=Dh(n,d))),r===1)throw a=ya,Ji(n,0),si(n,c),nn(n,Ke()),a;if(r===6)si(n,c);else{if(d=n.current.alternate,(c&30)===0&&!R0(d)&&(r=cu(n,c),r===2&&(p=ln(n),p!==0&&(c=p,r=Dh(n,p))),r===1))throw a=ya,Ji(n,0),si(n,c),nn(n,Ke()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:Zi(n,tn,Cr);break;case 3:if(si(n,c),(c&130023424)===c&&(r=Rh+500-Ke(),10<r)){if(Mi(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Qt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Fc(Zi.bind(null,n,tn,Cr),r);break}Zi(n,tn,Cr);break;case 4:if(si(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var _=31-qt(c);p=1<<_,_=r[_],_>d&&(d=_),c&=~p}if(c=d,c=Ke()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*C0(c/1960))-c,10<c){n.timeoutHandle=Fc(Zi.bind(null,n,tn,Cr),c);break}Zi(n,tn,Cr);break;case 5:Zi(n,tn,Cr);break;default:throw Error(t(329))}}}return nn(n,Ke()),n.callbackNode===a?_m.bind(null,n):null}function Dh(n,r){var a=va;return n.current.memoizedState.isDehydrated&&(Ji(n,r).flags|=256),n=cu(n,r),n!==2&&(r=tn,tn=a,r!==null&&bh(r)),n}function bh(n){tn===null?tn=n:tn.push.apply(tn,n)}function R0(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Mn(p(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function si(n,r){for(r&=~Ch,r&=~iu,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-qt(r),c=1<<a;n[a]=-1,r&=~c}}function wm(n){if((Be&6)!==0)throw Error(t(327));io();var r=Mi(n,0);if((r&1)===0)return nn(n,Ke()),null;var a=cu(n,r);if(n.tag!==0&&a===2){var c=ln(n);c!==0&&(r=c,a=Dh(n,c))}if(a===1)throw a=ya,Ji(n,0),si(n,r),nn(n,Ke()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Zi(n,tn,Cr),nn(n,Ke()),null}function Oh(n,r){var a=Be;Be|=1;try{return n(r)}finally{Be=a,Be===0&&(ro=Ke()+500,Ml&&Jr())}}function Xi(n){ri!==null&&ri.tag===0&&(Be&6)===0&&io();var r=Be;Be|=1;var a=In.transition,c=Le;try{if(In.transition=null,Le=1,n)return n()}finally{Le=c,In.transition=a,Be=r,(Be&6)===0&&Jr()}}function Vh(){fn=no.current,Je(no)}function Ji(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,s0(a)),mt!==null)for(a=mt.return;a!==null;){var c=a;switch(Hc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Vl();break;case 3:Zs(),Je(Jt),Je(Ft),rh();break;case 5:th(c);break;case 4:Zs();break;case 13:Je(nt);break;case 19:Je(nt);break;case 10:Yc(c.type._context);break;case 22:case 23:Vh()}a=a.return}if(kt=n,mt=n=oi(n.current,null),Ot=fn=r,Tt=0,ya=null,Ch=iu=Yi=0,tn=va=null,Gi!==null){for(r=0;r<Gi.length;r++)if(a=Gi[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var _=p.next;p.next=d,c.next=_}a.pending=c}Gi=null}return n}function Em(n,r){do{var a=mt;try{if(Qc(),Gl.current=Xl,Kl){for(var c=rt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Kl=!1}if(Qi=0,xt=Et=rt=null,ha=!1,da=0,kh.current=null,a===null||a.return===null){Tt=1,ya=r,mt=null;break}e:{var p=n,_=a.return,S=a,R=r;if(r=Ot,S.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var j=R,K=S,X=K.tag;if((K.mode&1)===0&&(X===0||X===11||X===15)){var G=K.alternate;G?(K.updateQueue=G.updateQueue,K.memoizedState=G.memoizedState,K.lanes=G.lanes):(K.updateQueue=null,K.memoizedState=null)}var ae=qp(_);if(ae!==null){ae.flags&=-257,Gp(ae,_,S,p,r),ae.mode&1&&Wp(p,j,r),r=ae,R=j;var de=r.updateQueue;if(de===null){var fe=new Set;fe.add(R),r.updateQueue=fe}else de.add(R);break e}else{if((r&1)===0){Wp(p,j,r),Lh();break e}R=Error(t(426))}}else if(tt&&S.mode&1){var ht=qp(_);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),Gp(ht,_,S,p,r),Gc(eo(R,S));break e}}p=R=eo(R,S),Tt!==4&&(Tt=2),va===null?va=[p]:va.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var M=$p(p,R,r);gp(p,M);break e;case 1:S=R;var D=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(ni===null||!ni.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var Z=Hp(p,S,r);gp(p,Z);break e}}p=p.return}while(p!==null)}Sm(a)}catch(me){r=me,mt===a&&a!==null&&(mt=a=a.return);continue}break}while(!0)}function Tm(){var n=ru.current;return ru.current=Xl,n===null?Xl:n}function Lh(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),kt===null||(Yi&268435455)===0&&(iu&268435455)===0||si(kt,Ot)}function cu(n,r){var a=Be;Be|=2;var c=Tm();(kt!==n||Ot!==r)&&(Cr=null,Ji(n,r));do try{P0();break}catch(d){Em(n,d)}while(!0);if(Qc(),Be=a,ru.current=c,mt!==null)throw Error(t(261));return kt=null,Ot=0,Tt}function P0(){for(;mt!==null;)Im(mt)}function N0(){for(;mt!==null&&!al();)Im(mt)}function Im(n){var r=km(n.alternate,n,fn);n.memoizedProps=n.pendingProps,r===null?Sm(n):mt=r,kh.current=null}function Sm(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=I0(a,r,fn),a!==null){mt=a;return}}else{if(a=S0(a,r),a!==null){a.flags&=32767,mt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Tt=6,mt=null;return}}if(r=r.sibling,r!==null){mt=r;return}mt=r=n}while(r!==null);Tt===0&&(Tt=5)}function Zi(n,r,a){var c=Le,d=In.transition;try{In.transition=null,Le=1,D0(n,r,a,c)}finally{In.transition=d,Le=c}return null}function D0(n,r,a,c){do io();while(ri!==null);if((Be&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Ge(n,p),n===kt&&(mt=kt=null,Ot=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ou||(ou=!0,Cm(gn,function(){return io(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=In.transition,In.transition=null;var _=Le;Le=1;var S=Be;Be|=4,kh.current=null,x0(n,a),pm(a,n),J_(Lc),qr=!!Vc,Lc=Vc=null,n.current=a,k0(a),_c(),Be=S,Le=_,In.transition=p}else n.current=a;if(ou&&(ou=!1,ri=n,au=d),p=n.pendingLanes,p===0&&(ni=null),cl(a.stateNode),nn(n,Ke()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(su)throw su=!1,n=Ph,Ph=null,n;return(au&1)!==0&&n.tag!==0&&io(),p=n.pendingLanes,(p&1)!==0?n===Nh?_a++:(_a=0,Nh=n):_a=0,Jr(),null}function io(){if(ri!==null){var n=Hr(au),r=In.transition,a=Le;try{if(In.transition=null,Le=16>n?16:n,ri===null)var c=!1;else{if(n=ri,ri=null,au=0,(Be&6)!==0)throw Error(t(331));var d=Be;for(Be|=4,he=n.current;he!==null;){var p=he,_=p.child;if((he.flags&16)!==0){var S=p.deletions;if(S!==null){for(var R=0;R<S.length;R++){var j=S[R];for(he=j;he!==null;){var K=he;switch(K.tag){case 0:case 11:case 15:ga(8,K,p)}var X=K.child;if(X!==null)X.return=K,he=X;else for(;he!==null;){K=he;var G=K.sibling,ae=K.return;if(um(K),K===j){he=null;break}if(G!==null){G.return=ae,he=G;break}he=ae}}}var de=p.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var ht=fe.sibling;fe.sibling=null,fe=ht}while(fe!==null)}}he=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,he=_;else e:for(;he!==null;){if(p=he,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:ga(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,he=M;break e}he=p.return}}var D=n.current;for(he=D;he!==null;){_=he;var F=_.child;if((_.subtreeFlags&2064)!==0&&F!==null)F.return=_,he=F;else e:for(_=D;he!==null;){if(S=he,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:nu(9,S)}}catch(me){lt(S,S.return,me)}if(S===_){he=null;break e}var Z=S.sibling;if(Z!==null){Z.return=S.return,he=Z;break e}he=S.return}}if(Be=d,Jr(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Li,n)}catch{}c=!0}return c}finally{Le=a,In.transition=r}}return!1}function Am(n,r,a){r=eo(a,r),r=$p(n,r,1),n=ei(n,r,1),r=Qt(),n!==null&&(zr(n,1,r),nn(n,r))}function lt(n,r,a){if(n.tag===3)Am(n,n,a);else for(;r!==null;){if(r.tag===3){Am(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ni===null||!ni.has(c))){n=eo(a,n),n=Hp(r,n,1),r=ei(r,n,1),n=Qt(),r!==null&&(zr(r,1,n),nn(r,n));break}}r=r.return}}function b0(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=Qt(),n.pingedLanes|=n.suspendedLanes&a,kt===n&&(Ot&a)===a&&(Tt===4||Tt===3&&(Ot&130023424)===Ot&&500>Ke()-Rh?Ji(n,0):Ch|=a),nn(n,r)}function xm(n,r){r===0&&((n.mode&1)===0?r=1:(r=ks,ks<<=1,(ks&130023424)===0&&(ks=4194304)));var a=Qt();n=Ar(n,r),n!==null&&(zr(n,r,a),nn(n,a))}function O0(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),xm(n,a)}function V0(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),xm(n,a)}var km;km=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Jt.current)en=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return en=!1,T0(n,r,a);en=(n.flags&131072)!==0}else en=!1,tt&&(r.flags&1048576)!==0&&op(r,jl,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;eu(n,r),n=r.pendingProps;var d=qs(r,Ft.current);Js(r,a),d=oh(null,r,c,n,d,a);var p=ah();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Zt(c)?(p=!0,Ll(r)):p=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Zc(r),d.updater=Jl,r.stateNode=d,d._reactInternals=r,fh(r,c,n,a),r=yh(null,r,c,!0,p,a)):(r.tag=0,tt&&p&&$c(r),Kt(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(eu(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=M0(c),n=jn(c,n),d){case 0:r=gh(null,r,c,n,a);break e;case 1:r=Zp(null,r,c,n,a);break e;case 11:r=Kp(null,r,c,n,a);break e;case 14:r=Qp(null,r,c,jn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:jn(c,d),gh(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:jn(c,d),Zp(n,r,c,d,a);case 3:e:{if(em(r),n===null)throw Error(t(387));c=r.pendingProps,p=r.memoizedState,d=p.element,mp(n,r),Wl(r,c,null,a);var _=r.memoizedState;if(c=_.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){d=eo(Error(t(423)),r),r=tm(n,r,c,a,d);break e}else if(c!==d){d=eo(Error(t(424)),r),r=tm(n,r,c,a,d);break e}else for(dn=Qr(r.stateNode.containerInfo.firstChild),hn=r,tt=!0,Fn=null,a=fp(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Qs(),c===d){r=kr(n,r,a);break e}Kt(n,r,c,a)}r=r.child}return r;case 5:return vp(r),n===null&&qc(r),c=r.type,d=r.pendingProps,p=n!==null?n.memoizedProps:null,_=d.children,Mc(c,d)?_=null:p!==null&&Mc(c,p)&&(r.flags|=32),Jp(n,r),Kt(n,r,_,a),r.child;case 6:return n===null&&qc(r),null;case 13:return nm(n,r,a);case 4:return eh(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Ys(r,null,c,a):Kt(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:jn(c,d),Kp(n,r,c,d,a);case 7:return Kt(n,r,r.pendingProps,a),r.child;case 8:return Kt(n,r,r.pendingProps.children,a),r.child;case 12:return Kt(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,p=r.memoizedProps,_=d.value,Qe(zl,c._currentValue),c._currentValue=_,p!==null)if(Mn(p.value,_)){if(p.children===d.children&&!Jt.current){r=kr(n,r,a);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var S=p.dependencies;if(S!==null){_=p.child;for(var R=S.firstContext;R!==null;){if(R.context===c){if(p.tag===1){R=xr(-1,a&-a),R.tag=2;var j=p.updateQueue;if(j!==null){j=j.shared;var K=j.pending;K===null?R.next=R:(R.next=K.next,K.next=R),j.pending=R}}p.lanes|=a,R=p.alternate,R!==null&&(R.lanes|=a),Xc(p.return,a,r),S.lanes|=a;break}R=R.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(t(341));_.lanes|=a,S=_.alternate,S!==null&&(S.lanes|=a),Xc(_,a,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}Kt(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,Js(r,a),d=En(d),c=c(d),r.flags|=1,Kt(n,r,c,a),r.child;case 14:return c=r.type,d=jn(c,r.pendingProps),d=jn(c.type,d),Qp(n,r,c,d,a);case 15:return Yp(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:jn(c,d),eu(n,r),r.tag=1,Zt(c)?(n=!0,Ll(r)):n=!1,Js(r,a),Bp(r,c,d),fh(r,c,d,a),yh(null,r,c,!0,n,a);case 19:return im(n,r,a);case 22:return Xp(n,r,a)}throw Error(t(156,r.tag))};function Cm(n,r){return As(n,r)}function L0(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(n,r,a,c){return new L0(n,r,a,c)}function Mh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function M0(n){if(typeof n=="function")return Mh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===ot)return 14}return 2}function oi(n,r){var a=n.alternate;return a===null?(a=Sn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function hu(n,r,a,c,d,p){var _=2;if(c=n,typeof n=="function")Mh(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case P:return es(a.children,d,p,r);case I:_=8,d|=8;break;case C:return n=Sn(12,a,r,d|2),n.elementType=C,n.lanes=p,n;case k:return n=Sn(13,a,r,d),n.elementType=k,n.lanes=p,n;case Ye:return n=Sn(19,a,r,d),n.elementType=Ye,n.lanes=p,n;case ee:return du(a,d,p,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:_=10;break e;case b:_=9;break e;case V:_=11;break e;case ot:_=14;break e;case at:_=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=Sn(_,a,r,d),r.elementType=n,r.type=c,r.lanes=p,r}function es(n,r,a,c){return n=Sn(7,n,c,r),n.lanes=a,n}function du(n,r,a,c){return n=Sn(22,n,c,r),n.elementType=ee,n.lanes=a,n.stateNode={isHidden:!1},n}function Fh(n,r,a){return n=Sn(6,n,null,r),n.lanes=a,n}function jh(n,r,a){return r=Sn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function F0(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Br(0),this.expirationTimes=Br(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Br(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Uh(n,r,a,c,d,p,_,S,R){return n=new F0(n,r,a,S,R),r===1?(r=1,p===!0&&(r|=8)):r=0,p=Sn(3,null,null,r),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zc(p),n}function j0(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ie,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function Rm(n){if(!n)return Xr;n=n._reactInternals;e:{if(Pn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Zt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Zt(a))return rp(n,a,r)}return r}function Pm(n,r,a,c,d,p,_,S,R){return n=Uh(a,c,!0,n,d,p,_,S,R),n.context=Rm(null),a=n.current,c=Qt(),d=ii(a),p=xr(c,d),p.callback=r??null,ei(a,p,d),n.current.lanes=d,zr(n,d,c),nn(n,c),n}function fu(n,r,a,c){var d=r.current,p=Qt(),_=ii(d);return a=Rm(a),r.context===null?r.context=a:r.pendingContext=a,r=xr(p,_),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=ei(d,r,_),n!==null&&(zn(n,d,_,p),Hl(n,d,_)),_}function pu(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function Nm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Bh(n,r){Nm(n,r),(n=n.alternate)&&Nm(n,r)}function U0(){return null}var Dm=typeof reportError=="function"?reportError:function(n){console.error(n)};function zh(n){this._internalRoot=n}mu.prototype.render=zh.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));fu(n,r,null,null)},mu.prototype.unmount=zh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Xi(function(){fu(null,n,null,null)}),r[Er]=null}};function mu(n){this._internalRoot=n}mu.prototype.unstable_scheduleHydration=function(n){if(n){var r=ml();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Qn.length&&r!==0&&r<Qn[a].priority;a++);Qn.splice(a,0,n),a===0&&vl(n)}};function $h(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function bm(){}function B0(n,r,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var j=pu(_);p.call(j)}}var _=Pm(r,c,n,0,null,!1,!1,"",bm);return n._reactRootContainer=_,n[Er]=_.current,ra(n.nodeType===8?n.parentNode:n),Xi(),_}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var j=pu(R);S.call(j)}}var R=Uh(n,0,!1,null,null,!1,!1,"",bm);return n._reactRootContainer=R,n[Er]=R.current,ra(n.nodeType===8?n.parentNode:n),Xi(function(){fu(r,R,a,c)}),R}function yu(n,r,a,c,d){var p=a._reactRootContainer;if(p){var _=p;if(typeof d=="function"){var S=d;d=function(){var R=pu(_);S.call(R)}}fu(r,_,n,d)}else _=B0(a,r,n,d,c);return pu(_)}fl=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=Ur(r.pendingLanes);a!==0&&($r(r,a|1),nn(r,Ke()),(Be&6)===0&&(ro=Ke()+500,Jr()))}break;case 13:Xi(function(){var c=Ar(n,1);if(c!==null){var d=Qt();zn(c,n,1,d)}}),Bh(n,1)}},Cs=function(n){if(n.tag===13){var r=Ar(n,134217728);if(r!==null){var a=Qt();zn(r,n,134217728,a)}Bh(n,134217728)}},pl=function(n){if(n.tag===13){var r=ii(n),a=Ar(n,r);if(a!==null){var c=Qt();zn(a,n,r,c)}Bh(n,r)}},ml=function(){return Le},gl=function(n,r){var a=Le;try{return Le=n,r()}finally{Le=a}},_s=function(n,r,a){switch(r){case"input":if(Co(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=Ol(c);if(!d)throw Error(t(90));ne(c),Co(c,d)}}}break;case"textarea":ys(n,a);break;case"select":r=a.value,r!=null&&fr(n,!!a.multiple,r,!1)}},Ni=Oh,Fo=Xi;var z0={usingClientEntryPoint:!1,Events:[oa,Hs,Ol,Gn,Mo,Oh]},wa={findFiberByHostInstance:$i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$0={bundleType:wa.bundleType,version:wa.version,rendererPackageName:wa.rendererPackageName,rendererConfig:wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Bo(n),n===null?null:n.stateNode},findFiberByHostInstance:wa.findFiberByHostInstance||U0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vu.isDisabled&&vu.supportsFiber)try{Li=vu.inject($0),an=vu}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z0,rn.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$h(r))throw Error(t(200));return j0(n,r,null,a)},rn.createRoot=function(n,r){if(!$h(n))throw Error(t(299));var a=!1,c="",d=Dm;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=Uh(n,1,!1,null,null,a,!1,c,d),n[Er]=r.current,ra(n.nodeType===8?n.parentNode:n),new zh(r)},rn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Bo(r),n=n===null?null:n.stateNode,n},rn.flushSync=function(n){return Xi(n)},rn.hydrate=function(n,r,a){if(!gu(r))throw Error(t(200));return yu(null,n,r,!0,a)},rn.hydrateRoot=function(n,r,a){if(!$h(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",_=Dm;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),r=Pm(r,null,n,1,a??null,d,!1,p,_),n[Er]=r.current,ra(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new mu(r)},rn.render=function(n,r,a){if(!gu(r))throw Error(t(200));return yu(null,n,r,!1,a)},rn.unmountComponentAtNode=function(n){if(!gu(n))throw Error(t(40));return n._reactRootContainer?(Xi(function(){yu(null,null,n,!1,function(){n._reactRootContainer=null,n[Er]=null})}),!0):!1},rn.unstable_batchedUpdates=Oh,rn.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!gu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return yu(n,r,a,!1,c)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var Bm;function X0(){if(Bm)return qh.exports;Bm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),qh.exports=Y0(),qh.exports}var zm;function J0(){if(zm)return _u;zm=1;var i=X0();return _u.createRoot=i.createRoot,_u.hydrateRoot=i.hydrateRoot,_u}var Z0=J0();const ew=gy(Z0),tw=()=>{};var $m={};const vy=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},nw=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const o=i[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[t++],h=i[t++],m=i[t++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=i[t++],h=i[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},_y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,m=h?i[o+1]:0,g=o+2<i.length,v=g?i[o+2]:0,T=u>>2,A=(u&3)<<4|m>>4;let x=(m&15)<<2|v>>6,U=v&63;g||(U=64,h||(x=64)),s.push(t[T],t[A],t[x],t[U])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(vy(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):nw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const v=o<i.length?t[i.charAt(o)]:64;++o;const A=o<i.length?t[i.charAt(o)]:64;if(++o,u==null||m==null||v==null||A==null)throw new rw;const x=u<<2|m>>4;if(s.push(x),v!==64){const U=m<<4&240|v>>2;if(s.push(U),A!==64){const H=v<<6&192|A;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class rw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iw=function(i){const e=vy(i);return _y.encodeByteArray(e,!0)},Lu=function(i){return iw(i).replace(/\./g,"")},wy=function(i){try{return _y.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ow=()=>sw().__FIREBASE_DEFAULTS__,aw=()=>{if(typeof process>"u"||typeof $m>"u")return;const i=$m.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},lw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&wy(i[1]);return e&&JSON.parse(e)},nc=()=>{try{return tw()||ow()||aw()||lw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Ey=i=>{var e,t;return(t=(e=nc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},uw=i=>{const e=Ey(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Ty=()=>{var i;return(i=nc())===null||i===void 0?void 0:i.config},Iy=i=>{var e;return(e=nc())===null||e===void 0?void 0:e[`_${i}`]};class cw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function Eo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sy(i){return(await fetch(i,{credentials:"include"})).ok}function hw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Lu(JSON.stringify(t)),Lu(JSON.stringify(h)),""].join(".")}const Ca={};function dw(){const i={prod:[],emulator:[]};for(const e of Object.keys(Ca))Ca[e]?i.emulator.push(e):i.prod.push(e);return i}function fw(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Hm=!1;function Ay(i,e){if(typeof window>"u"||typeof document>"u"||!Eo(window.location.host)||Ca[i]===e||Ca[i]||Hm)return;Ca[i]=e;function t(x){return`__firebase__banner__${x}`}const s="__firebase__banner",u=dw().prod.length>0;function h(){const x=document.getElementById(s);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,U){x.setAttribute("width","24"),x.setAttribute("id",U),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function v(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Hm=!0,h()},x}function T(x,U){x.setAttribute("id",U),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function A(){const x=fw(s),U=t("text"),H=document.getElementById(U)||document.createElement("span"),W=t("learnmore"),z=document.getElementById(W)||document.createElement("a"),re=t("preprendIcon"),ce=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const se=x.element;m(se),T(z,W);const pe=v();g(ce,re),se.append(ce,H,z,pe),document.body.appendChild(se)}u?(H.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function mw(){var i;const e=(i=nc())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function vw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _w(){const i=Wt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function ww(){return!mw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ew(){try{return typeof indexedDB=="object"}catch{return!1}}function Tw(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}const Iw="FirebaseError";class Mr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Iw,Object.setPrototypeOf(this,Mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ga.prototype.create)}}class Ga{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?Sw(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Mr(o,m,s)}}function Sw(i,e){return i.replace(Aw,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Aw=/\{\$([^}]+)}/g;function xw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function is(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(Wm(u)&&Wm(h)){if(!is(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Wm(i){return i!==null&&typeof i=="object"}function Ka(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ta(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Ia(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function kw(i,e){const t=new Cw(i,e);return t.subscribe.bind(t)}class Cw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Rw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Qh),o.error===void 0&&(o.error=Qh),o.complete===void 0&&(o.complete=Qh);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rw(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Qh(){}function pn(i){return i&&i._delegate?i._delegate:i}class ss{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ts="[DEFAULT]";class Pw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new cw;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Dw(e))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ts){return this.instances.has(e)}getOptions(e=ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Nw(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ts){return this.component?this.component.multipleInstances?e:ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nw(i){return i===ts?void 0:i}function Dw(i){return i.instantiationMode==="EAGER"}class bw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Pw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Oe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Oe||(Oe={}));const Ow={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},Vw=Oe.INFO,Lw={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},Mw=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=Lw[e];if(o)console[o](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Od{constructor(e){this.name=e,this._logLevel=Vw,this._logHandler=Mw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ow[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const Fw=(i,e)=>e.some(t=>i instanceof t);let qm,Gm;function jw(){return qm||(qm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Uw(){return Gm||(Gm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xy=new WeakMap,ad=new WeakMap,ky=new WeakMap,Yh=new WeakMap,Vd=new WeakMap;function Bw(i){const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{t(pi(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&xy.set(t,i)}).catch(()=>{}),Vd.set(e,i),e}function zw(i){if(ad.has(i))return;const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});ad.set(i,e)}let ld={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return ad.get(i);if(e==="objectStoreNames")return i.objectStoreNames||ky.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pi(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function $w(i){ld=i(ld)}function Hw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(Xh(this),e,...t);return ky.set(s,e.sort?e.sort():[e]),pi(s)}:Uw().includes(i)?function(...e){return i.apply(Xh(this),e),pi(xy.get(this))}:function(...e){return pi(i.apply(Xh(this),e))}}function Ww(i){return typeof i=="function"?Hw(i):(i instanceof IDBTransaction&&zw(i),Fw(i,jw())?new Proxy(i,ld):i)}function pi(i){if(i instanceof IDBRequest)return Bw(i);if(Yh.has(i))return Yh.get(i);const e=Ww(i);return e!==i&&(Yh.set(i,e),Vd.set(e,i)),e}const Xh=i=>Vd.get(i);function qw(i,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),m=pi(h);return s&&h.addEventListener("upgradeneeded",g=>{s(pi(h.result),g.oldVersion,g.newVersion,pi(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const Gw=["get","getKey","getAll","getAllKeys","count"],Kw=["put","add","delete","clear"],Jh=new Map;function Km(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Jh.get(e))return Jh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=Kw.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Gw.includes(t)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&g.done]))[0]};return Jh.set(e,u),u}$w(i=>({...i,get:(e,t,s)=>Km(e,t)||i.get(e,t,s),has:(e,t)=>!!Km(e,t)||i.has(e,t)}));class Qw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Yw(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Yw(i){const e=i.getComponent();return e?.type==="VERSION"}const ud="@firebase/app",Qm="0.13.2";const br=new Od("@firebase/app"),Xw="@firebase/app-compat",Jw="@firebase/analytics-compat",Zw="@firebase/analytics",eE="@firebase/app-check-compat",tE="@firebase/app-check",nE="@firebase/auth",rE="@firebase/auth-compat",iE="@firebase/database",sE="@firebase/data-connect",oE="@firebase/database-compat",aE="@firebase/functions",lE="@firebase/functions-compat",uE="@firebase/installations",cE="@firebase/installations-compat",hE="@firebase/messaging",dE="@firebase/messaging-compat",fE="@firebase/performance",pE="@firebase/performance-compat",mE="@firebase/remote-config",gE="@firebase/remote-config-compat",yE="@firebase/storage",vE="@firebase/storage-compat",_E="@firebase/firestore",wE="@firebase/ai",EE="@firebase/firestore-compat",TE="firebase",IE="11.10.0";const cd="[DEFAULT]",SE={[ud]:"fire-core",[Xw]:"fire-core-compat",[Zw]:"fire-analytics",[Jw]:"fire-analytics-compat",[tE]:"fire-app-check",[eE]:"fire-app-check-compat",[nE]:"fire-auth",[rE]:"fire-auth-compat",[iE]:"fire-rtdb",[sE]:"fire-data-connect",[oE]:"fire-rtdb-compat",[aE]:"fire-fn",[lE]:"fire-fn-compat",[uE]:"fire-iid",[cE]:"fire-iid-compat",[hE]:"fire-fcm",[dE]:"fire-fcm-compat",[fE]:"fire-perf",[pE]:"fire-perf-compat",[mE]:"fire-rc",[gE]:"fire-rc-compat",[yE]:"fire-gcs",[vE]:"fire-gcs-compat",[_E]:"fire-fst",[EE]:"fire-fst-compat",[wE]:"fire-vertex","fire-js":"fire-js",[TE]:"fire-js-all"};const Mu=new Map,AE=new Map,hd=new Map;function Ym(i,e){try{i.container.addComponent(e)}catch(t){br.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function mo(i){const e=i.name;if(hd.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;hd.set(e,i);for(const t of Mu.values())Ym(t,i);for(const t of AE.values())Ym(t,i);return!0}function Ld(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function An(i){return i==null?!1:i.settings!==void 0}const xE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mi=new Ga("app","Firebase",xE);class kE{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}}const To=IE;function Cy(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:cd,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw mi.create("bad-app-name",{appName:String(o)});if(t||(t=Ty()),!t)throw mi.create("no-options");const u=Mu.get(o);if(u){if(is(t,u.options)&&is(s,u.config))return u;throw mi.create("duplicate-app",{appName:o})}const h=new bw(o);for(const g of hd.values())h.addComponent(g);const m=new kE(t,s,h);return Mu.set(o,m),m}function Ry(i=cd){const e=Mu.get(i);if(!e&&i===cd&&Ty())return Cy();if(!e)throw mi.create("no-app",{appName:i});return e}function gi(i,e,t){var s;let o=(s=SE[i])!==null&&s!==void 0?s:i;t&&(o+=`-${t}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(m.join(" "));return}mo(new ss(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const CE="firebase-heartbeat-database",RE=1,Va="firebase-heartbeat-store";let Zh=null;function Py(){return Zh||(Zh=qw(CE,RE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Va)}catch(t){console.warn(t)}}}}).catch(i=>{throw mi.create("idb-open",{originalErrorMessage:i.message})})),Zh}async function PE(i){try{const t=(await Py()).transaction(Va),s=await t.objectStore(Va).get(Ny(i));return await t.done,s}catch(e){if(e instanceof Mr)br.warn(e.message);else{const t=mi.create("idb-get",{originalErrorMessage:e?.message});br.warn(t.message)}}}async function Xm(i,e){try{const s=(await Py()).transaction(Va,"readwrite");await s.objectStore(Va).put(e,Ny(i)),await s.done}catch(t){if(t instanceof Mr)br.warn(t.message);else{const s=mi.create("idb-set",{originalErrorMessage:t?.message});br.warn(s.message)}}}function Ny(i){return`${i.name}!${i.options.appId}`}const NE=1024,DE=30;class bE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VE(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Jm();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>DE){const h=LE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){br.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jm(),{heartbeatsToSend:s,unsentEntries:o}=OE(this._heartbeatsCache.heartbeats),u=Lu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return br.warn(t),""}}}function Jm(){return new Date().toISOString().substring(0,10)}function OE(i,e=NE){const t=[];let s=i.slice();for(const o of i){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),Zm(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zm(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class VE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ew()?Tw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await PE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Zm(i){return Lu(JSON.stringify({version:2,heartbeats:i})).length}function LE(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}function ME(i){mo(new ss("platform-logger",e=>new Qw(e),"PRIVATE")),mo(new ss("heartbeat",e=>new bE(e),"PRIVATE")),gi(ud,Qm,i),gi(ud,Qm,"esm2017"),gi("fire-js","")}ME("");var FE="firebase",jE="11.10.0";gi(FE,jE,"app");function Md(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function Dy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UE=Dy,by=new Ga("auth","Firebase",Dy());const Fu=new Od("@firebase/auth");function BE(i,...e){Fu.logLevel<=Oe.WARN&&Fu.warn(`Auth (${To}): ${i}`,...e)}function xu(i,...e){Fu.logLevel<=Oe.ERROR&&Fu.error(`Auth (${To}): ${i}`,...e)}function Wn(i,...e){throw Fd(i,...e)}function ir(i,...e){return Fd(i,...e)}function Oy(i,e,t){const s=Object.assign(Object.assign({},UE()),{[e]:t});return new Ga("auth","Firebase",s).create(e,{appName:i.name})}function Nr(i){return Oy(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fd(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return by.create(i,...e)}function Ee(i,e,...t){if(!i)throw Fd(e,...t)}function Rr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw xu(e),new Error(e)}function Or(i,e){i||Rr(e)}function dd(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function zE(){return eg()==="http:"||eg()==="https:"}function eg(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}function $E(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zE()||yw()||"connection"in navigator)?navigator.onLine:!0}function HE(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Qa{constructor(e,t){this.shortDelay=e,this.longDelay=t,Or(t>e,"Short delay should be less than long delay!"),this.isMobile=pw()||vw()}get(){return $E()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jd(i,e){Or(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Vy{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const WE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const qE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GE=new Qa(3e4,6e4);function xi(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function ki(i,e,t,s,o={}){return Ly(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const m=Ka(Object.assign({key:i.config.apiKey},h)).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const v=Object.assign({method:e,headers:g},u);return gw()||(v.referrerPolicy="no-referrer"),i.emulatorConfig&&Eo(i.emulatorConfig.host)&&(v.credentials="include"),Vy.fetch()(await My(i,i.config.apiHost,t,m),v)})}async function Ly(i,e,t){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},WE),e);try{const o=new QE(i),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw wu(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,v]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw wu(i,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw wu(i,"email-already-in-use",h);if(g==="USER_DISABLED")throw wu(i,"user-disabled",h);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Oy(i,T,v);Wn(i,T)}}catch(o){if(o instanceof Mr)throw o;Wn(i,"network-request-failed",{message:String(o)})}}async function Ya(i,e,t,s,o={}){const u=await ki(i,e,t,s,o);return"mfaPendingCredential"in u&&Wn(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function My(i,e,t,s){const o=`${e}${t}?${s}`,u=i,h=u.config.emulator?jd(i.config,o):`${i.config.apiScheme}://${o}`;return qE.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function KE(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ir(this.auth,"network-request-failed")),GE.get())})}}function wu(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=ir(i,e,s);return o.customData._tokenResponse=t,o}function tg(i){return i!==void 0&&i.enterprise!==void 0}class YE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return KE(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function XE(i,e){return ki(i,"GET","/v2/recaptchaConfig",xi(i,e))}async function JE(i,e){return ki(i,"POST","/v1/accounts:delete",e)}async function ju(i,e){return ki(i,"POST","/v1/accounts:lookup",e)}function Ra(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZE(i,e=!1){const t=pn(i),s=await t.getIdToken(e),o=Ud(s);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:Ra(ed(o.auth_time)),issuedAtTime:Ra(ed(o.iat)),expirationTime:Ra(ed(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function ed(i){return Number(i)*1e3}function Ud(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return xu("JWT malformed, contained fewer than 3 sections"),null;try{const o=wy(t);return o?JSON.parse(o):(xu("Failed to decode base64 JWT payload"),null)}catch(o){return xu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ng(i){const e=Ud(i);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function La(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Mr&&e1(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function e1({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class t1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class fd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ra(this.lastLoginAt),this.creationTime=Ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Uu(i){var e;const t=i.auth,s=await i.getIdToken(),o=await La(i,ju(t,{idToken:s}));Ee(o?.users.length,t,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Fy(u.providerUserInfo):[],m=r1(i.providerData,h),g=i.isAnonymous,v=!(i.email&&u.passwordHash)&&!m?.length,T=g?v:!1,A={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new fd(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(i,A)}async function n1(i){const e=pn(i);await Uu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function r1(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Fy(i){return i.map(e=>{var{providerId:t}=e,s=Md(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}async function i1(i,e){const t=await Ly(i,{},async()=>{const s=Ka({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=await My(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return i.emulatorConfig&&Eo(i.emulatorConfig.host)&&(g.credentials="include"),Vy.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function s1(i,e){return ki(i,"POST","/v2/accounts:revokeToken",xi(i,e))}class co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ng(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=ng(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await i1(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,h=new co;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Ee(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new co,this.toJSON())}_performRefresh(){return Rr("not implemented")}}function li(i,e){Ee(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class $n{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,u=Md(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new t1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new fd(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await La(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ZE(this,e)}reload(){return n1(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Uu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(Nr(this.auth));const e=await this.getIdToken();return await La(this,JE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,u,h,m,g,v,T;const A=(s=t.displayName)!==null&&s!==void 0?s:void 0,x=(o=t.email)!==null&&o!==void 0?o:void 0,U=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,H=(h=t.photoURL)!==null&&h!==void 0?h:void 0,W=(m=t.tenantId)!==null&&m!==void 0?m:void 0,z=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,re=(v=t.createdAt)!==null&&v!==void 0?v:void 0,ce=(T=t.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:se,emailVerified:pe,isAnonymous:ke,providerData:Ie,stsTokenManager:P}=t;Ee(se&&P,e,"internal-error");const I=co.fromJSON(this.name,P);Ee(typeof se=="string",e,"internal-error"),li(A,e.name),li(x,e.name),Ee(typeof pe=="boolean",e,"internal-error"),Ee(typeof ke=="boolean",e,"internal-error"),li(U,e.name),li(H,e.name),li(W,e.name),li(z,e.name),li(re,e.name),li(ce,e.name);const C=new $n({uid:se,auth:e,email:x,emailVerified:pe,displayName:A,isAnonymous:ke,photoURL:H,phoneNumber:U,tenantId:W,stsTokenManager:I,createdAt:re,lastLoginAt:ce});return Ie&&Array.isArray(Ie)&&(C.providerData=Ie.map(N=>Object.assign({},N))),z&&(C._redirectEventId=z),C}static async _fromIdTokenResponse(e,t,s=!1){const o=new co;o.updateFromServerResponse(t);const u=new $n({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Uu(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Fy(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new co;m.updateFromIdToken(s);const g=new $n({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new fd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,v),g}}const rg=new Map;function Pr(i){Or(i instanceof Function,"Expected a class definition");let e=rg.get(i);return e?(Or(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,rg.set(i,e),e)}class jy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}jy.type="NONE";const ig=jy;function ku(i,e,t){return`firebase:${i}:${e}:${t}`}class ho{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=ku(this.userKey,o.apiKey,u),this.fullPersistenceKey=ku("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ju(this.auth,{idToken:e}).catch(()=>{});return t?$n._fromGetAccountInfoResponse(this.auth,t,e):null}return $n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ho(Pr(ig),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=o[0]||Pr(ig);const h=ku(s,e.config.apiKey,e.name);let m=null;for(const v of t)try{const T=await v._get(h);if(T){let A;if(typeof T=="string"){const x=await ju(e,{idToken:T}).catch(()=>{});if(!x)break;A=await $n._fromGetAccountInfoResponse(e,x,T)}else A=$n._fromJSON(e,T);v!==u&&(m=A),u=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new ho(u,e,s):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==u)try{await v._remove(h)}catch{}})),new ho(u,e,s))}}function sg(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($y(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Uy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Wy(e))return"Blackberry";if(qy(e))return"Webos";if(By(e))return"Safari";if((e.includes("chrome/")||zy(e))&&!e.includes("edge/"))return"Chrome";if(Hy(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if(s?.length===2)return s[1]}return"Other"}function Uy(i=Wt()){return/firefox\//i.test(i)}function By(i=Wt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zy(i=Wt()){return/crios\//i.test(i)}function $y(i=Wt()){return/iemobile/i.test(i)}function Hy(i=Wt()){return/android/i.test(i)}function Wy(i=Wt()){return/blackberry/i.test(i)}function qy(i=Wt()){return/webos/i.test(i)}function Bd(i=Wt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function o1(i=Wt()){var e;return Bd(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function a1(){return _w()&&document.documentMode===10}function Gy(i=Wt()){return Bd(i)||Hy(i)||qy(i)||Wy(i)||/windows phone/i.test(i)||$y(i)}function Ky(i,e=[]){let t;switch(i){case"Browser":t=sg(Wt());break;case"Worker":t=`${sg(Wt())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${To}/${s}`}class l1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((h,m)=>{try{const g=e(u);h(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function u1(i,e={}){return ki(i,"GET","/v2/passwordPolicy",xi(i,e))}const c1=6;class h1{constructor(e){var t,s,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:c1,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,u,h,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class d1{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new og(this),this.idTokenSubscription=new og(this),this.beforeStateQueue=new l1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=by,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pr(t)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ju(this,{idToken:e}),s=await $n._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(An(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&g?.user&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Uu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(Nr(this));const t=e?pn(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(Nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(Nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await u1(this),t=new h1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ga("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await s1(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Pr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[Pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ky(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&BE(`Error while retrieving App Check token: ${t.error}`),t?.token}}function cs(i){return pn(i)}class og{constructor(e){this.auth=e,this.observer=null,this.addObserver=kw(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let rc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function f1(i){rc=i}function Qy(i){return rc.loadJS(i)}function p1(){return rc.recaptchaEnterpriseScript}function m1(){return rc.gapiScript}function g1(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class y1{constructor(){this.enterprise=new v1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class v1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const _1="recaptcha-enterprise",Yy="NO_RECAPTCHA";class w1{constructor(e){this.type=_1,this.auth=cs(e)}async verify(e="verify",t=!1){async function s(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{XE(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const v=new YE(g);return u.tenantId==null?u._agentRecaptchaConfig=v:u._tenantRecaptchaConfigs[u.tenantId]=v,h(v.siteKey)}}).catch(g=>{m(g)})})}function o(u,h,m){const g=window.grecaptcha;tg(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(v=>{h(v)}).catch(()=>{h(Yy)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new y1().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(m=>{if(!t&&tg(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=p1();g.length!==0&&(g+=m),Qy(g).then(()=>{o(m,u,h)}).catch(v=>{h(v)})}}).catch(m=>{h(m)})})}}async function ag(i,e,t,s=!1,o=!1){const u=new w1(i);let h;if(o)h=Yy;else try{h=await u.verify(t)}catch{h=await u.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,v=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function pd(i,e,t,s,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await ag(i,e,t,t==="getOobCode");return s(i,h)}else return s(i,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await ag(i,e,t,t==="getOobCode");return s(i,m)}else return Promise.reject(h)})}function E1(i,e){const t=Ld(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(is(u,e??{}))return o;Wn(o,"already-initialized")}return t.initialize({options:e})}function T1(i,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Pr);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function I1(i,e,t){const s=cs(i);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Xy(e),{host:h,port:m}=S1(e),g=m===null?"":`:${m}`,v={url:`${u}//${h}${g}/`},T=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(is(v,s.config.emulator)&&is(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Eo(h)?(Sy(`${u}//${h}${g}`),Ay("Auth",!0)):A1()}function Xy(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function S1(i){const e=Xy(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:lg(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:lg(h)}}}function lg(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function A1(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class zd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,t){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}}async function x1(i,e){return ki(i,"POST","/v1/accounts:signUp",e)}async function k1(i,e){return Ya(i,"POST","/v1/accounts:signInWithPassword",xi(i,e))}async function C1(i,e){return Ya(i,"POST","/v1/accounts:signInWithEmailLink",xi(i,e))}async function R1(i,e){return Ya(i,"POST","/v1/accounts:signInWithEmailLink",xi(i,e))}class Ma extends zd{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ma(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ma(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pd(e,t,"signInWithPassword",k1);case"emailLink":return C1(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pd(e,s,"signUpPassword",x1);case"emailLink":return R1(e,{idToken:t,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function fo(i,e){return Ya(i,"POST","/v1/accounts:signInWithIdp",xi(i,e))}const P1="http://localhost";class os extends zd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,u=Md(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new os(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return fo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,fo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fo(e,t)}buildRequest(){const e={requestUri:P1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ka(t)}return e}}function N1(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function D1(i){const e=Ta(Ia(i)).link,t=e?Ta(Ia(e)).deep_link_id:null,s=Ta(Ia(i)).deep_link_id;return(s?Ta(Ia(s)).link:null)||s||t||e||i}class $d{constructor(e){var t,s,o,u,h,m;const g=Ta(Ia(e)),v=(t=g.apiKey)!==null&&t!==void 0?t:null,T=(s=g.oobCode)!==null&&s!==void 0?s:null,A=N1((o=g.mode)!==null&&o!==void 0?o:null);Ee(v&&T&&A,"argument-error"),this.apiKey=v,this.operation=A,this.code=T,this.continueUrl=(u=g.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(h=g.lang)!==null&&h!==void 0?h:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=D1(e);try{return new $d(t)}catch{return null}}}class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,t){return Ma._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=$d.parseLink(t);return Ee(s,"argument-error"),Ma._fromEmailAndCode(e,s.code,s.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Jy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Xa extends Jy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ui extends Xa{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";class ci extends Xa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return os._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ci.credential(t,s)}catch{return null}}}ci.GOOGLE_SIGN_IN_METHOD="google.com";ci.PROVIDER_ID="google.com";class hi extends Xa{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";class di extends Xa{constructor(){super("twitter.com")}static credential(e,t){return os._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return di.credential(t,s)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";async function b1(i,e){return Ya(i,"POST","/v1/accounts:signUp",xi(i,e))}class as{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await $n._fromIdTokenResponse(e,s,o),h=ug(s);return new as({user:u,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=ug(s);return new as({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function ug(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Bu extends Mr{constructor(e,t,s,o){var u;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Bu.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Bu(e,t,s,o)}}function Zy(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Bu._fromErrorAndOperation(i,u,e,s):u})}async function O1(i,e,t=!1){const s=await La(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return as._forOperation(i,"link",s)}async function V1(i,e,t=!1){const{auth:s}=i;if(An(s.app))return Promise.reject(Nr(s));const o="reauthenticate";try{const u=await La(i,Zy(s,o,e,i),t);Ee(u.idToken,s,"internal-error");const h=Ud(u.idToken);Ee(h,s,"internal-error");const{sub:m}=h;return Ee(i.uid===m,s,"user-mismatch"),as._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Wn(s,"user-mismatch"),u}}async function ev(i,e,t=!1){if(An(i.app))return Promise.reject(Nr(i));const s="signIn",o=await Zy(i,s,e),u=await as._fromIdTokenResponse(i,s,o);return t||await i._updateCurrentUser(u.user),u}async function L1(i,e){return ev(cs(i),e)}async function tv(i){const e=cs(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function M1(i,e,t){if(An(i.app))return Promise.reject(Nr(i));const s=cs(i),h=await pd(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",b1).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&tv(i),g}),m=await as._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(m.user),m}function F1(i,e,t){return An(i.app)?Promise.reject(Nr(i)):L1(pn(i),Io.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&tv(i),s})}function j1(i,e,t,s){return pn(i).onIdTokenChanged(e,t,s)}function U1(i,e,t){return pn(i).beforeAuthStateChanged(e,t)}function B1(i,e,t,s){return pn(i).onAuthStateChanged(e,t,s)}function z1(i){return pn(i).signOut()}const zu="__sak";class nv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zu,"1"),this.storage.removeItem(zu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const $1=1e3,H1=10;class rv extends nv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);a1()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,H1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rv.type="LOCAL";const W1=rv;class iv extends nv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iv.type="SESSION";const sv=iv;function q1(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class ic{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new ic(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async v=>v(t.origin,u)),g=await q1(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ic.receivers=[];function Hd(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}class G1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const v=Hd("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(A){const x=A;if(x.data.eventId===v)switch(x.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function sr(){return window}function K1(i){sr().location.href=i}function ov(){return typeof sr().WorkerGlobalScope<"u"&&typeof sr().importScripts=="function"}async function Q1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Y1(){var i;return((i=navigator?.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function X1(){return ov()?self:null}const av="firebaseLocalStorageDb",J1=1,$u="firebaseLocalStorage",lv="fbase_key";class Ja{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sc(i,e){return i.transaction([$u],e?"readwrite":"readonly").objectStore($u)}function Z1(){const i=indexedDB.deleteDatabase(av);return new Ja(i).toPromise()}function md(){const i=indexedDB.open(av,J1);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore($u,{keyPath:lv})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains($u)?e(s):(s.close(),await Z1(),e(await md()))})})}async function cg(i,e,t){const s=sc(i,!0).put({[lv]:e,value:t});return new Ja(s).toPromise()}async function eT(i,e){const t=sc(i,!1).get(e),s=await new Ja(t).toPromise();return s===void 0?null:s.value}function hg(i,e){const t=sc(i,!0).delete(e);return new Ja(t).toPromise()}const tT=800,nT=3;class uv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await md(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>nT)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ov()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ic._getInstance(X1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Q1(),!this.activeServiceWorker)return;this.sender=new G1(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Y1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await md();return await cg(e,zu,"1"),await hg(e,zu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>cg(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>eT(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=sc(o,!1).getAll();return new Ja(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uv.type="LOCAL";const rT=uv;new Qa(3e4,6e4);function iT(i,e){return e?Pr(e):(Ee(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Wd extends zd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function sT(i){return ev(i.auth,new Wd(i),i.bypassAuthState)}function oT(i){const{auth:e,user:t}=i;return Ee(t,e,"internal-error"),V1(t,new Wd(i),i.bypassAuthState)}async function aT(i){const{auth:e,user:t}=i;return Ee(t,e,"internal-error"),O1(t,new Wd(i),i.bypassAuthState)}class cv{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sT;case"linkViaPopup":case"linkViaRedirect":return aT;case"reauthViaPopup":case"reauthViaRedirect":return oT;default:Wn(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lT=new Qa(2e3,1e4);class uo extends cv{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,uo.currentPopupAction&&uo.currentPopupAction.cancel(),uo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const e=Hd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lT.get())};e()}}uo.currentPopupAction=null;const uT="pendingRedirect",Cu=new Map;class cT extends cv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Cu.get(this.auth._key());if(!e){try{const s=await hT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Cu.set(this.auth._key(),e)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hT(i,e){const t=pT(e),s=fT(i);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function dT(i,e){Cu.set(i._key(),e)}function fT(i){return Pr(i._redirectPersistence)}function pT(i){return ku(uT,i.config.apiKey,i.name)}async function mT(i,e,t=!1){if(An(i.app))return Promise.reject(Nr(i));const s=cs(i),o=iT(s,e),h=await new cT(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const gT=600*1e3;class yT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!hv(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(ir(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gT&&this.cachedEventUids.clear(),this.cachedEventUids.has(dg(e))}saveEventToCache(e){this.cachedEventUids.add(dg(e)),this.lastProcessedEventTime=Date.now()}}function dg(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function hv({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function vT(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hv(i);default:return!1}}async function _T(i,e={}){return ki(i,"GET","/v1/projects",e)}const wT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ET=/^https?/;async function TT(i){if(i.config.emulator)return;const{authorizedDomains:e}=await _T(i);for(const t of e)try{if(IT(t))return}catch{}Wn(i,"unauthorized-domain")}function IT(i){const e=dd(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!ET.test(t))return!1;if(wT.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const ST=new Qa(3e4,6e4);function fg(){const i=sr().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function AT(i){return new Promise((e,t)=>{var s,o,u;function h(){fg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fg(),t(ir(i,"network-request-failed"))},timeout:ST.get()})}if(!((o=(s=sr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=sr().gapi)===null||u===void 0)&&u.load)h();else{const m=g1("iframefcb");return sr()[m]=()=>{gapi.load?h():t(ir(i,"network-request-failed"))},Qy(`${m1()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Ru=null,e})}let Ru=null;function xT(i){return Ru=Ru||AT(i),Ru}const kT=new Qa(5e3,15e3),CT="__/auth/iframe",RT="emulator/auth/iframe",PT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DT(i){const e=i.config;Ee(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?jd(e,RT):`https://${i.config.authDomain}/${CT}`,s={apiKey:e.apiKey,appName:i.name,v:To},o=NT.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${Ka(s).slice(1)}`}async function bT(i){const e=await xT(i),t=sr().gapi;return Ee(t,i,"internal-error"),e.open({where:document.body,url:DT(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PT,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=ir(i,"network-request-failed"),m=sr().setTimeout(()=>{u(h)},kT.get());function g(){sr().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(h)})}))}const OT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VT=500,LT=600,MT="_blank",FT="http://localhost";class pg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jT(i,e,t,s=VT,o=LT){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g=Object.assign(Object.assign({},OT),{width:s.toString(),height:o.toString(),top:u,left:h}),v=Wt().toLowerCase();t&&(m=zy(v)?MT:t),Uy(v)&&(e=e||FT,g.scrollbars="yes");const T=Object.entries(g).reduce((x,[U,H])=>`${x}${U}=${H},`,"");if(o1(v)&&m!=="_self")return UT(e||"",m),new pg(null);const A=window.open(e||"",m,T);Ee(A,i,"popup-blocked");try{A.focus()}catch{}return new pg(A)}function UT(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const BT="__/auth/handler",zT="emulator/auth/handler",$T=encodeURIComponent("fac");async function mg(i,e,t,s,o,u){Ee(i.config.authDomain,i,"auth-domain-config-required"),Ee(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:To,eventId:o};if(e instanceof Jy){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",xw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))h[T]=A}if(e instanceof Xa){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(h.scopes=T.join(","))}i.tenantId&&(h.tid=i.tenantId);const m=h;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await i._getAppCheckToken(),v=g?`#${$T}=${encodeURIComponent(g)}`:"";return`${HT(i)}?${Ka(m).slice(1)}${v}`}function HT({config:i}){return i.emulator?jd(i,zT):`https://${i.authDomain}/${BT}`}const td="webStorageSupport";class WT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sv,this._completeRedirectFn=mT,this._overrideRedirectResult=dT}async _openPopup(e,t,s,o){var u;Or((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await mg(e,t,s,dd(),o);return jT(e,h,Hd())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await mg(e,t,s,dd(),o);return K1(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Or(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await bT(e),s=new yT(e);return t.register("authEvent",o=>(Ee(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(td,{type:td},o=>{var u;const h=(u=o?.[0])===null||u===void 0?void 0:u[td];h!==void 0&&t(!!h),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=TT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Gy()||By()||Bd()}}const qT=WT;var gg="@firebase/auth",yg="1.10.8";class GT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function KT(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QT(i){mo(new ss("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;Ee(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ky(i)},v=new d1(s,o,u,g);return T1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),mo(new ss("auth-internal",e=>{const t=cs(e.getProvider("auth").getImmediate());return(s=>new GT(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(gg,yg,KT(i)),gi(gg,yg,"esm2017")}const YT=300,XT=Iy("authIdTokenMaxAge")||YT;let vg=null;const JT=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>XT)return;const o=t?.token;vg!==o&&(vg=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ZT(i=Ry()){const e=Ld(i,"auth");if(e.isInitialized())return e.getImmediate();const t=E1(i,{popupRedirectResolver:qT,persistence:[rT,W1,sv]}),s=Iy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=JT(u.toString());U1(t,h,()=>h(t.currentUser)),j1(t,m=>h(m))}}const o=Ey("auth");return o&&I1(t,`http://${o}`),t}function eI(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}f1({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=ir("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",eI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QT("Browser");var _g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var yi,dv;(function(){var i;function e(P,I){function C(){}C.prototype=I.prototype,P.D=I.prototype,P.prototype=new C,P.prototype.constructor=P,P.C=function(N,b,V){for(var k=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)k[Ye-2]=arguments[Ye];return I.prototype[b].apply(N,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,I,C){C||(C=0);var N=Array(16);if(typeof I=="string")for(var b=0;16>b;++b)N[b]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(b=0;16>b;++b)N[b]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=P.g[0],C=P.g[1],b=P.g[2];var V=P.g[3],k=I+(V^C&(b^V))+N[0]+3614090360&4294967295;I=C+(k<<7&4294967295|k>>>25),k=V+(b^I&(C^b))+N[1]+3905402710&4294967295,V=I+(k<<12&4294967295|k>>>20),k=b+(C^V&(I^C))+N[2]+606105819&4294967295,b=V+(k<<17&4294967295|k>>>15),k=C+(I^b&(V^I))+N[3]+3250441966&4294967295,C=b+(k<<22&4294967295|k>>>10),k=I+(V^C&(b^V))+N[4]+4118548399&4294967295,I=C+(k<<7&4294967295|k>>>25),k=V+(b^I&(C^b))+N[5]+1200080426&4294967295,V=I+(k<<12&4294967295|k>>>20),k=b+(C^V&(I^C))+N[6]+2821735955&4294967295,b=V+(k<<17&4294967295|k>>>15),k=C+(I^b&(V^I))+N[7]+4249261313&4294967295,C=b+(k<<22&4294967295|k>>>10),k=I+(V^C&(b^V))+N[8]+1770035416&4294967295,I=C+(k<<7&4294967295|k>>>25),k=V+(b^I&(C^b))+N[9]+2336552879&4294967295,V=I+(k<<12&4294967295|k>>>20),k=b+(C^V&(I^C))+N[10]+4294925233&4294967295,b=V+(k<<17&4294967295|k>>>15),k=C+(I^b&(V^I))+N[11]+2304563134&4294967295,C=b+(k<<22&4294967295|k>>>10),k=I+(V^C&(b^V))+N[12]+1804603682&4294967295,I=C+(k<<7&4294967295|k>>>25),k=V+(b^I&(C^b))+N[13]+4254626195&4294967295,V=I+(k<<12&4294967295|k>>>20),k=b+(C^V&(I^C))+N[14]+2792965006&4294967295,b=V+(k<<17&4294967295|k>>>15),k=C+(I^b&(V^I))+N[15]+1236535329&4294967295,C=b+(k<<22&4294967295|k>>>10),k=I+(b^V&(C^b))+N[1]+4129170786&4294967295,I=C+(k<<5&4294967295|k>>>27),k=V+(C^b&(I^C))+N[6]+3225465664&4294967295,V=I+(k<<9&4294967295|k>>>23),k=b+(I^C&(V^I))+N[11]+643717713&4294967295,b=V+(k<<14&4294967295|k>>>18),k=C+(V^I&(b^V))+N[0]+3921069994&4294967295,C=b+(k<<20&4294967295|k>>>12),k=I+(b^V&(C^b))+N[5]+3593408605&4294967295,I=C+(k<<5&4294967295|k>>>27),k=V+(C^b&(I^C))+N[10]+38016083&4294967295,V=I+(k<<9&4294967295|k>>>23),k=b+(I^C&(V^I))+N[15]+3634488961&4294967295,b=V+(k<<14&4294967295|k>>>18),k=C+(V^I&(b^V))+N[4]+3889429448&4294967295,C=b+(k<<20&4294967295|k>>>12),k=I+(b^V&(C^b))+N[9]+568446438&4294967295,I=C+(k<<5&4294967295|k>>>27),k=V+(C^b&(I^C))+N[14]+3275163606&4294967295,V=I+(k<<9&4294967295|k>>>23),k=b+(I^C&(V^I))+N[3]+4107603335&4294967295,b=V+(k<<14&4294967295|k>>>18),k=C+(V^I&(b^V))+N[8]+1163531501&4294967295,C=b+(k<<20&4294967295|k>>>12),k=I+(b^V&(C^b))+N[13]+2850285829&4294967295,I=C+(k<<5&4294967295|k>>>27),k=V+(C^b&(I^C))+N[2]+4243563512&4294967295,V=I+(k<<9&4294967295|k>>>23),k=b+(I^C&(V^I))+N[7]+1735328473&4294967295,b=V+(k<<14&4294967295|k>>>18),k=C+(V^I&(b^V))+N[12]+2368359562&4294967295,C=b+(k<<20&4294967295|k>>>12),k=I+(C^b^V)+N[5]+4294588738&4294967295,I=C+(k<<4&4294967295|k>>>28),k=V+(I^C^b)+N[8]+2272392833&4294967295,V=I+(k<<11&4294967295|k>>>21),k=b+(V^I^C)+N[11]+1839030562&4294967295,b=V+(k<<16&4294967295|k>>>16),k=C+(b^V^I)+N[14]+4259657740&4294967295,C=b+(k<<23&4294967295|k>>>9),k=I+(C^b^V)+N[1]+2763975236&4294967295,I=C+(k<<4&4294967295|k>>>28),k=V+(I^C^b)+N[4]+1272893353&4294967295,V=I+(k<<11&4294967295|k>>>21),k=b+(V^I^C)+N[7]+4139469664&4294967295,b=V+(k<<16&4294967295|k>>>16),k=C+(b^V^I)+N[10]+3200236656&4294967295,C=b+(k<<23&4294967295|k>>>9),k=I+(C^b^V)+N[13]+681279174&4294967295,I=C+(k<<4&4294967295|k>>>28),k=V+(I^C^b)+N[0]+3936430074&4294967295,V=I+(k<<11&4294967295|k>>>21),k=b+(V^I^C)+N[3]+3572445317&4294967295,b=V+(k<<16&4294967295|k>>>16),k=C+(b^V^I)+N[6]+76029189&4294967295,C=b+(k<<23&4294967295|k>>>9),k=I+(C^b^V)+N[9]+3654602809&4294967295,I=C+(k<<4&4294967295|k>>>28),k=V+(I^C^b)+N[12]+3873151461&4294967295,V=I+(k<<11&4294967295|k>>>21),k=b+(V^I^C)+N[15]+530742520&4294967295,b=V+(k<<16&4294967295|k>>>16),k=C+(b^V^I)+N[2]+3299628645&4294967295,C=b+(k<<23&4294967295|k>>>9),k=I+(b^(C|~V))+N[0]+4096336452&4294967295,I=C+(k<<6&4294967295|k>>>26),k=V+(C^(I|~b))+N[7]+1126891415&4294967295,V=I+(k<<10&4294967295|k>>>22),k=b+(I^(V|~C))+N[14]+2878612391&4294967295,b=V+(k<<15&4294967295|k>>>17),k=C+(V^(b|~I))+N[5]+4237533241&4294967295,C=b+(k<<21&4294967295|k>>>11),k=I+(b^(C|~V))+N[12]+1700485571&4294967295,I=C+(k<<6&4294967295|k>>>26),k=V+(C^(I|~b))+N[3]+2399980690&4294967295,V=I+(k<<10&4294967295|k>>>22),k=b+(I^(V|~C))+N[10]+4293915773&4294967295,b=V+(k<<15&4294967295|k>>>17),k=C+(V^(b|~I))+N[1]+2240044497&4294967295,C=b+(k<<21&4294967295|k>>>11),k=I+(b^(C|~V))+N[8]+1873313359&4294967295,I=C+(k<<6&4294967295|k>>>26),k=V+(C^(I|~b))+N[15]+4264355552&4294967295,V=I+(k<<10&4294967295|k>>>22),k=b+(I^(V|~C))+N[6]+2734768916&4294967295,b=V+(k<<15&4294967295|k>>>17),k=C+(V^(b|~I))+N[13]+1309151649&4294967295,C=b+(k<<21&4294967295|k>>>11),k=I+(b^(C|~V))+N[4]+4149444226&4294967295,I=C+(k<<6&4294967295|k>>>26),k=V+(C^(I|~b))+N[11]+3174756917&4294967295,V=I+(k<<10&4294967295|k>>>22),k=b+(I^(V|~C))+N[2]+718787259&4294967295,b=V+(k<<15&4294967295|k>>>17),k=C+(V^(b|~I))+N[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(b+(k<<21&4294967295|k>>>11))&4294967295,P.g[2]=P.g[2]+b&4294967295,P.g[3]=P.g[3]+V&4294967295}s.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var C=I-this.blockSize,N=this.B,b=this.h,V=0;V<I;){if(b==0)for(;V<=C;)o(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<I;)if(N[b++]=P.charCodeAt(V++),b==this.blockSize){o(this,N),b=0;break}}else for(;V<I;)if(N[b++]=P[V++],b==this.blockSize){o(this,N),b=0;break}}this.h=b,this.o+=I},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var C=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=C&255,C/=256;for(this.u(P),P=Array(16),I=C=0;4>I;++I)for(var N=0;32>N;N+=8)P[C++]=this.g[I]>>>N&255;return P};function u(P,I){var C=m;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=I(P)}function h(P,I){this.h=I;for(var C=[],N=!0,b=P.length-1;0<=b;b--){var V=P[b]|0;N&&V==I||(C[b]=V,N=!1)}this.g=C}var m={};function g(P){return-128<=P&&128>P?u(P,function(I){return new h([I|0],0>I?-1:0)}):new h([P|0],0>P?-1:0)}function v(P){if(isNaN(P)||!isFinite(P))return A;if(0>P)return z(v(-P));for(var I=[],C=1,N=0;P>=C;N++)I[N]=P/C|0,C*=4294967296;return new h(I,0)}function T(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return z(T(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=v(Math.pow(I,8)),N=A,b=0;b<P.length;b+=8){var V=Math.min(8,P.length-b),k=parseInt(P.substring(b,b+V),I);8>V?(V=v(Math.pow(I,V)),N=N.j(V).add(v(k))):(N=N.j(C),N=N.add(v(k)))}return N}var A=g(0),x=g(1),U=g(16777216);i=h.prototype,i.m=function(){if(W(this))return-z(this).m();for(var P=0,I=1,C=0;C<this.g.length;C++){var N=this.i(C);P+=(0<=N?N:4294967296+N)*I,I*=4294967296}return P},i.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(H(this))return"0";if(W(this))return"-"+z(this).toString(P);for(var I=v(Math.pow(P,6)),C=this,N="";;){var b=pe(C,I).g;C=re(C,b.j(I));var V=((0<C.g.length?C.g[0]:C.h)>>>0).toString(P);if(C=b,H(C))return V+N;for(;6>V.length;)V="0"+V;N=V+N}},i.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function H(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function W(P){return P.h==-1}i.l=function(P){return P=re(this,P),W(P)?-1:H(P)?0:1};function z(P){for(var I=P.g.length,C=[],N=0;N<I;N++)C[N]=~P.g[N];return new h(C,~P.h).add(x)}i.abs=function(){return W(this)?z(this):this},i.add=function(P){for(var I=Math.max(this.g.length,P.g.length),C=[],N=0,b=0;b<=I;b++){var V=N+(this.i(b)&65535)+(P.i(b)&65535),k=(V>>>16)+(this.i(b)>>>16)+(P.i(b)>>>16);N=k>>>16,V&=65535,k&=65535,C[b]=k<<16|V}return new h(C,C[C.length-1]&-2147483648?-1:0)};function re(P,I){return P.add(z(I))}i.j=function(P){if(H(this)||H(P))return A;if(W(this))return W(P)?z(this).j(z(P)):z(z(this).j(P));if(W(P))return z(this.j(z(P)));if(0>this.l(U)&&0>P.l(U))return v(this.m()*P.m());for(var I=this.g.length+P.g.length,C=[],N=0;N<2*I;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(var b=0;b<P.g.length;b++){var V=this.i(N)>>>16,k=this.i(N)&65535,Ye=P.i(b)>>>16,ot=P.i(b)&65535;C[2*N+2*b]+=k*ot,ce(C,2*N+2*b),C[2*N+2*b+1]+=V*ot,ce(C,2*N+2*b+1),C[2*N+2*b+1]+=k*Ye,ce(C,2*N+2*b+1),C[2*N+2*b+2]+=V*Ye,ce(C,2*N+2*b+2)}for(N=0;N<I;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=I;N<2*I;N++)C[N]=0;return new h(C,0)};function ce(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function se(P,I){this.g=P,this.h=I}function pe(P,I){if(H(I))throw Error("division by zero");if(H(P))return new se(A,A);if(W(P))return I=pe(z(P),I),new se(z(I.g),z(I.h));if(W(I))return I=pe(P,z(I)),new se(z(I.g),I.h);if(30<P.g.length){if(W(P)||W(I))throw Error("slowDivide_ only works with positive integers.");for(var C=x,N=I;0>=N.l(P);)C=ke(C),N=ke(N);var b=Ie(C,1),V=Ie(N,1);for(N=Ie(N,2),C=Ie(C,2);!H(N);){var k=V.add(N);0>=k.l(P)&&(b=b.add(C),V=k),N=Ie(N,1),C=Ie(C,1)}return I=re(P,b.j(I)),new se(b,I)}for(b=A;0<=P.l(I);){for(C=Math.max(1,Math.floor(P.m()/I.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),V=v(C),k=V.j(I);W(k)||0<k.l(P);)C-=N,V=v(C),k=V.j(I);H(V)&&(V=x),b=b.add(V),P=re(P,k)}return new se(b,P)}i.A=function(P){return pe(this,P).h},i.and=function(P){for(var I=Math.max(this.g.length,P.g.length),C=[],N=0;N<I;N++)C[N]=this.i(N)&P.i(N);return new h(C,this.h&P.h)},i.or=function(P){for(var I=Math.max(this.g.length,P.g.length),C=[],N=0;N<I;N++)C[N]=this.i(N)|P.i(N);return new h(C,this.h|P.h)},i.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),C=[],N=0;N<I;N++)C[N]=this.i(N)^P.i(N);return new h(C,this.h^P.h)};function ke(P){for(var I=P.g.length+1,C=[],N=0;N<I;N++)C[N]=P.i(N)<<1|P.i(N-1)>>>31;return new h(C,P.h)}function Ie(P,I){var C=I>>5;I%=32;for(var N=P.g.length-C,b=[],V=0;V<N;V++)b[V]=0<I?P.i(V+C)>>>I|P.i(V+C+1)<<32-I:P.i(V+C);return new h(b,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,dv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=T,yi=h}).apply(typeof _g<"u"?_g:typeof self<"u"?self:typeof window<"u"?window:{});var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fv,Sa,pv,Pu,gd,mv,gv,yv;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,y){return l==Array.prototype||l==Object.prototype||(l[f]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eu=="object"&&Eu];for(var f=0;f<l.length;++f){var y=l[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function o(l,f){if(f)e:{var y=s;l=l.split(".");for(var w=0;w<l.length-1;w++){var L=l[w];if(!(L in y))break e;y=y[L]}l=l[l.length-1],w=y[l],f=f(w),f!=w&&f!=null&&e(y,l,{configurable:!0,writable:!0,value:f})}}function u(l,f){l instanceof String&&(l+="");var y=0,w=!1,L={next:function(){if(!w&&y<l.length){var B=y++;return{value:f(B,l[B]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(l){return l||function(){return u(this,function(f,y){return y})}});var h=h||{},m=this||self;function g(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function v(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function T(l,f,y){return l.call.apply(l.bind,arguments)}function A(l,f,y){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),l.apply(f,L)}}return function(){return l.apply(f,arguments)}}function x(l,f,y){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:A,x.apply(null,arguments)}function U(l,f){var y=Array.prototype.slice.call(arguments,1);return function(){var w=y.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function H(l,f){function y(){}y.prototype=f.prototype,l.aa=f.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(w,L,B){for(var te=Array(arguments.length-2),We=2;We<arguments.length;We++)te[We-2]=arguments[We];return f.prototype[L].apply(w,te)}}function W(l){const f=l.length;if(0<f){const y=Array(f);for(let w=0;w<f;w++)y[w]=l[w];return y}return[]}function z(l,f){for(let y=1;y<arguments.length;y++){const w=arguments[y];if(g(w)){const L=l.length||0,B=w.length||0;l.length=L+B;for(let te=0;te<B;te++)l[L+te]=w[te]}else l.push(w)}}class re{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ce(l){return/^[\s\xa0]*$/.test(l)}function se(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function pe(l){return pe[" "](l),l}pe[" "]=function(){};var ke=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function Ie(l,f,y){for(const w in l)f.call(y,l[w],w,l)}function P(l,f){for(const y in l)f.call(void 0,l[y],y,l)}function I(l){const f={};for(const y in l)f[y]=l[y];return f}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(l,f){let y,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(y in w)l[y]=w[y];for(let B=0;B<C.length;B++)y=C[B],Object.prototype.hasOwnProperty.call(w,y)&&(l[y]=w[y])}}function b(l){var f=1;l=l.split(":");const y=[];for(;0<f&&l.length;)y.push(l.shift()),f--;return l.length&&y.push(l.join(":")),y}function V(l){m.setTimeout(()=>{throw l},0)}function k(){var l=oe;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Ye{constructor(){this.h=this.g=null}add(f,y){const w=ot.get();w.set(f,y),this.h?this.h.next=w:this.g=w,this.h=w}}var ot=new re(()=>new at,l=>l.reset());class at{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,Y=!1,oe=new Ye,ie=()=>{const l=m.Promise.resolve(void 0);ee=()=>{l.then(O)}};var O=()=>{for(var l;l=k();){try{l.h.call(l.g)}catch(y){V(y)}var f=ot;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}Y=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Ce=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};m.addEventListener("test",y,f),m.removeEventListener("test",y,f)}catch{}return l})();function Re(l,f){if(ue.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(ke){e:{try{pe(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else y=="mouseover"?f=l.fromElement:y=="mouseout"&&(f=l.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:be[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Re.aa.h.call(this)}}H(Re,ue);var be={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function He(l,f,y,w,L){this.listener=l,this.proxy=null,this.src=f,this.type=y,this.capture=!!w,this.ha=L,this.key=++Ue,this.da=this.fa=!1}function ft(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function J(l){this.src=l,this.g={},this.h=0}J.prototype.add=function(l,f,y,w,L){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var te=De(l,f,w,L);return-1<te?(f=l[te],y||(f.fa=!1)):(f=new He(f,this.src,B,!!w,L),f.fa=y,l.push(f)),f};function ne(l,f){var y=f.type;if(y in l.g){var w=l.g[y],L=Array.prototype.indexOf.call(w,f,void 0),B;(B=0<=L)&&Array.prototype.splice.call(w,L,1),B&&(ft(f),l.g[y].length==0&&(delete l.g[y],l.h--))}}function De(l,f,y,w){for(var L=0;L<l.length;++L){var B=l[L];if(!B.da&&B.listener==f&&B.capture==!!y&&B.ha==w)return L}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),ut={};function on(l,f,y,w,L){if(Array.isArray(f)){for(var B=0;B<f.length;B++)on(l,f[B],y,w,L);return null}return y=Po(y),l&&l[Me]?l.K(f,y,v(w)?!!w.capture:!1,L):Co(l,f,y,!1,w,L)}function Co(l,f,y,w,L,B){if(!f)throw Error("Invalid event type");var te=v(L)?!!L.capture:!!L,We=gs(l);if(We||(l[qe]=We=new J(l)),y=We.add(f,y,w,te,B),y.proxy)return y;if(w=il(),y.proxy=w,w.src=l,w.listener=y,l.addEventListener)Ce||(L=te),L===void 0&&(L=!1),l.addEventListener(f.toString(),w,L);else if(l.attachEvent)l.attachEvent(fr(f.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return y}function il(){function l(y){return f.call(l.src,l.listener,y)}const f=Ro;return l}function ms(l,f,y,w,L){if(Array.isArray(f))for(var B=0;B<f.length;B++)ms(l,f[B],y,w,L);else w=v(w)?!!w.capture:!!w,y=Po(y),l&&l[Me]?(l=l.i,f=String(f).toString(),f in l.g&&(B=l.g[f],y=De(B,y,w,L),-1<y&&(ft(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete l.g[f],l.h--)))):l&&(l=gs(l))&&(f=l.g[f.toString()],l=-1,f&&(l=De(f,y,w,L)),(y=-1<l?f[l]:null)&&dr(y))}function dr(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Me])ne(f.i,l);else{var y=l.type,w=l.proxy;f.removeEventListener?f.removeEventListener(y,w,l.capture):f.detachEvent?f.detachEvent(fr(y),w):f.addListener&&f.removeListener&&f.removeListener(w),(y=gs(f))?(ne(y,l),y.h==0&&(y.src=null,f[qe]=null)):ft(l)}}}function fr(l){return l in ut?ut[l]:ut[l]="on"+l}function Ro(l,f){if(l.da)l=!0;else{f=new Re(f,this);var y=l.listener,w=l.ha||l.src;l.fa&&dr(l),l=y.call(w,f)}return l}function gs(l){return l=l[qe],l instanceof J?l:null}var ys="__closure_events_fn_"+(1e9*Math.random()>>>0);function Po(l){return typeof l=="function"?l:(l[ys]||(l[ys]=function(f){return l.handleEvent(f)}),l[ys])}function vt(){$.call(this),this.i=new J(this),this.M=this,this.F=null}H(vt,$),vt.prototype[Me]=!0,vt.prototype.removeEventListener=function(l,f,y,w){ms(this,l,f,y,w)};function _t(l,f){var y,w=l.F;if(w)for(y=[];w;w=w.F)y.push(w);if(l=l.M,w=f.type||f,typeof f=="string")f=new ue(f,l);else if(f instanceof ue)f.target=f.target||l;else{var L=f;f=new ue(w,l),N(f,L)}if(L=!0,y)for(var B=y.length-1;0<=B;B--){var te=f.g=y[B];L=pr(te,w,!0,f)&&L}if(te=f.g=l,L=pr(te,w,!0,f)&&L,L=pr(te,w,!1,f)&&L,y)for(B=0;B<y.length;B++)te=f.g=y[B],L=pr(te,w,!1,f)&&L}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var y=l.g[f],w=0;w<y.length;w++)ft(y[w]);delete l.g[f],l.h--}}this.F=null},vt.prototype.K=function(l,f,y,w){return this.i.add(String(l),f,!1,y,w)},vt.prototype.L=function(l,f,y,w){return this.i.add(String(l),f,!0,y,w)};function pr(l,f,y,w){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,B=0;B<f.length;++B){var te=f[B];if(te&&!te.da&&te.capture==y){var We=te.listener,wt=te.ha||te.src;te.fa&&ne(l.i,te),L=We.call(wt,w)!==!1&&L}}return L&&!w.defaultPrevented}function No(l,f,y){if(typeof l=="function")y&&(l=x(l,y));else if(l&&typeof l.handleEvent=="function")l=x(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function Fr(l){l.g=No(()=>{l.g=null,l.i&&(l.i=!1,Fr(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Ci extends ${constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ri(l){$.call(this),this.h=l,this.g={}}H(Ri,$);var Do=[];function bo(l){Ie(l.g,function(f,y){this.g.hasOwnProperty(y)&&dr(f)},l),l.g={}}Ri.prototype.N=function(){Ri.aa.N.call(this),bo(this)},Ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oo=m.JSON.stringify,Vo=m.JSON.parse,Lo=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function Pi(){}Pi.prototype.h=null;function vs(l){return l.h||(l.h=l.i())}function _s(){}var mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qn(){ue.call(this,"d")}H(qn,ue);function ws(){ue.call(this,"c")}H(ws,ue);var Gn={},Mo=null;function Ni(){return Mo=Mo||new vt}Gn.La="serverreachability";function Fo(l){ue.call(this,Gn.La,l)}H(Fo,ue);function mr(l){const f=Ni();_t(f,new Fo(f))}Gn.STAT_EVENT="statevent";function jo(l,f){ue.call(this,Gn.STAT_EVENT,l),this.stat=f}H(jo,ue);function ct(l){const f=Ni();_t(f,new jo(f,l))}Gn.Ma="timingevent";function Es(l,f){ue.call(this,Gn.Ma,l),this.size=f}H(Es,ue);function Cn(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function Di(){this.g=!0}Di.prototype.xa=function(){this.g=!1};function bi(l,f,y,w,L,B){l.info(function(){if(l.g)if(B)for(var te="",We=B.split("&"),wt=0;wt<We.length;wt++){var Fe=We[wt].split("=");if(1<Fe.length){var At=Fe[0];Fe=Fe[1];var pt=At.split("_");te=2<=pt.length&&pt[1]=="type"?te+(At+"="+Fe+"&"):te+(At+"=redacted&")}}else te=null;else te=B;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+f+`
`+y+`
`+te})}function Ts(l,f,y,w,L,B,te){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+f+`
`+y+`
`+B+" "+te})}function Rn(l,f,y,w){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+vc(l,y)+(w?" "+w:"")})}function Uo(l,f){l.info(function(){return"TIMEOUT: "+f})}Di.prototype.info=function(){};function vc(l,f){if(!l.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var w=y[l];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var B=L[0];if(B!="noop"&&B!="stop"&&B!="close")for(var te=1;te<L.length;te++)L[te]=""}}}}return Oo(y)}catch{return f}}var Is={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pn;function Oi(){}H(Oi,Pi),Oi.prototype.g=function(){return new XMLHttpRequest},Oi.prototype.i=function(){return{}},Pn=new Oi;function Nn(l,f,y,w){this.j=l,this.i=f,this.l=y,this.R=w||1,this.U=new Ri(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ol}function ol(){this.i=null,this.g="",this.h=!1}var Bo={},Ss={};function As(l,f,y){l.L=1,l.v=$r(ln(f)),l.m=y,l.P=!0,zo(l,null)}function zo(l,f){l.F=Date.now(),Ke(l),l.A=ln(l.v);var y=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Wr(y.i,"t",w),l.C=0,y=l.j.J,l.h=new ol,l.g=Sl(l.j,y?f:null,!l.m),0<l.O&&(l.M=new Ci(x(l.Y,l,l.g),l.O)),f=l.U,y=l.g,w=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Do[0]=L.toString()),L=Do);for(var B=0;B<L.length;B++){var te=on(y,L[B],w||f.handleEvent,!1,f.h||f);if(!te)break;f.g[te.key]=te}f=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),mr(),bi(l.i,l.u,l.A,l.l,l.R,l.m)}Nn.prototype.ca=function(l){l=l.target;const f=this.M;f&&Xt(l)==3?f.j():this.Y(l)},Nn.prototype.Y=function(l){try{if(l==this.g)e:{const pt=Xt(this.g);var f=this.g.Ba();const vn=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Ko(this.g)))){this.J||pt!=4||f==7||(f==8||0>=vn?mr(3):mr(2)),Vi(this);var y=this.g.Z();this.X=y;t:if(al(this)){var w=Ko(this.g);l="";var L=w.length,B=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),jr(this);var te="";break t}this.h.i=new m.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,l+=this.h.i.decode(w[f],{stream:!(B&&f==L-1)});w.length=0,this.h.g+=l,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=y==200,Ts(this.i,this.u,this.A,this.l,this.R,pt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var We,wt=this.g;if((We=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ce(We)){var Fe=We;break t}}Fe=null}if(y=Fe)Rn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$o(this,y);else{this.o=!1,this.s=3,ct(12),gn(this),jr(this);break e}}if(this.P){y=!0;let cn;for(;!this.J&&this.C<te.length;)if(cn=_c(this,te),cn==Ss){pt==4&&(this.s=4,ct(14),y=!1),Rn(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==Bo){this.s=4,ct(15),Rn(this.i,this.l,te,"[Invalid Chunk]"),y=!1;break}else Rn(this.i,this.l,cn,null),$o(this,cn);if(al(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||te.length!=0||this.h.h||(this.s=1,ct(16),y=!1),this.o=this.o&&y,!y)Rn(this.i,this.l,te,"[Invalid Chunked Response]"),gn(this),jr(this);else if(0<te.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Yo(At),At.M=!0,ct(11))}}else Rn(this.i,this.l,te,null),$o(this,te);pt==4&&gn(this),this.o&&!this.J&&(pt==4?Ls(this.j,this):(this.o=!1,Ke(this)))}else Ns(this.g),y==400&&0<te.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),gn(this),jr(this)}}}catch{}};function al(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function _c(l,f){var y=l.C,w=f.indexOf(`
`,y);return w==-1?Ss:(y=Number(f.substring(y,w)),isNaN(y)?Bo:(w+=1,w+y>f.length?Ss:(f=f.slice(w,w+y),l.C=w+y,f)))}Nn.prototype.cancel=function(){this.J=!0,gn(this)};function Ke(l){l.S=Date.now()+l.I,ll(l,l.I)}function ll(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Cn(x(l.ba,l),f)}function Vi(l){l.B&&(m.clearTimeout(l.B),l.B=null)}Nn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Uo(this.i,this.A),this.L!=2&&(mr(),ct(17)),gn(this),this.s=2,jr(this)):ll(this,this.S-l)};function jr(l){l.j.G==0||l.J||Ls(l.j,l)}function gn(l){Vi(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,bo(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function $o(l,f){try{var y=l.j;if(y.G!=0&&(y.g==l||qt(y.h,l))){if(!l.K&&qt(y.h,l)&&y.G==3){try{var w=y.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)Vs(y),Ln(y);else break e;Os(y),ct(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Cn(x(y.Za,y),6e3));if(1>=cl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else wr(y,11)}else if((l.K||y.g==l)&&Vs(y),!ce(f))for(L=y.Da.g.parse(f),f=0;f<L.length;f++){let Fe=L[f];if(y.T=Fe[0],Fe=Fe[1],y.G==2)if(Fe[0]=="c"){y.K=Fe[1],y.ia=Fe[2];const At=Fe[3];At!=null&&(y.la=At,y.j.info("VER="+y.la));const pt=Fe[4];pt!=null&&(y.Aa=pt,y.j.info("SVER="+y.Aa));const vn=Fe[5];vn!=null&&typeof vn=="number"&&0<vn&&(w=1.5*vn,y.L=w,y.j.info("backChannelRequestTimeoutMs_="+w)),w=y;const cn=l.g;if(cn){const zi=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zi){var B=w.h;B.g||zi.indexOf("spdy")==-1&&zi.indexOf("quic")==-1&&zi.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Ho(B,B.h),B.h=null))}if(w.D){const Fs=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fs&&(w.ya=Fs,Ge(w.I,w.D,Fs))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),w=y;var te=l;if(w.qa=Il(w,w.J?w.ia:null,w.W),te.K){hl(w.h,te);var We=te,wt=w.L;wt&&(We.I=wt),We.B&&(Vi(We),Ke(We)),w.g=te}else Bi(w);0<y.i.length&&Xn(y)}else Fe[0]!="stop"&&Fe[0]!="close"||wr(y,7);else y.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?wr(y,7):Dt(y):Fe[0]!="noop"&&y.l&&y.l.ta(Fe),y.v=0)}}mr(4)}catch{}}var ul=class{constructor(l,f){this.g=l,this.map=f}};function Li(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function an(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function cl(l){return l.h?1:l.g?l.g.size:0}function qt(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Ho(l,f){l.g?l.g.add(f):l.h=f}function hl(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Li.prototype.cancel=function(){if(this.i=dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function dl(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const y of l.g.values())f=f.concat(y.D);return f}return W(l.i)}function xs(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var f=[],y=l.length,w=0;w<y;w++)f.push(l[w]);return f}f=[],y=0;for(w in l)f[y++]=l[w];return f}function ks(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var f=[];l=l.length;for(var y=0;y<l;y++)f.push(y);return f}f=[],y=0;for(const w in l)f[y++]=w;return f}}}function Ur(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var y=ks(l),w=xs(l),L=w.length,B=0;B<L;B++)f.call(void 0,w[B],y&&y[B],l)}var Mi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wc(l,f){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var w=l[y].indexOf("="),L=null;if(0<=w){var B=l[y].substring(0,w);L=l[y].substring(w+1)}else B=l[y];f(B,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function gr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof gr){this.h=l.h,Fi(this,l.j),this.o=l.o,this.g=l.g,Br(this,l.s),this.l=l.l;var f=l.i,y=new Kn;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),zr(this,y),this.m=l.m}else l&&(f=String(l).match(Mi))?(this.h=!1,Fi(this,f[1]||"",!0),this.o=Le(f[2]||""),this.g=Le(f[3]||"",!0),Br(this,f[4]),this.l=Le(f[5]||"",!0),zr(this,f[6]||"",!0),this.m=Le(f[7]||"")):(this.h=!1,this.i=new Kn(null,this.h))}gr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Hr(f,Cs,!0),":");var y=this.g;return(y||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Hr(f,Cs,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Hr(y,y.charAt(0)=="/"?ml:pl,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Hr(y,Wo)),l.join("")};function ln(l){return new gr(l)}function Fi(l,f,y){l.j=y?Le(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Br(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function zr(l,f,y){f instanceof Kn?(l.i=f,Qn(l.i,l.h)):(y||(f=Hr(f,gl)),l.i=new Kn(f,l.h))}function Ge(l,f,y){l.i.set(f,y)}function $r(l){return Ge(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Le(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Hr(l,f,y){return typeof l=="string"?(l=encodeURI(l).replace(f,fl),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function fl(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Cs=/[#\/\?@]/g,pl=/[#\?:]/g,ml=/[#\?]/g,gl=/[#\?@]/g,Wo=/#/g;function Kn(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Nt(l){l.g||(l.g=new Map,l.h=0,l.i&&wc(l.i,function(f,y){l.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}i=Kn.prototype,i.add=function(l,f){Nt(this),this.i=null,l=yn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(f),this.h+=1,this};function Dn(l,f){Nt(l),f=yn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function bn(l,f){return Nt(l),f=yn(l,f),l.g.has(f)}i.forEach=function(l,f){Nt(this),this.g.forEach(function(y,w){y.forEach(function(L){l.call(f,L,w,this)},this)},this)},i.na=function(){Nt(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let w=0;w<f.length;w++){const L=l[w];for(let B=0;B<L.length;B++)y.push(f[w])}return y},i.V=function(l){Nt(this);let f=[];if(typeof l=="string")bn(this,l)&&(f=f.concat(this.g.get(yn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)f=f.concat(l[y])}return f},i.set=function(l,f){return Nt(this),this.i=null,l=yn(this,l),bn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},i.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Wr(l,f,y){Dn(l,f),0<y.length&&(l.i=null,l.g.set(yn(l,f),W(y)),l.h+=y.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var w=f[y];const B=encodeURIComponent(String(w)),te=this.V(w);for(w=0;w<te.length;w++){var L=B;te[w]!==""&&(L+="="+encodeURIComponent(String(te[w]))),l.push(L)}}return this.i=l.join("&")};function yn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Qn(l,f){f&&!l.j&&(Nt(l),l.i=null,l.g.forEach(function(y,w){var L=w.toLowerCase();w!=L&&(Dn(this,w),Wr(this,L,y))},l)),l.j=f}function Ec(l,f){const y=new Di;if(m.Image){const w=new Image;w.onload=U(Yt,y,"TestLoadImage: loaded",!0,f,w),w.onerror=U(Yt,y,"TestLoadImage: error",!1,f,w),w.onabort=U(Yt,y,"TestLoadImage: abort",!1,f,w),w.ontimeout=U(Yt,y,"TestLoadImage: timeout",!1,f,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else f(!1)}function yl(l,f){const y=new Di,w=new AbortController,L=setTimeout(()=>{w.abort(),Yt(y,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:w.signal}).then(B=>{clearTimeout(L),B.ok?Yt(y,"TestPingServer: ok",!0,f):Yt(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Yt(y,"TestPingServer: error",!1,f)})}function Yt(l,f,y,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(y)}catch{}}function Tc(){this.g=new Lo}function vl(l,f,y){const w=y||"";try{Ur(l,function(L,B){let te=L;v(L)&&(te=Oo(L)),f.push(w+B+"="+encodeURIComponent(te))})}catch(L){throw f.push(w+"type="+encodeURIComponent("_badmap")),L}}function yr(l){this.l=l.Ub||null,this.j=l.eb||!1}H(yr,Pi),yr.prototype.g=function(){return new ji(this.l,this.j)},yr.prototype.i=(function(l){return function(){return l}})({});function ji(l,f){vt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(ji,vt),i=ji.prototype,i.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Vn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,On(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Vn(this)),this.g&&(this.readyState=3,Vn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_l(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function _l(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?On(this):Vn(this),this.readyState==3&&_l(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,On(this))},i.Qa=function(l){this.g&&(this.response=l,On(this))},i.ga=function(){this.g&&On(this)};function On(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Vn(l)}i.setRequestHeader=function(l,f){this.u.append(l,f)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=f.next();return l.join(`\r
`)};function Vn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function vr(l){let f="";return Ie(l,function(y,w){f+=w,f+=":",f+=y,f+=`\r
`}),f}function qr(l,f,y){e:{for(w in y){var w=!1;break e}w=!0}w||(y=vr(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):Ge(l,f,y))}function et(l){vt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(et,vt);var Ic=/^https?$/i,qo=["POST","PUT"];i=et.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,f,y,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pn.g(),this.v=this.o?vs(this.o):vs(Pn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(B){Ui(this,B);return}if(l=y||"",y=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)y.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const B of w.keys())y.set(B,w.get(B));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),L=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(qo,f,void 0))||w||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,te]of y)this.g.setRequestHeader(B,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ps(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){Ui(this,B)}};function Ui(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Rs(l),un(l)}function Rs(l){l.A||(l.A=!0,_t(l,"complete"),_t(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,_t(this,"complete"),_t(this,"abort"),un(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),et.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Go(this):this.bb())},i.bb=function(){Go(this)};function Go(l){if(l.h&&typeof h<"u"&&(!l.v[1]||Xt(l)!=4||l.Z()!=2)){if(l.u&&Xt(l)==4)No(l.Ea,0,l);else if(_t(l,"readystatechange"),Xt(l)==4){l.h=!1;try{const te=l.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var w;if(w=te===0){var L=String(l.D).match(Mi)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),w=!Ic.test(L?L.toLowerCase():"")}y=w}if(y)_t(l,"complete"),_t(l,"success");else{l.m=6;try{var B=2<Xt(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",Rs(l)}}finally{un(l)}}}}function un(l,f){if(l.g){Ps(l);const y=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||_t(l,"ready");try{y.onreadystatechange=w}catch{}}}function Ps(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function Xt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Vo(f)}};function Ko(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ns(l){const f={};l=(l.g&&2<=Xt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(ce(l[w]))continue;var y=b(l[w]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const B=f[L]||[];f[L]=B,B.push(y)}P(f,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(l,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||f}function Qo(l){this.Aa=0,this.i=[],this.j=new Di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yn("baseRetryDelayMs",5e3,l),this.cb=Yn("retryDelaySeedMs",1e4,l),this.Wa=Yn("forwardChannelMaxRetries",2,l),this.wa=Yn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Li(l&&l.concurrentRequestLimit),this.Da=new Tc,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Qo.prototype,i.la=8,i.G=1,i.connect=function(l,f,y,w){ct(0),this.W=l,this.H=f||{},y&&w!==void 0&&(this.H.OSID=y,this.H.OAID=w),this.F=this.X,this.I=Il(this,null,this.W),Xn(this)};function Dt(l){if(Ds(l),l.G==3){var f=l.U++,y=ln(l.I);if(Ge(y,"SID",l.K),Ge(y,"RID",f),Ge(y,"TYPE","terminate"),_r(l,y),f=new Nn(l,l.j,f),f.L=2,f.v=$r(ln(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=f.v,y=!0),y||(f.g=Sl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ke(f)}Tl(l)}function Ln(l){l.g&&(Yo(l),l.g.cancel(),l.g=null)}function Ds(l){Ln(l),l.u&&(m.clearTimeout(l.u),l.u=null),Vs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Xn(l){if(!an(l.h)&&!l.s){l.s=!0;var f=l.Ga;ee||ie(),Y||(ee(),Y=!0),oe.add(f,l),l.B=0}}function Sc(l,f){return cl(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Cn(x(l.Ga,l,f),El(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Nn(this,this.j,l);let B=this.o;if(this.S&&(B?(B=I(B),N(B,this.S)):B=this.S),this.m!==null||this.O||(L.H=B,B=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var w=this.i[y];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=Gr(this,L,f),y=ln(this.I),Ge(y,"RID",l),Ge(y,"CVER",22),this.D&&Ge(y,"X-HTTP-Session-Id",this.D),_r(this,y),B&&(this.O?f="headers="+encodeURIComponent(String(vr(B)))+"&"+f:this.m&&qr(y,this.m,B)),Ho(this.h,L),this.Ua&&Ge(y,"TYPE","init"),this.P?(Ge(y,"$req",f),Ge(y,"SID","null"),L.T=!0,As(L,y,null)):As(L,y,f),this.G=2}}else this.G==3&&(l?bs(this,l):this.i.length==0||an(this.h)||bs(this))};function bs(l,f){var y;f?y=f.l:y=l.U++;const w=ln(l.I);Ge(w,"SID",l.K),Ge(w,"RID",y),Ge(w,"AID",l.T),_r(l,w),l.m&&l.o&&qr(w,l.m,l.o),y=new Nn(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Gr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ho(l.h,y),As(y,w,f)}function _r(l,f){l.H&&Ie(l.H,function(y,w){Ge(f,w,y)}),l.l&&Ur({},function(y,w){Ge(f,w,y)})}function Gr(l,f,y){y=Math.min(l.i.length,y);var w=l.l?x(l.l.Na,l.l,l):null;e:{var L=l.i;let B=-1;for(;;){const te=["count="+y];B==-1?0<y?(B=L[0].g,te.push("ofs="+B)):B=0:te.push("ofs="+B);let We=!0;for(let wt=0;wt<y;wt++){let Fe=L[wt].g;const At=L[wt].map;if(Fe-=B,0>Fe)B=Math.max(0,L[wt].g-100),We=!1;else try{vl(At,te,"req"+Fe+"_")}catch{w&&w(At)}}if(We){w=te.join("&");break e}}}return l=l.i.splice(0,y),f.D=l,w}function Bi(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;ee||ie(),Y||(ee(),Y=!0),oe.add(f,l),l.v=0}}function Os(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Cn(x(l.Fa,l),El(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,wl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Cn(x(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),Ln(this),wl(this))};function Yo(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function wl(l){l.g=new Nn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=ln(l.qa);Ge(f,"RID","rpc"),Ge(f,"SID",l.K),Ge(f,"AID",l.T),Ge(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ge(f,"TO",l.ja),Ge(f,"TYPE","xmlhttp"),_r(l,f),l.m&&l.o&&qr(f,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=$r(ln(f)),y.m=null,y.P=!0,zo(y,l)}i.Za=function(){this.C!=null&&(this.C=null,Ln(this),Os(this),ct(19))};function Vs(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function Ls(l,f){var y=null;if(l.g==f){Vs(l),Yo(l),l.g=null;var w=2}else if(qt(l.h,f))y=f.D,hl(l.h,f),w=1;else return;if(l.G!=0){if(f.o)if(w==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var L=l.B;w=Ni(),_t(w,new Es(w,y)),Xn(l)}else Bi(l);else if(L=f.s,L==3||L==0&&0<f.X||!(w==1&&Sc(l,f)||w==2&&Os(l)))switch(y&&0<y.length&&(f=l.h,f.i=f.i.concat(y)),L){case 1:wr(l,5);break;case 4:wr(l,10);break;case 3:wr(l,6);break;default:wr(l,2)}}}function El(l,f){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*f}function wr(l,f){if(l.j.info("Error code "+f),f==2){var y=x(l.fb,l),w=l.Xa;const L=!w;w=new gr(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Fi(w,"https"),$r(w),L?Ec(w.toString(),y):yl(w.toString(),y)}else ct(2);l.G=0,l.l&&l.l.sa(f),Tl(l),Ds(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Tl(l){if(l.G=0,l.ka=[],l.l){const f=dl(l.h);(f.length!=0||l.i.length!=0)&&(z(l.ka,f),z(l.ka,l.i),l.h.i.length=0,W(l.i),l.i.length=0),l.l.ra()}}function Il(l,f,y){var w=y instanceof gr?ln(y):new gr(y);if(w.g!="")f&&(w.g=f+"."+w.g),Br(w,w.s);else{var L=m.location;w=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var B=new gr(null);w&&Fi(B,w),f&&(B.g=f),L&&Br(B,L),y&&(B.l=y),w=B}return y=l.D,f=l.ya,y&&f&&Ge(w,y,f),Ge(w,"VER",l.la),_r(l,w),w}function Sl(l,f,y){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new et(new yr({eb:y})):new et(l.pa),f.Ha(l.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xo(){}i=Xo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ms(){}Ms.prototype.g=function(l,f){return new Gt(l,f)};function Gt(l,f){vt.call(this),this.g=new Qo(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ce(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ce(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Jn(this)}H(Gt,vt),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Dt(this.g)},Gt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=Oo(l),l=y);f.i.push(new ul(f.Ya++,l)),f.G==3&&Xn(f)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Dt(this.g),delete this.g,Gt.aa.N.call(this)};function Al(l){qn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const y in f){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}H(Al,qn);function xl(){ws.call(this),this.status=1}H(xl,ws);function Jn(l){this.g=l}H(Jn,Xo),Jn.prototype.ua=function(){_t(this.g,"a")},Jn.prototype.ta=function(l){_t(this.g,new Al(l))},Jn.prototype.sa=function(l){_t(this.g,new xl)},Jn.prototype.ra=function(){_t(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,yv=function(){return new Ms},gv=function(){return Ni()},mv=Gn,gd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Is.NO_ERROR=0,Is.TIMEOUT=8,Is.HTTP_ERROR=6,Pu=Is,sl.COMPLETE="complete",pv=sl,_s.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",vt.prototype.listen=vt.prototype.K,Sa=_s,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,fv=et}).apply(typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{});const wg="@firebase/firestore",Eg="4.8.0";class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");let So="11.10.0";const ls=new Od("@firebase/firestore");function so(){return ls.logLevel}function le(i,...e){if(ls.logLevel<=Oe.DEBUG){const t=e.map(qd);ls.debug(`Firestore (${So}): ${i}`,...t)}}function Vr(i,...e){if(ls.logLevel<=Oe.ERROR){const t=e.map(qd);ls.error(`Firestore (${So}): ${i}`,...t)}}function _i(i,...e){if(ls.logLevel<=Oe.WARN){const t=e.map(qd);ls.warn(`Firestore (${So}): ${i}`,...t)}}function qd(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function Te(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,vv(i,s,t)}function vv(i,e,t){let s=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Vr(s),new Error(s)}function $e(i,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,i||vv(e,o,s)}function xe(i,e){return i}const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Mr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class _v{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($t.UNAUTHENTICATED)))}shutdown(){}}class nI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rI{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let u=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new vi,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new vi)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new _v(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class iI{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sI{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new iI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Tg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const s=u=>{u.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,le("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Tg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Tg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function aI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}function wv(){return new TextEncoder}class Gd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=aI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function Pe(i,e){return i<e?-1:i>e?1:0}function yd(i,e){let t=0;for(;t<i.length&&t<e.length;){const s=i.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Pe(s,o);{const u=wv(),h=lI(u.encode(Ig(i,t)),u.encode(Ig(e,t)));return h!==0?h:Pe(s,o)}}t+=s>65535?2:1}return Pe(i.length,e.length)}function Ig(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function lI(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Pe(i[t],e[t]);return Pe(i.length,e.length)}function go(i,e,t){return i.length===e.length&&i.every(((s,o)=>t(s,e[o])))}const Sg="__name__";class rr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return rr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=rr.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Pe(e.length,t.length)}static compareSegments(e,t){const s=rr.isNumericId(e),o=rr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?rr.extractNumericId(e).compare(rr.extractNumericId(t)):yd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yi.fromString(e.substring(4,e.length-2))}}class it extends rr{construct(e,t,s){return new it(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new it(t)}static emptyPath(){return new it([])}}const uI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends rr{construct(e,t,s){return new Lt(e,t,s)}static isValidIdentifier(e){return uI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sg}static keyField(){return new Lt([Sg])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ge(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ge(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new ge(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(it.fromString(e))}static fromName(e){return new we(it.fromString(e).popFirst(5))}static empty(){return new we(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new it(e.slice()))}}function cI(i,e,t){if(!t)throw new ge(Q.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function hI(i,e,t,s){if(e===!0&&s===!0)throw new ge(Q.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Ag(i){if(!we.isDocumentKey(i))throw new ge(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ev(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Kd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Te(12329,{type:typeof i})}function Fa(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ge(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kd(i);throw new ge(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function yt(i,e){const t={typeString:i};return e&&(t.value=e),t}function Za(i,e){if(!Ev(i))throw new ge(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){t=`JSON missing required field: '${s}'`;break}const h=i[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){t=`Expected '${s}' field to equal '${u.value}'`;break}}if(t)throw new ge(Q.INVALID_ARGUMENT,t);return!0}const xg=-62135596800,kg=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*kg);return new Ze(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xg)throw new ge(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kg}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Za(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:yt("string",Ze._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Ze(0,0))}static max(){return new Ae(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ja=-1;function dI(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(s===1e9?new Ze(t+1,0):new Ze(t,s));return new wi(o,we.empty(),e)}function fI(i){return new wi(i.readTime,i.key,ja)}class wi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new wi(Ae.min(),we.empty(),ja)}static max(){return new wi(Ae.max(),we.empty(),ja)}}function pI(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(i.documentKey,e.documentKey),t!==0?t:Pe(i.largestBatchId,e.largestBatchId))}const mI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ao(i){if(i.code!==Q.FAILED_PRECONDITION||i.message!==mI)throw i;le("LocalStore","Unexpectedly lost primary lease")}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):q.reject(t)}static resolve(e){return new q(((t,s)=>{t(e)}))}static reject(e){return new q(((t,s)=>{s(e)}))}static waitFor(e){return new q(((t,s)=>{let o=0,u=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&t()}),(g=>s(g)))})),h=!0,u===o&&t()}))}static or(e){let t=q.resolve(!1);for(const s of e)t=t.next((o=>o?q.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,u)=>{s.push(t.call(this,o,u))})),this.waitFor(s)}static mapArray(e,t){return new q(((s,o)=>{const u=e.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const v=g;t(e[v]).next((T=>{h[v]=T,++m,m===u&&s(h)}),(T=>o(T)))}}))}static doWhile(e,t){return new q(((s,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):s()};u()}))}}function yI(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xo(i){return i.name==="IndexedDbTransactionError"}class oc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}oc.ue=-1;const Qd=-1;function ac(i){return i==null}function Hu(i){return i===0&&1/i==-1/0}function vI(i){return typeof i=="number"&&Number.isInteger(i)&&!Hu(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Tv="";function _I(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Cg(e)),e=wI(i.get(t),e);return Cg(e)}function wI(i,e){let t=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":t+="";break;case Tv:t+="";break;default:t+=u}}return t}function Cg(i){return i+Tv+""}function Rg(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function hs(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Iv(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class st{constructor(e,t){this.comparator=e,this.root=t||Vt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tu(this.root,e,this.comparator,!0)}}class Tu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Vt.RED,this.left=o??Vt.EMPTY,this.right=u??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Vt(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Vt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,o,u){return this}insert(e,t,s){return new Vt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class St{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pg(this.data.getIterator())}getIteratorFrom(e){return new Pg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class Pg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Hn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new St(Lt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Sv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Sv("Invalid base64 string: "+u):u}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const EI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(i){if($e(!!i,39018),typeof i=="string"){let e=0;const t=EI.exec(i);if($e(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dt(i.seconds),nanos:dt(i.nanos)}}function dt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ti(i){return typeof i=="string"?Mt.fromBase64String(i):Mt.fromUint8Array(i)}const Av="server_timestamp",xv="__type__",kv="__previous_value__",Cv="__local_write_time__";function Yd(i){var e,t;return((t=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{})[xv])===null||t===void 0?void 0:t.stringValue)===Av}function lc(i){const e=i.mapValue.fields[kv];return Yd(e)?lc(e):e}function Ua(i){const e=Ei(i.mapValue.fields[Cv].timestampValue);return new Ze(e.seconds,e.nanos)}class TI{constructor(e,t,s,o,u,h,m,g,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=T}}const Wu="(default)";class Ba{constructor(e,t){this.projectId=e,this.database=t||Wu}static empty(){return new Ba("","")}get isDefaultDatabase(){return this.database===Wu}isEqual(e){return e instanceof Ba&&e.projectId===this.projectId&&e.database===this.database}}const Rv="__type__",II="__max__",Iu={mapValue:{}},Pv="__vector__",qu="value";function Ii(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Yd(i)?4:AI(i)?9007199254740991:SI(i)?10:11:Te(28295,{value:i})}function cr(i,e){if(i===e)return!0;const t=Ii(i);if(t!==Ii(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ua(i).isEqual(Ua(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Ei(o.timestampValue),m=Ei(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Ti(o.bytesValue).isEqual(Ti(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return dt(o.geoPointValue.latitude)===dt(u.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return dt(o.integerValue)===dt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=dt(o.doubleValue),m=dt(u.doubleValue);return h===m?Hu(h)===Hu(m):isNaN(h)&&isNaN(m)}return!1})(i,e);case 9:return go(i.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Rg(h)!==Rg(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!cr(h[g],m[g])))return!1;return!0})(i,e);default:return Te(52216,{left:i})}}function za(i,e){return(i.values||[]).find((t=>cr(t,e)))!==void 0}function yo(i,e){if(i===e)return 0;const t=Ii(i),s=Ii(e);if(t!==s)return Pe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(i.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=dt(u.integerValue||u.doubleValue),g=dt(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return Ng(i.timestampValue,e.timestampValue);case 4:return Ng(Ua(i),Ua(e));case 5:return yd(i.stringValue,e.stringValue);case 6:return(function(u,h){const m=Ti(u),g=Ti(h);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let v=0;v<m.length&&v<g.length;v++){const T=Pe(m[v],g[v]);if(T!==0)return T}return Pe(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=Pe(dt(u.latitude),dt(h.latitude));return m!==0?m:Pe(dt(u.longitude),dt(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Dg(i.arrayValue,e.arrayValue);case 10:return(function(u,h){var m,g,v,T;const A=u.fields||{},x=h.fields||{},U=(m=A[qu])===null||m===void 0?void 0:m.arrayValue,H=(g=x[qu])===null||g===void 0?void 0:g.arrayValue,W=Pe(((v=U?.values)===null||v===void 0?void 0:v.length)||0,((T=H?.values)===null||T===void 0?void 0:T.length)||0);return W!==0?W:Dg(U,H)})(i.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Iu.mapValue&&h===Iu.mapValue)return 0;if(u===Iu.mapValue)return 1;if(h===Iu.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),v=h.fields||{},T=Object.keys(v);g.sort(),T.sort();for(let A=0;A<g.length&&A<T.length;++A){const x=yd(g[A],T[A]);if(x!==0)return x;const U=yo(m[g[A]],v[T[A]]);if(U!==0)return U}return Pe(g.length,T.length)})(i.mapValue,e.mapValue);default:throw Te(23264,{le:t})}}function Ng(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Pe(i,e);const t=Ei(i),s=Ei(e),o=Pe(t.seconds,s.seconds);return o!==0?o:Pe(t.nanos,s.nanos)}function Dg(i,e){const t=i.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=yo(t[o],s[o]);if(u)return u}return Pe(t.length,s.length)}function vo(i){return vd(i)}function vd(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const s=Ei(t);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Ti(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return we.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=vd(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${vd(t.fields[h])}`;return o+"}"})(i.mapValue):Te(61005,{value:i})}function Nu(i){switch(Ii(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lc(i);return e?16+Nu(e):16;case 5:return 2*i.stringValue.length;case 6:return Ti(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Nu(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return hs(s.fields,((u,h)=>{o+=u.length+Nu(h)})),o})(i.mapValue);default:throw Te(13486,{value:i})}}function _d(i){return!!i&&"integerValue"in i}function Xd(i){return!!i&&"arrayValue"in i}function bg(i){return!!i&&"nullValue"in i}function Og(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Du(i){return!!i&&"mapValue"in i}function SI(i){var e,t;return((t=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Rv])===null||t===void 0?void 0:t.stringValue)===Pv}function Pa(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return hs(i.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Pa(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pa(i.arrayValue.values[t]);return e}return Object.assign({},i)}function AI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===II}class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Du(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pa(t)}setAll(e){let t=Lt.emptyPath(),s={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}h?s[m.lastSegment()]=Pa(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());Du(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Du(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){hs(t,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new xn(Pa(this.value))}}function Nv(i){const e=[];return hs(i.fields,((t,s)=>{const o=new Lt([t]);if(Du(s)){const u=Nv(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Hn(e)}class Ht{constructor(e,t,s,o,u,h,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ht(e,0,Ae.min(),Ae.min(),Ae.min(),xn.empty(),0)}static newFoundDocument(e,t,s,o){return new Ht(e,1,t,Ae.min(),s,o,0)}static newNoDocument(e,t){return new Ht(e,2,t,Ae.min(),Ae.min(),xn.empty(),0)}static newUnknownDocument(e,t){return new Ht(e,3,t,Ae.min(),Ae.min(),xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gu{constructor(e,t){this.position=e,this.inclusive=t}}function Vg(i,e,t){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=we.comparator(we.fromName(h.referenceValue),t.key):s=yo(h,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Lg(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!cr(i.position[t],e.position[t]))return!1;return!0}class Ku{constructor(e,t="asc"){this.field=e,this.dir=t}}function xI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Dv{}class It extends Dv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new CI(e,t,s):t==="array-contains"?new NI(e,s):t==="in"?new DI(e,s):t==="not-in"?new bI(e,s):t==="array-contains-any"?new OI(e,s):new It(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new RI(e,s):new PI(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(yo(t,this.value)):t!==null&&Ii(this.value)===Ii(t)&&this.matchesComparison(yo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends Dv{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new hr(e,t)}matches(e){return bv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function bv(i){return i.op==="and"}function Ov(i){return kI(i)&&bv(i)}function kI(i){for(const e of i.filters)if(e instanceof hr)return!1;return!0}function wd(i){if(i instanceof It)return i.field.canonicalString()+i.op.toString()+vo(i.value);if(Ov(i))return i.filters.map((e=>wd(e))).join(",");{const e=i.filters.map((t=>wd(t))).join(",");return`${i.op}(${e})`}}function Vv(i,e){return i instanceof It?(function(s,o){return o instanceof It&&s.op===o.op&&s.field.isEqual(o.field)&&cr(s.value,o.value)})(i,e):i instanceof hr?(function(s,o){return o instanceof hr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,m)=>u&&Vv(h,o.filters[m])),!0):!1})(i,e):void Te(19439)}function Lv(i){return i instanceof It?(function(t){return`${t.field.canonicalString()} ${t.op} ${vo(t.value)}`})(i):i instanceof hr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Lv).join(" ,")+"}"})(i):"Filter"}class CI extends It{constructor(e,t,s){super(e,t,s),this.key=we.fromName(s.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class RI extends It{constructor(e,t){super(e,"in",t),this.keys=Mv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class PI extends It{constructor(e,t){super(e,"not-in",t),this.keys=Mv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Mv(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>we.fromName(s.referenceValue)))}class NI extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xd(t)&&za(t.arrayValue,this.value)}}class DI extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&za(this.value.arrayValue,t)}}class bI extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!za(this.value.arrayValue,t)}}class OI extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>za(this.value.arrayValue,s)))}}class VI{constructor(e,t=null,s=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Pe=null}}function Mg(i,e=null,t=[],s=[],o=null,u=null,h=null){return new VI(i,e,t,s,o,u,h)}function Jd(i){const e=xe(i);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>wd(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),ac(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>vo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>vo(s))).join(",")),e.Pe=t}return e.Pe}function Zd(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!xI(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Vv(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Lg(i.startAt,e.startAt)&&Lg(i.endAt,e.endAt)}function Ed(i){return we.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class uc{constructor(e,t=null,s=[],o=[],u=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function LI(i,e,t,s,o,u,h,m){return new uc(i,e,t,s,o,u,h,m)}function ef(i){return new uc(i)}function Fg(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function MI(i){return i.collectionGroup!==null}function Na(i){const e=xe(i);if(e.Te===null){e.Te=[];const t=new Set;for(const u of e.explicitOrderBy)e.Te.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new St(Lt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Te.push(new Ku(u,s))})),t.has(Lt.keyField().canonicalString())||e.Te.push(new Ku(Lt.keyField(),s))}return e.Te}function or(i){const e=xe(i);return e.Ie||(e.Ie=FI(e,Na(i))),e.Ie}function FI(i,e){if(i.limitType==="F")return Mg(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Ku(o.field,u)}));const t=i.endAt?new Gu(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Gu(i.startAt.position,i.startAt.inclusive):null;return Mg(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function Td(i,e,t){return new uc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function cc(i,e){return Zd(or(i),or(e))&&i.limitType===e.limitType}function Fv(i){return`${Jd(or(i))}|lt:${i.limitType}`}function oo(i){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Lv(o))).join(", ")}]`),ac(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>vo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>vo(o))).join(",")),`Target(${s})`})(or(i))}; limitType=${i.limitType})`}function hc(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):we.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of Na(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(h,m,g){const v=Vg(h,m,g);return h.inclusive?v<=0:v<0})(s.startAt,Na(s),o)||s.endAt&&!(function(h,m,g){const v=Vg(h,m,g);return h.inclusive?v>=0:v>0})(s.endAt,Na(s),o))})(i,e)}function jI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function jv(i){return(e,t)=>{let s=!1;for(const o of Na(i)){const u=UI(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function UI(i,e,t){const s=i.field.isKeyField()?we.comparator(e.key,t.key):(function(u,h,m){const g=h.data.field(u),v=m.data.field(u);return g!==null&&v!==null?yo(g,v):Te(42886)})(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:i.dir})}}class ds{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){hs(this.inner,((t,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return Iv(this.inner)}size(){return this.innerSize}}const BI=new st(we.comparator);function Lr(){return BI}const Uv=new st(we.comparator);function Aa(...i){let e=Uv;for(const t of i)e=e.insert(t.key,t);return e}function Bv(i){let e=Uv;return i.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ns(){return Da()}function zv(){return Da()}function Da(){return new ds((i=>i.toString()),((i,e)=>i.isEqual(e)))}const zI=new st(we.comparator),$I=new St(we.comparator);function Ve(...i){let e=$I;for(const t of i)e=e.add(t);return e}const HI=new St(Pe);function WI(){return HI}function tf(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(e)?"-0":e}}function $v(i){return{integerValue:""+i}}function qI(i,e){return vI(e)?$v(e):tf(i,e)}class dc{constructor(){this._=void 0}}function GI(i,e,t){return i instanceof $a?(function(o,u){const h={fields:{[xv]:{stringValue:Av},[Cv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Yd(u)&&(u=lc(u)),u&&(h.fields[kv]=u),{mapValue:h}})(t,e):i instanceof Ha?Wv(i,e):i instanceof Wa?qv(i,e):(function(o,u){const h=Hv(o,u),m=jg(h)+jg(o.Ee);return _d(h)&&_d(o.Ee)?$v(m):tf(o.serializer,m)})(i,e)}function KI(i,e,t){return i instanceof Ha?Wv(i,e):i instanceof Wa?qv(i,e):t}function Hv(i,e){return i instanceof Qu?(function(s){return _d(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class $a extends dc{}class Ha extends dc{constructor(e){super(),this.elements=e}}function Wv(i,e){const t=Gv(e);for(const s of i.elements)t.some((o=>cr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Wa extends dc{constructor(e){super(),this.elements=e}}function qv(i,e){let t=Gv(e);for(const s of i.elements)t=t.filter((o=>!cr(o,s)));return{arrayValue:{values:t}}}class Qu extends dc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function jg(i){return dt(i.integerValue||i.doubleValue)}function Gv(i){return Xd(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class QI{constructor(e,t){this.field=e,this.transform=t}}function YI(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Ha&&o instanceof Ha||s instanceof Wa&&o instanceof Wa?go(s.elements,o.elements,cr):s instanceof Qu&&o instanceof Qu?cr(s.Ee,o.Ee):s instanceof $a&&o instanceof $a})(i.transform,e.transform)}class XI{constructor(e,t){this.version=e,this.transformResults=t}}class Dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bu(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class fc{}function Kv(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Yv(i.key,Dr.none()):new el(i.key,i.data,Dr.none());{const t=i.data,s=xn.empty();let o=new St(Lt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new fs(i.key,s,new Hn(o.toArray()),Dr.none())}}function JI(i,e,t){i instanceof el?(function(o,u,h){const m=o.value.clone(),g=Bg(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(i,e,t):i instanceof fs?(function(o,u,h){if(!bu(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=Bg(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(Qv(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(i,e,t):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function ba(i,e,t,s){return i instanceof el?(function(u,h,m,g){if(!bu(u.precondition,h))return m;const v=u.value.clone(),T=zg(u.fieldTransforms,g,h);return v.setAll(T),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(i,e,t,s):i instanceof fs?(function(u,h,m,g){if(!bu(u.precondition,h))return m;const v=zg(u.fieldTransforms,g,h),T=h.data;return T.setAll(Qv(u)),T.setAll(v),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(i,e,t,s):(function(u,h,m){return bu(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(i,e,t)}function ZI(i,e){let t=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=Hv(s.transform,o||null);u!=null&&(t===null&&(t=xn.empty()),t.set(s.field,u))}return t||null}function Ug(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&go(s,o,((u,h)=>YI(u,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class el extends fc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fs extends fc{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Qv(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}})),e}function Bg(i,e,t){const s=new Map;$e(i.length===t.length,32656,{Ae:t.length,Re:i.length});for(let o=0;o<t.length;o++){const u=i[o],h=u.transform,m=e.data.field(u.field);s.set(u.field,KI(h,m,t[o]))}return s}function zg(i,e,t){const s=new Map;for(const o of i){const u=o.transform,h=t.data.field(o.field);s.set(o.field,GI(u,h,e))}return s}class Yv extends fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eS extends fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tS{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&JI(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ba(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ba(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=zv();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(o.key)?null:m;const g=Kv(h,m);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,((t,s)=>Ug(t,s)))&&go(this.baseMutations,e.baseMutations,((t,s)=>Ug(t,s)))}}class nf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){$e(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let o=(function(){return zI})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new nf(e,t,s,o)}}class nS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class rS{constructor(e,t){this.count=e,this.unchangedNames=t}}var gt,je;function iS(i){switch(i){case Q.OK:return Te(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return Te(15467,{code:i})}}function Xv(i){if(i===void 0)return Vr("GRPC error has no .code"),Q.UNKNOWN;switch(i){case gt.OK:return Q.OK;case gt.CANCELLED:return Q.CANCELLED;case gt.UNKNOWN:return Q.UNKNOWN;case gt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case gt.INTERNAL:return Q.INTERNAL;case gt.UNAVAILABLE:return Q.UNAVAILABLE;case gt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case gt.NOT_FOUND:return Q.NOT_FOUND;case gt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case gt.ABORTED:return Q.ABORTED;case gt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case gt.DATA_LOSS:return Q.DATA_LOSS;default:return Te(39323,{code:i})}}(je=gt||(gt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";const sS=new yi([4294967295,4294967295],0);function $g(i){const e=wv().encode(i),t=new dv;return t.update(e),new Uint8Array(t.digest())}function Hg(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new yi([t,s],0),new yi([o,u],0)]}class rf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new xa(`Invalid padding: ${t}`);if(s<0)throw new xa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new xa(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new xa(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=yi.fromNumber(this.fe)}pe(e,t,s){let o=e.add(t.multiply(yi.fromNumber(s)));return o.compare(sS)===1&&(o=new yi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=$g(e),[s,o]=Hg(t);for(let u=0;u<this.hashCount;u++){const h=this.pe(s,o,u);if(!this.ye(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new rf(u,o,t);return s.forEach((m=>h.insert(m))),h}insert(e){if(this.fe===0)return;const t=$g(e),[s,o]=Hg(t);for(let u=0;u<this.hashCount;u++){const h=this.pe(s,o,u);this.we(h)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class pc{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,tl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new pc(Ae.min(),o,new st(Pe),Lr(),Ve())}}class tl{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new tl(s,t,Ve(),Ve(),Ve())}}class Ou{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=o}}class Jv{constructor(e,t){this.targetId=e,this.De=t}}class Zv{constructor(e,t,s=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Wg{constructor(){this.ve=0,this.Ce=qg(),this.Fe=Mt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ve(),t=Ve(),s=Ve();return this.Ce.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:u})}})),new tl(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=qg()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class oS{constructor(e){this.We=e,this.Ge=new Map,this.ze=Lr(),this.je=Su(),this.Je=Su(),this.He=new st(Pe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((s,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,s=e.De.count,o=this.st(t);if(o){const u=o.target;if(Ed(u))if(s===0){const h=new we(u.path);this.Xe(t,h,Ht.newNoDocument(h,Ae.min()))}else $e(s===1,20013,{expectedCount:s});else{const h=this.ot(t);if(h!==s){const m=this._t(e),g=m?this.ut(m,e,h):1;if(g!==0){this.rt(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let h,m;try{h=Ti(s).toUint8Array()}catch(g){if(g instanceof Sv)return _i("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new rf(h,o,u)}catch(g){return _i(g instanceof xa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.fe===0?null:m}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let o=0;return s.forEach((u=>{const h=this.We.lt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Xe(t,u,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((u,h)=>{const m=this.st(h);if(m){if(u.current&&Ed(m.target)){const g=new we(m.target.path);this.Tt(g).has(h)||this.It(h,g)||this.Xe(h,g,Ht.newNoDocument(g,e))}u.Ne&&(t.set(h,u.Le()),u.ke())}}));let s=Ve();this.Je.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const v=this.st(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.ze.forEach(((u,h)=>h.setReadTime(e)));const o=new pc(e,t,this.He,this.ze,s);return this.ze=Lr(),this.je=Su(),this.Je=Su(),this.He=new st(Pe),o}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Wg,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new St(Pe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new St(Pe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Wg),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Su(){return new st(we.comparator)}function qg(){return new st(we.comparator)}const aS={asc:"ASCENDING",desc:"DESCENDING"},lS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uS={and:"AND",or:"OR"};class cS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Id(i,e){return i.useProto3Json||ac(e)?e:{value:e}}function Yu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e_(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function hS(i,e){return Yu(i,e.toTimestamp())}function ar(i){return $e(!!i,49232),Ae.fromTimestamp((function(t){const s=Ei(t);return new Ze(s.seconds,s.nanos)})(i))}function sf(i,e){return Sd(i,e).canonicalString()}function Sd(i,e){const t=(function(o){return new it(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function t_(i){const e=it.fromString(i);return $e(o_(e),10190,{key:e.toString()}),e}function Ad(i,e){return sf(i.databaseId,e.path)}function nd(i,e){const t=t_(e);if(t.get(1)!==i.databaseId.projectId)throw new ge(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ge(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new we(r_(t))}function n_(i,e){return sf(i.databaseId,e)}function dS(i){const e=t_(i);return e.length===4?it.emptyPath():r_(e)}function xd(i){return new it(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function r_(i){return $e(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Gg(i,e,t){return{name:Ad(i,e),fields:t.value.mapValue.fields}}function fS(i,e){let t;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Te(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(v,T){return v.useProto3Json?($e(T===void 0||typeof T=="string",58123),Mt.fromBase64String(T||"")):($e(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Mt.fromUint8Array(T||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(v){const T=v.code===void 0?Q.UNKNOWN:Xv(v.code);return new ge(T,v.message||"")})(h);t=new Zv(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=nd(i,s.document.name),u=ar(s.document.updateTime),h=s.document.createTime?ar(s.document.createTime):Ae.min(),m=new xn({mapValue:{fields:s.document.fields}}),g=Ht.newFoundDocument(o,u,h,m),v=s.targetIds||[],T=s.removedTargetIds||[];t=new Ou(v,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=nd(i,s.document),u=s.readTime?ar(s.readTime):Ae.min(),h=Ht.newNoDocument(o,u),m=s.removedTargetIds||[];t=new Ou([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=nd(i,s.document),u=s.removedTargetIds||[];t=new Ou([],u,o,null)}else{if(!("filter"in e))return Te(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new rS(o,u),m=s.targetId;t=new Jv(m,h)}}return t}function pS(i,e){let t;if(e instanceof el)t={update:Gg(i,e.key,e.value)};else if(e instanceof Yv)t={delete:Ad(i,e.key)};else if(e instanceof fs)t={update:Gg(i,e.key,e.data),updateMask:IS(e.fieldMask)};else{if(!(e instanceof eS))return Te(16599,{Rt:e.type});t={verify:Ad(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const m=h.transform;if(m instanceof $a)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ha)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Wa)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Qu)return{fieldPath:h.field.canonicalString(),increment:m.Ee};throw Te(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:hS(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Te(27497)})(i,e.precondition)),t}function mS(i,e){return i&&i.length>0?($e(e!==void 0,14353),i.map((t=>(function(o,u){let h=o.updateTime?ar(o.updateTime):ar(u);return h.isEqual(Ae.min())&&(h=ar(u)),new XI(h,o.transformResults||[])})(t,e)))):[]}function gS(i,e){return{documents:[n_(i,e.path)]}}function yS(i,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=n_(i,o);const u=(function(v){if(v.length!==0)return s_(hr.create(v,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(v){if(v.length!==0)return v.map((T=>(function(x){return{field:ao(x.field),direction:wS(x.dir)}})(T)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Id(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function vS(i){let e=dS(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){$e(s===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=(function(A){const x=i_(A);return x instanceof hr&&Ov(x)?x.getFilters():[x]})(t.where));let h=[];t.orderBy&&(h=(function(A){return A.map((x=>(function(H){return new Ku(lo(H.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(x)))})(t.orderBy));let m=null;t.limit&&(m=(function(A){let x;return x=typeof A=="object"?A.value:A,ac(x)?null:x})(t.limit));let g=null;t.startAt&&(g=(function(A){const x=!!A.before,U=A.values||[];return new Gu(U,x)})(t.startAt));let v=null;return t.endAt&&(v=(function(A){const x=!A.before,U=A.values||[];return new Gu(U,x)})(t.endAt)),LI(e,o,h,u,m,"F",g,v)}function _S(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function i_(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=lo(t.unaryFilter.field);return It.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=lo(t.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=lo(t.unaryFilter.field);return It.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=lo(t.unaryFilter.field);return It.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(i):i.fieldFilter!==void 0?(function(t){return It.create(lo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return hr.create(t.compositeFilter.filters.map((s=>i_(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(i):Te(30097,{filter:i})}function wS(i){return aS[i]}function ES(i){return lS[i]}function TS(i){return uS[i]}function ao(i){return{fieldPath:i.canonicalString()}}function lo(i){return Lt.fromServerFormat(i.fieldPath)}function s_(i){return i instanceof It?(function(t){if(t.op==="=="){if(Og(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NAN"}};if(bg(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Og(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NOT_NAN"}};if(bg(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(t.field),op:ES(t.op),value:t.value}}})(i):i instanceof hr?(function(t){const s=t.getFilters().map((o=>s_(o)));return s.length===1?s[0]:{compositeFilter:{op:TS(t.op),filters:s}}})(i):Te(54877,{filter:i})}function IS(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function o_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class fi{constructor(e,t,s,o,u=Ae.min(),h=Ae.min(),m=Mt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class SS{constructor(e){this.gt=e}}function AS(i){const e=vS({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Td(e,e.limit,"L"):e}class xS{constructor(){this.Dn=new kS}addToCollectionParentIndex(e,t){return this.Dn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(wi.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(wi.min())}updateCollectionGroup(e,t,s){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class kS{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new St(it.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new St(it.comparator)).toArray()}}const Kg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},a_=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(a_,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class _o{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new _o(0)}static ur(){return new _o(-1)}}const Qg="LruGarbageCollector",CS=1048576;function Yg([i,e],[t,s]){const o=Pe(i,t);return o===0?Pe(e,s):o}class RS{constructor(e){this.Tr=e,this.buffer=new St(Yg),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Yg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PS{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){le(Qg,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xo(t)?le(Qg,"Ignoring IndexedDB error during garbage collection: ",t):await Ao(t)}await this.Rr(3e5)}))}}class NS{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return q.resolve(oc.ue);const s=new RS(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Kg)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kg):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,o,u,h,m,g,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,h=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(s=A,m=Date.now(),this.removeTargets(e,s,t)))).next((A=>(u=A,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(v=Date.now(),so()<=Oe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-T}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(v-g)+`ms
Total Duration: ${v-T}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A}))))}}function DS(i,e){return new NS(i,e)}class bS{constructor(){this.changes=new ds((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?q.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class OS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class VS{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&ba(s.mutation,o,Hn.empty(),Ze.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ve()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ve()){const o=ns();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((u=>{let h=Aa();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=ns();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ve())))}populateOverlays(e,t,s){const o=[];return s.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,s,o){let u=Lr();const h=Da(),m=(function(){return Da()})();return t.forEach(((g,v)=>{const T=s.get(v.key);o.has(v.key)&&(T===void 0||T.mutation instanceof fs)?u=u.insert(v.key,v):T!==void 0?(h.set(v.key,T.mutation.getFieldMask()),ba(T.mutation,v,T.mutation.getFieldMask(),Ze.now())):h.set(v.key,Hn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((v,T)=>h.set(v,T))),t.forEach(((v,T)=>{var A;return m.set(v,new OS(T,(A=h.get(v))!==null&&A!==void 0?A:null))})),m)))}recalculateAndSaveOverlays(e,t){const s=Da();let o=new st(((h,m)=>h-m)),u=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((g=>{const v=t.get(g);if(v===null)return;let T=s.get(g)||Hn.empty();T=m.applyToLocalView(v,T),s.set(g,T);const A=(o.get(m.batchId)||Ve()).add(g);o=o.insert(m.batchId,A)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),v=g.key,T=g.value,A=zv();T.forEach((x=>{if(!u.has(x)){const U=Kv(t.get(x),s.get(x));U!==null&&A.set(x,U),u=u.add(x)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,A))}return q.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return we.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):MI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):q.resolve(ns());let m=ja,g=u;return h.next((v=>q.forEach(v,((T,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(T)?q.resolve():this.remoteDocumentCache.getEntry(e,T).next((x=>{g=g.insert(T,x)}))))).next((()=>this.populateOverlays(e,v,u))).next((()=>this.computeViews(e,g,v,Ve()))).next((T=>({batchId:m,changes:Bv(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((s=>{let o=Aa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let h=Aa();return this.indexManager.getCollectionParents(e,u).next((m=>q.forEach(m,(g=>{const v=(function(A,x){return new uc(x,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next((T=>{T.forEach(((A,x)=>{h=h.insert(A,x)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o)))).next((h=>{u.forEach(((g,v)=>{const T=v.getKey();h.get(T)===null&&(h=h.insert(T,Ht.newInvalidDocument(T)))}));let m=Aa();return h.forEach(((g,v)=>{const T=u.get(g);T!==void 0&&ba(T.mutation,v,Hn.empty(),Ze.now()),hc(t,v)&&(m=m.insert(g,v))})),m}))}}class LS{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return q.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ar(o.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:AS(o.bundledQuery),readTime:ar(o.readTime)}})(t)),q.resolve()}}class MS{constructor(){this.overlays=new st(we.comparator),this.kr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ns();return q.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,u)=>{this.wt(e,t,u)})),q.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.kr.delete(s)),q.resolve()}getOverlaysForCollection(e,t,s){const o=ns(),u=t.length+1,h=new we(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return q.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new st(((v,T)=>v-T));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let T=u.get(v.largestBatchId);T===null&&(T=ns(),u=u.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const m=ns(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,T)=>m.set(v,T))),!(m.size()>=o)););return q.resolve(m)}wt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new nS(t,s));let u=this.kr.get(t);u===void 0&&(u=Ve(),this.kr.set(t,u)),this.kr.set(t,u.add(s.key))}}class FS{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}class of{constructor(){this.qr=new St(Rt.Qr),this.$r=new St(Rt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new Rt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Rt(e,t))}Gr(e,t){e.forEach((s=>this.removeReference(s,t)))}zr(e){const t=new we(new it([])),s=new Rt(t,e),o=new Rt(t,e+1),u=[];return this.$r.forEachInRange([s,o],(h=>{this.Wr(h),u.push(h.key)})),u}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new we(new it([])),s=new Rt(t,e),o=new Rt(t,e+1);let u=Ve();return this.$r.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new Rt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Rt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return we.comparator(e.key,t.key)||Pe(e.Hr,t.Hr)}static Ur(e,t){return Pe(e.Hr,t.Hr)||we.comparator(e.key,t.key)}}class jS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new St(Rt.Qr)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new tS(u,t,s,o);this.mutationQueue.push(h);for(const m of o)this.Yr=this.Yr.add(new Rt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return q.resolve(h)}lookupMutationBatch(e,t){return q.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),u=o<0?0:o;return q.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Qd:this.er-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Rt(t,0),o=new Rt(t,Number.POSITIVE_INFINITY),u=[];return this.Yr.forEachInRange([s,o],(h=>{const m=this.Zr(h.Hr);u.push(m)})),q.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new St(Pe);return t.forEach((o=>{const u=new Rt(o,0),h=new Rt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([u,h],(m=>{s=s.add(m.Hr)}))})),q.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;we.isDocumentKey(u)||(u=u.child(""));const h=new Rt(new we(u),0);let m=new St(Pe);return this.Yr.forEachWhile((g=>{const v=g.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(m=m.add(g.Hr)),!0)}),h),q.resolve(this.ei(m))}ei(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){$e(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return q.forEach(t.mutations,(o=>{const u=new Rt(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,t){const s=new Rt(t,0),o=this.Yr.firstAfterOrEqual(s);return q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class US{constructor(e){this.ni=e,this.docs=(function(){return new st(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return q.resolve(s?s.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let s=Lr();return t.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Ht.newInvalidDocument(o))})),q.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=Lr();const h=t.path,m=new we(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:v,value:{document:T}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||pI(fI(T),s)<=0||(o.has(T.key)||hc(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return q.resolve(u)}getAllFromCollectionGroup(e,t,s,o){Te(9500)}ri(e,t){return q.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new BS(this)}getSize(e){return q.resolve(this.size)}}class BS extends bS{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)})),q.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class zS{constructor(e){this.persistence=e,this.ii=new ds((t=>Jd(t)),Zd),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new of,this.targetCount=0,this._i=_o.ar()}forEachTarget(e,t){return this.ii.forEach(((s,o)=>t(o))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),q.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new _o(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.hr(t),q.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.ii.forEach(((h,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.ii.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),q.waitFor(u).next((()=>o))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return q.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),q.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),q.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return q.resolve(s)}containsKey(e,t){return q.resolve(this.oi.containsKey(t))}}class l_{constructor(e,t){this.ai={},this.overlays={},this.ui=new oc(0),this.ci=!1,this.ci=!0,this.li=new FS,this.referenceDelegate=e(this),this.hi=new zS(this),this.indexManager=new xS,this.remoteDocumentCache=(function(o){return new US(o)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new SS(t),this.Ti=new LS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new jS(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){le("MemoryPersistence","Starting transaction:",e);const o=new $S(this.ui.next());return this.referenceDelegate.Ii(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,t){return q.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,t))))}}class $S extends gI{constructor(e){super(),this.currentSequenceNumber=e}}class af{constructor(e){this.persistence=e,this.Ai=new of,this.Ri=null}static Vi(e){return new af(e)}get mi(){if(this.Ri)return this.Ri;throw Te(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),q.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.mi.add(u.toString())))})).next((()=>s.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.mi,(s=>{const o=we.fromPath(s);return this.fi(e,o).next((u=>{u||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return q.or([()=>q.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Xu{constructor(e,t){this.persistence=e,this.gi=new ds((s=>_I(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=DS(this,t)}static Vi(e,t){return new Xu(e,t)}Ii(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}yr(e){let t=0;return this.gr(e,(s=>{t++})).next((()=>t))}gr(e,t){return q.forEach(this.gi,((s,o)=>this.Sr(e,s,o).next((u=>u?q.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ri(e,(h=>this.Sr(e,h,t).next((m=>{m||(s++,u.removeEntry(h,Ae.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),q.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),q.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nu(e.data.value)),t}Sr(e,t,s){return q.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return q.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class lf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=o}static Es(e,t){let s=Ve(),o=Ve();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new lf(e,t.fromCache,s,o)}}class HS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class WS{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return ww()?8:yI(Wt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.ps(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ys(e,t,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new HS;return this.ws(e,t,h).next((m=>{if(u.result=m,this.Rs)return this.Ss(e,t,h,m.size)}))})).next((()=>u.result))}Ss(e,t,s,o){return s.documentReadCount<this.Vs?(so()<=Oe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),q.resolve()):(so()<=Oe.DEBUG&&le("QueryEngine","Query:",oo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(so()<=Oe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(t))):q.resolve())}ps(e,t){if(Fg(t))return q.resolve(null);let s=or(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Td(t,null,"F"),s=or(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=Ve(...u);return this.gs.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const v=this.bs(t,m);return this.Ds(t,v,h,g.readTime)?this.ps(e,Td(t,null,"F")):this.vs(e,v,t,g)}))))})))))}ys(e,t,s,o){return Fg(t)||o.isEqual(Ae.min())?q.resolve(null):this.gs.getDocuments(e,s).next((u=>{const h=this.bs(t,u);return this.Ds(t,h,s,o)?q.resolve(null):(so()<=Oe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oo(t)),this.vs(e,h,t,dI(o,ja)).next((m=>m)))}))}bs(e,t){let s=new St(jv(e));return t.forEach(((o,u)=>{hc(e,u)&&(s=s.add(u))})),s}Ds(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ws(e,t,s){return so()<=Oe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",oo(t)),this.gs.getDocumentsMatchingQuery(e,t,wi.min(),s)}vs(e,t,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const uf="LocalStore",qS=3e8;class GS{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new st(Pe),this.Ms=new ds((u=>Jd(u)),Zd),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function KS(i,e,t,s){return new GS(i,e,t,s)}async function u_(i,e){const t=xe(i);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,t.Ns(e),t.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],m=[];let g=Ve();for(const v of o){h.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}for(const v of u){m.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}return t.localDocuments.getDocuments(s,g).next((v=>({Bs:v,removedBatchIds:h,addedBatchIds:m})))}))}))}function QS(i,e){const t=xe(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=t.Os.newChangeBuffer({trackRemovals:!0});return(function(m,g,v,T){const A=v.batch,x=A.keys();let U=q.resolve();return x.forEach((H=>{U=U.next((()=>T.getEntry(g,H))).next((W=>{const z=v.docVersions.get(H);$e(z!==null,48541),W.version.compareTo(z)<0&&(A.applyToRemoteDocument(W,v),W.isValidDocument()&&(W.setReadTime(v.commitVersion),T.addEntry(W)))}))})),U.next((()=>m.mutationQueue.removeMutationBatch(g,A)))})(t,s,e,u).next((()=>u.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Ve();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(g=g.add(m.batch.mutations[v].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function c_(i){const e=xe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function YS(i,e){const t=xe(i),s=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const m=[];e.targetChanges.forEach(((T,A)=>{const x=o.get(A);if(!x)return;m.push(t.hi.removeMatchingKeys(u,T.removedDocuments,A).next((()=>t.hi.addMatchingKeys(u,T.addedDocuments,A))));let U=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?U=U.withResumeToken(Mt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,s)),o=o.insert(A,U),(function(W,z,re){return W.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=qS?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(x,U,T)&&m.push(t.hi.updateTargetData(u,U))}));let g=Lr(),v=Ve();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(XS(u,h,e.documentUpdates).next((T=>{g=T.Ls,v=T.ks}))),!s.isEqual(Ae.min())){const T=t.hi.getLastRemoteSnapshotVersion(u).next((A=>t.hi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(T)}return q.waitFor(m).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,v))).next((()=>g))})).then((u=>(t.Fs=o,u)))}function XS(i,e,t){let s=Ve(),o=Ve();return t.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let h=Lr();return t.forEach(((m,g)=>{const v=u.get(m);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):le(uf,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",g.version)})),{Ls:h,ks:o}}))}function JS(i,e){const t=xe(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Qd),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function ZS(i,e){const t=xe(i);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.hi.getTargetData(s,e).next((u=>u?(o=u,q.resolve(o)):t.hi.allocateTargetId(s).next((h=>(o=new fi(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s}))}async function kd(i,e,t){const s=xe(i),o=s.Fs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!xo(h))throw h;le(uf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function Xg(i,e,t){const s=xe(i);let o=Ae.min(),u=Ve();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,v,T){const A=xe(g),x=A.Ms.get(T);return x!==void 0?q.resolve(A.Fs.get(x)):A.hi.getTargetData(v,T)})(s,h,or(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?u:Ve()))).next((m=>(eA(s,jI(e),m),{documents:m,qs:u})))))}function eA(i,e,t){let s=i.xs.get(e)||Ae.min();t.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.xs.set(e,s)}class Jg{constructor(){this.activeTargetIds=WI()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tA{constructor(){this.Fo=new Jg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Jg,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nA{xo(e){}shutdown(){}}const Zg="ConnectivityMonitor";class ey{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){le(Zg,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){le(Zg,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Au=null;function Cd(){return Au===null?Au=(function(){return 268435456+Math.round(2147483648*Math.random())})():Au++,"0x"+Au.toString(16)}const rd="RestConnection",rA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iA{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===Wu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,u){const h=Cd(),m=this.Go(e,t.toUriEncodedString());le(rd,`Sending RPC '${e}' ${h}:`,m,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,u);const{host:v}=new URL(m),T=Eo(v);return this.jo(e,m,g,s,T).then((A=>(le(rd,`Received RPC '${e}' ${h}: `,A),A)),(A=>{throw _i(rd,`RPC '${e}' ${h} failed with error: `,A,"url: ",m,"request:",s),A}))}Jo(e,t,s,o,u,h){return this.Wo(e,t,s,o,u)}zo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+So})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}Go(e,t){const s=rA[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}class sA{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const zt="WebChannelConnection";class oA extends iA{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,o,u){const h=Cd();return new Promise(((m,g)=>{const v=new fv;v.setWithCredentials(!0),v.listenOnce(pv.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Pu.NO_ERROR:const A=v.getResponseJson();le(zt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(A)),m(A);break;case Pu.TIMEOUT:le(zt,`RPC '${e}' ${h} timed out`),g(new ge(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Pu.HTTP_ERROR:const x=v.getStatus();if(le(zt,`RPC '${e}' ${h} failed with status:`,x,"response text:",v.getResponseText()),x>0){let U=v.getResponseJson();Array.isArray(U)&&(U=U[0]);const H=U?.error;if(H&&H.status&&H.message){const W=(function(re){const ce=re.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(ce)>=0?ce:Q.UNKNOWN})(H.status);g(new ge(W,H.message))}else g(new ge(Q.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new ge(Q.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{c_:e,streamId:h,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{le(zt,`RPC '${e}' ${h} completed.`)}}));const T=JSON.stringify(o);le(zt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",T,s,15)}))}P_(e,t,s){const o=Cd(),u=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=yv(),m=gv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const T=u.join("");le(zt,`Creating RPC '${e}' stream ${o}: ${T}`,g);const A=h.createWebChannel(T,g);this.T_(A);let x=!1,U=!1;const H=new sA({Ho:z=>{U?le(zt,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(x||(le(zt,`Opening RPC '${e}' stream ${o} transport.`),A.open(),x=!0),le(zt,`RPC '${e}' stream ${o} sending:`,z),A.send(z))},Yo:()=>A.close()}),W=(z,re,ce)=>{z.listen(re,(se=>{try{ce(se)}catch(pe){setTimeout((()=>{throw pe}),0)}}))};return W(A,Sa.EventType.OPEN,(()=>{U||(le(zt,`RPC '${e}' stream ${o} transport opened.`),H.s_())})),W(A,Sa.EventType.CLOSE,(()=>{U||(U=!0,le(zt,`RPC '${e}' stream ${o} transport closed`),H.__(),this.I_(A))})),W(A,Sa.EventType.ERROR,(z=>{U||(U=!0,_i(zt,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),H.__(new ge(Q.UNAVAILABLE,"The operation could not be completed")))})),W(A,Sa.EventType.MESSAGE,(z=>{var re;if(!U){const ce=z.data[0];$e(!!ce,16349);const se=ce,pe=se?.error||((re=se[0])===null||re===void 0?void 0:re.error);if(pe){le(zt,`RPC '${e}' stream ${o} received error:`,pe);const ke=pe.status;let Ie=(function(C){const N=gt[C];if(N!==void 0)return Xv(N)})(ke),P=pe.message;Ie===void 0&&(Ie=Q.INTERNAL,P="Unknown error status: "+ke+" with message "+pe.message),U=!0,H.__(new ge(Ie,P)),A.close()}else le(zt,`RPC '${e}' stream ${o} received:`,ce),H.a_(ce)}})),W(m,mv.STAT_EVENT,(z=>{z.stat===gd.PROXY?le(zt,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===gd.NOPROXY&&le(zt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.o_()}),0),H}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function id(){return typeof document<"u"?document:null}function mc(i){return new cS(i,!0)}class h_{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=o,this.A_=u,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-s);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const ty="PersistentStream";class d_{constructor(e,t,s,o,u,h,m,g){this.Fi=e,this.w_=s,this.S_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new h_(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.b_===t&&this.W_(s,o)}),(s=>{e((()=>{const o=new ge(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)}))}))}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{s((()=>this.G_(o)))})),this.stream.onMessage((o=>{s((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return le(ty,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(le(ty,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class aA extends d_{constructor(e,t,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=fS(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Ae.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?ar(h.readTime):Ae.min()})(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=xd(this.serializer),t.addTarget=(function(u,h){let m;const g=h.target;if(m=Ed(g)?{documents:gS(u,g)}:{query:yS(u,g).Vt},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=e_(u,h.resumeToken);const v=Id(u,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ae.min())>0){m.readTime=Yu(u,h.snapshotVersion.toTimestamp());const v=Id(u,h.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const s=_S(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=xd(this.serializer),t.removeTarget=e,this.k_(t)}}class lA extends d_{constructor(e,t,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=mS(e.writeResults,e.commitTime),s=ar(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=xd(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>pS(this.serializer,s)))};this.k_(t)}}class uA{}class cA extends uA{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ge(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,Sd(t,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(Q.UNKNOWN,u.toString())}))}Jo(e,t,s,o,u){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Jo(e,Sd(t,s),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ge(Q.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class hA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Vr(t),this._a=!1):le("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const us="RemoteStore";class dA{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=u,this.Ea.xo((h=>{s.enqueueAndForget((async()=>{ps(this)&&(le(us,"Restarting streams for network reachability change."),await(async function(g){const v=xe(g);v.Ia.add(4),await nl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await gc(v)})(this))}))})),this.Aa=new hA(s,o)}}async function gc(i){if(ps(i))for(const e of i.da)await e(!0)}async function nl(i){for(const e of i.da)await e(!1)}function f_(i,e){const t=xe(i);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ff(t)?df(t):ko(t).x_()&&hf(t,e))}function cf(i,e){const t=xe(i),s=ko(t);t.Ta.delete(e),s.x_()&&p_(t,e),t.Ta.size===0&&(s.x_()?s.B_():ps(t)&&t.Aa.set("Unknown"))}function hf(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ko(i).H_(e)}function p_(i,e){i.Ra.$e(e),ko(i).Y_(e)}function df(i){i.Ra=new oS({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),ko(i).start(),i.Aa.aa()}function ff(i){return ps(i)&&!ko(i).M_()&&i.Ta.size>0}function ps(i){return xe(i).Ia.size===0}function m_(i){i.Ra=void 0}async function fA(i){i.Aa.set("Online")}async function pA(i){i.Ta.forEach(((e,t)=>{hf(i,e)}))}async function mA(i,e){m_(i),ff(i)?(i.Aa.la(e),df(i)):i.Aa.set("Unknown")}async function gA(i,e,t){if(i.Aa.set("Online"),e instanceof Zv&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ta.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ta.delete(m),o.Ra.removeTarget(m))})(i,e)}catch(s){le(us,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ju(i,s)}else if(e instanceof Ou?i.Ra.Ye(e):e instanceof Jv?i.Ra.it(e):i.Ra.et(e),!t.isEqual(Ae.min()))try{const s=await c_(i.localStore);t.compareTo(s)>=0&&await(function(u,h){const m=u.Ra.Pt(h);return m.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.Ta.get(v);T&&u.Ta.set(v,T.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,v)=>{const T=u.Ta.get(g);if(!T)return;u.Ta.set(g,T.withResumeToken(Mt.EMPTY_BYTE_STRING,T.snapshotVersion)),p_(u,g);const A=new fi(T.target,g,v,T.sequenceNumber);hf(u,A)})),u.remoteSyncer.applyRemoteEvent(m)})(i,t)}catch(s){le(us,"Failed to raise snapshot:",s),await Ju(i,s)}}async function Ju(i,e,t){if(!xo(e))throw e;i.Ia.add(1),await nl(i),i.Aa.set("Offline"),t||(t=()=>c_(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{le(us,"Retrying IndexedDB access"),await t(),i.Ia.delete(1),await gc(i)}))}function g_(i,e){return e().catch((t=>Ju(i,t,e)))}async function yc(i){const e=xe(i),t=Si(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Qd;for(;yA(e);)try{const o=await JS(e.localStore,s);if(o===null){e.Pa.length===0&&t.B_();break}s=o.batchId,vA(e,o)}catch(o){await Ju(e,o)}y_(e)&&v_(e)}function yA(i){return ps(i)&&i.Pa.length<10}function vA(i,e){i.Pa.push(e);const t=Si(i);t.x_()&&t.Z_&&t.X_(e.mutations)}function y_(i){return ps(i)&&!Si(i).M_()&&i.Pa.length>0}function v_(i){Si(i).start()}async function _A(i){Si(i).na()}async function wA(i){const e=Si(i);for(const t of i.Pa)e.X_(t.mutations)}async function EA(i,e,t){const s=i.Pa.shift(),o=nf.from(s,e,t);await g_(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await yc(i)}async function TA(i,e){e&&Si(i).Z_&&await(async function(s,o){if((function(h){return iS(h)&&h!==Q.ABORTED})(o.code)){const u=s.Pa.shift();Si(s).N_(),await g_(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await yc(s)}})(i,e),y_(i)&&v_(i)}async function ny(i,e){const t=xe(i);t.asyncQueue.verifyOperationInProgress(),le(us,"RemoteStore received new credentials");const s=ps(t);t.Ia.add(3),await nl(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await gc(t)}async function IA(i,e){const t=xe(i);e?(t.Ia.delete(2),await gc(t)):e||(t.Ia.add(2),await nl(t),t.Aa.set("Unknown"))}function ko(i){return i.Va||(i.Va=(function(t,s,o){const u=xe(t);return u.ia(),new aA(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:fA.bind(null,i),e_:pA.bind(null,i),n_:mA.bind(null,i),J_:gA.bind(null,i)}),i.da.push((async e=>{e?(i.Va.N_(),ff(i)?df(i):i.Aa.set("Unknown")):(await i.Va.stop(),m_(i))}))),i.Va}function Si(i){return i.ma||(i.ma=(function(t,s,o){const u=xe(t);return u.ia(),new lA(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:_A.bind(null,i),n_:TA.bind(null,i),ea:wA.bind(null,i),ta:EA.bind(null,i)}),i.da.push((async e=>{e?(i.ma.N_(),await yc(i)):(await i.ma.stop(),i.Pa.length>0&&(le(us,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))}))),i.ma}class pf{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const h=Date.now()+s,m=new pf(e,t,h,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mf(i,e){if(Vr("AsyncQueue",`${e}: ${i}`),xo(i))return new ge(Q.UNAVAILABLE,`${e}: ${i}`);throw i}class po{static emptySet(e){return new po(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||we.comparator(t.key,s.key):(t,s)=>we.comparator(t.key,s.key),this.keyedMap=Aa(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new po;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class ry{constructor(){this.fa=new st(we.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Te(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,s)=>{e.push(s)})),e}}class wo{constructor(e,t,s,o,u,h,m,g,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,u){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new wo(e,t,po.emptySet(t),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class SA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class AA{constructor(){this.queries=iy(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const o=xe(t),u=o.queries;o.queries=iy(),u.forEach(((h,m)=>{for(const g of m.wa)g.onError(s)}))})(this,new ge(Q.ABORTED,"Firestore shutting down"))}}function iy(){return new ds((i=>Fv(i)),cc)}async function xA(i,e){const t=xe(i);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.Sa()&&e.ba()&&(s=2):(u=new SA,s=e.ba()?0:1);try{switch(s){case 0:u.ya=await t.onListen(o,!0);break;case 1:u.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=mf(h,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.wa.push(e),e.va(t.onlineState),u.ya&&e.Ca(u.ya)&&gf(t)}async function kA(i,e){const t=xe(i),s=e.query;let o=3;const u=t.queries.get(s);if(u){const h=u.wa.indexOf(e);h>=0&&(u.wa.splice(h,1),u.wa.length===0?o=e.ba()?0:1:!u.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function CA(i,e){const t=xe(i);let s=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const m of h.wa)m.Ca(o)&&(s=!0);h.ya=o}}s&&gf(t)}function RA(i,e,t){const s=xe(i),o=s.queries.get(e);if(o)for(const u of o.wa)u.onError(t);s.queries.delete(e)}function gf(i){i.Da.forEach((e=>{e.next()}))}var Rd,sy;(sy=Rd||(Rd={})).Fa="default",sy.Cache="cache";class PA{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new wo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Rd.Cache}}class __{constructor(e){this.key=e}}class w_{constructor(e){this.key=e}}class NA{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ve(),this.mutatedKeys=Ve(),this.Xa=jv(e),this.eu=new po(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new ry,o=t?t.eu:this.eu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,A)=>{const x=o.get(T),U=hc(this.query,A)?A:null,H=!!x&&this.mutatedKeys.has(x.key),W=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let z=!1;x&&U?x.data.isEqual(U.data)?H!==W&&(s.track({type:3,doc:U}),z=!0):this.iu(x,U)||(s.track({type:2,doc:U}),z=!0,(g&&this.Xa(U,g)>0||v&&this.Xa(U,v)<0)&&(m=!0)):!x&&U?(s.track({type:0,doc:U}),z=!0):x&&!U&&(s.track({type:1,doc:x}),z=!0,(g||v)&&(m=!0)),z&&(U?(h=h.add(U),u=W?u.add(T):u.delete(T)):(h=h.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{eu:h,ru:s,Ds:m,mutatedKeys:u}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((T,A)=>(function(U,H){const W=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{At:z})}};return W(U)-W(H)})(T.type,A.type)||this.Xa(T.doc,A.doc))),this.su(s),o=o!=null&&o;const m=t&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,v=g!==this.Ya;return this.Ya=g,h.length!==0||v?{snapshot:new wo(this.query,e.eu,u,h,e.mutatedKeys,g===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:m}:{_u:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ry,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ve(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const t=[];return e.forEach((s=>{this.Za.has(s)||t.push(new w_(s))})),this.Za.forEach((s=>{e.has(s)||t.push(new __(s))})),t}uu(e){this.Ha=e.qs,this.Za=Ve();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return wo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const yf="SyncEngine";class DA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class bA{constructor(e){this.key=e,this.lu=!1}}class OA{constructor(e,t,s,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new ds((m=>Fv(m)),cc),this.Tu=new Map,this.Iu=new Set,this.du=new st(we.comparator),this.Eu=new Map,this.Au=new of,this.Ru={},this.Vu=new Map,this.mu=_o.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function VA(i,e,t=!0){const s=x_(i);let o;const u=s.Pu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.cu()):o=await E_(s,e,t,!0),o}async function LA(i,e){const t=x_(i);await E_(t,e,!0,!1)}async function E_(i,e,t,s){const o=await ZS(i.localStore,or(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,t);let m;return s&&(m=await MA(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&t&&f_(i.remoteStore,o),m}async function MA(i,e,t,s,o){i.gu=(A,x,U)=>(async function(W,z,re,ce){let se=z.view.nu(re);se.Ds&&(se=await Xg(W.localStore,z.query,!1).then((({documents:P})=>z.view.nu(P,se))));const pe=ce&&ce.targetChanges.get(z.targetId),ke=ce&&ce.targetMismatches.get(z.targetId)!=null,Ie=z.view.applyChanges(se,W.isPrimaryClient,pe,ke);return ay(W,z.targetId,Ie._u),Ie.snapshot})(i,A,x,U);const u=await Xg(i.localStore,e,!0),h=new NA(e,u.qs),m=h.nu(u.documents),g=tl.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",o),v=h.applyChanges(m,i.isPrimaryClient,g);ay(i,t,v._u);const T=new DA(e,t,h);return i.Pu.set(e,T),i.Tu.has(t)?i.Tu.get(t).push(e):i.Tu.set(t,[e]),v.snapshot}async function FA(i,e,t){const s=xe(i),o=s.Pu.get(e),u=s.Tu.get(o.targetId);if(u.length>1)return s.Tu.set(o.targetId,u.filter((h=>!cc(h,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await kd(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&cf(s.remoteStore,o.targetId),Pd(s,o.targetId)})).catch(Ao)):(Pd(s,o.targetId),await kd(s.localStore,o.targetId,!0))}async function jA(i,e){const t=xe(i),s=t.Pu.get(e),o=t.Tu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),cf(t.remoteStore,s.targetId))}async function UA(i,e,t){const s=GA(i);try{const o=await(function(h,m){const g=xe(h),v=Ze.now(),T=m.reduce(((U,H)=>U.add(H.key)),Ve());let A,x;return g.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let H=Lr(),W=Ve();return g.Os.getEntries(U,T).next((z=>{H=z,H.forEach(((re,ce)=>{ce.isValidDocument()||(W=W.add(re))}))})).next((()=>g.localDocuments.getOverlayedDocuments(U,H))).next((z=>{A=z;const re=[];for(const ce of m){const se=ZI(ce,A.get(ce.key).overlayedDocument);se!=null&&re.push(new fs(ce.key,se,Nv(se.value.mapValue),Dr.exists(!0)))}return g.mutationQueue.addMutationBatch(U,v,re,m)})).next((z=>{x=z;const re=z.applyToLocalDocumentSet(A,W);return g.documentOverlayCache.saveOverlays(U,z.batchId,re)}))})).then((()=>({batchId:x.batchId,changes:Bv(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let v=h.Ru[h.currentUser.toKey()];v||(v=new st(Pe)),v=v.insert(m,g),h.Ru[h.currentUser.toKey()]=v})(s,o.batchId,t),await rl(s,o.changes),await yc(s.remoteStore)}catch(o){const u=mf(o,"Failed to persist write");t.reject(u)}}async function T_(i,e){const t=xe(i);try{const s=await YS(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=t.Eu.get(u);h&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?$e(h.lu,14607):o.removedDocuments.size>0&&($e(h.lu,42227),h.lu=!1))})),await rl(t,s,e)}catch(s){await Ao(s)}}function oy(i,e,t){const s=xe(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Pu.forEach(((u,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=xe(h);g.onlineState=m;let v=!1;g.queries.forEach(((T,A)=>{for(const x of A.wa)x.va(m)&&(v=!0)})),v&&gf(g)})(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function BA(i,e,t){const s=xe(i);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),u=o&&o.key;if(u){let h=new st(we.comparator);h=h.insert(u,Ht.newNoDocument(u,Ae.min()));const m=Ve().add(u),g=new pc(Ae.min(),new Map,new st(Pe),h,m);await T_(s,g),s.du=s.du.remove(u),s.Eu.delete(e),vf(s)}else await kd(s.localStore,e,!1).then((()=>Pd(s,e,t))).catch(Ao)}async function zA(i,e){const t=xe(i),s=e.batch.batchId;try{const o=await QS(t.localStore,e);S_(t,s,null),I_(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await rl(t,o)}catch(o){await Ao(o)}}async function $A(i,e,t){const s=xe(i);try{const o=await(function(h,m){const g=xe(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let T;return g.mutationQueue.lookupMutationBatch(v,m).next((A=>($e(A!==null,37113),T=A.keys(),g.mutationQueue.removeMutationBatch(v,A)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,T))).next((()=>g.localDocuments.getDocuments(v,T)))}))})(s.localStore,e);S_(s,e,t),I_(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await rl(s,o)}catch(o){await Ao(o)}}function I_(i,e){(i.Vu.get(e)||[]).forEach((t=>{t.resolve()})),i.Vu.delete(e)}function S_(i,e,t){const s=xe(i);let o=s.Ru[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Ru[s.currentUser.toKey()]=o}}function Pd(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Tu.get(e))i.Pu.delete(s),t&&i.hu.pu(s,t);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach((s=>{i.Au.containsKey(s)||A_(i,s)}))}function A_(i,e){i.Iu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(cf(i.remoteStore,t),i.du=i.du.remove(e),i.Eu.delete(t),vf(i))}function ay(i,e,t){for(const s of t)s instanceof __?(i.Au.addReference(s.key,e),HA(i,s)):s instanceof w_?(le(yf,"Document no longer in limbo: "+s.key),i.Au.removeReference(s.key,e),i.Au.containsKey(s.key)||A_(i,s.key)):Te(19791,{yu:s})}function HA(i,e){const t=e.key,s=t.path.canonicalString();i.du.get(t)||i.Iu.has(s)||(le(yf,"New document in limbo: "+t),i.Iu.add(s),vf(i))}function vf(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const t=new we(it.fromString(e)),s=i.mu.next();i.Eu.set(s,new bA(t)),i.du=i.du.insert(t,s),f_(i.remoteStore,new fi(or(ef(t.path)),s,"TargetPurposeLimboResolution",oc.ue))}}async function rl(i,e,t){const s=xe(i),o=[],u=[],h=[];s.Pu.isEmpty()||(s.Pu.forEach(((m,g)=>{h.push(s.gu(g,e,t).then((v=>{var T;if((v||t)&&s.isPrimaryClient){const A=v?!v.fromCache:(T=t?.targetChanges.get(g.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(v){o.push(v);const A=lf.Es(g.targetId,v);u.push(A)}})))})),await Promise.all(h),s.hu.J_(o),await(async function(g,v){const T=xe(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>q.forEach(v,(x=>q.forEach(x.Is,(U=>T.persistence.referenceDelegate.addReference(A,x.targetId,U))).next((()=>q.forEach(x.ds,(U=>T.persistence.referenceDelegate.removeReference(A,x.targetId,U)))))))))}catch(A){if(!xo(A))throw A;le(uf,"Failed to update sequence numbers: "+A)}for(const A of v){const x=A.targetId;if(!A.fromCache){const U=T.Fs.get(x),H=U.snapshotVersion,W=U.withLastLimboFreeSnapshotVersion(H);T.Fs=T.Fs.insert(x,W)}}})(s.localStore,u))}async function WA(i,e){const t=xe(i);if(!t.currentUser.isEqual(e)){le(yf,"User change. New user:",e.toKey());const s=await u_(t.localStore,e);t.currentUser=e,(function(u,h){u.Vu.forEach((m=>{m.forEach((g=>{g.reject(new ge(Q.CANCELLED,h))}))})),u.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await rl(t,s.Bs)}}function qA(i,e){const t=xe(i),s=t.Eu.get(e);if(s&&s.lu)return Ve().add(s.key);{let o=Ve();const u=t.Tu.get(e);if(!u)return o;for(const h of u){const m=t.Pu.get(h);o=o.unionWith(m.view.tu)}return o}}function x_(i){const e=xe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=T_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BA.bind(null,e),e.hu.J_=CA.bind(null,e.eventManager),e.hu.pu=RA.bind(null,e.eventManager),e}function GA(i){const e=xe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$A.bind(null,e),e}class Zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return KS(this.persistence,new WS,e.initialUser,this.serializer)}Du(e){return new l_(af.Vi,this.serializer)}bu(e){return new tA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zu.provider={build:()=>new Zu};class KA extends Zu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){$e(this.persistence.referenceDelegate instanceof Xu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new PS(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new l_((s=>Xu.Vi(s,t)),this.serializer)}}class Nd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>oy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=WA.bind(null,this.syncEngine),await IA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new AA})()}createDatastore(e){const t=mc(e.databaseInfo.databaseId),s=(function(u){return new oA(u)})(e.databaseInfo);return(function(u,h,m,g){return new cA(u,h,m,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,u,h,m){return new dA(s,o,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>oy(this.syncEngine,t,0)),(function(){return ey.C()?new ey:new nA})())}createSyncEngine(e,t){return(function(o,u,h,m,g,v,T){const A=new OA(o,u,h,m,g,v);return T&&(A.fu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const u=xe(o);le(us,"RemoteStore shutting down."),u.Ia.add(5),await nl(u),u.Ea.shutdown(),u.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Nd.provider={build:()=>new Nd};class QA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ai="FirestoreClient";class YA{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=$t.UNAUTHENTICATED,this.clientId=Gd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{le(Ai,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(le(Ai,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=mf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function sd(i,e){i.asyncQueue.verifyOperationInProgress(),le(Ai,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await u_(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>{_i("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then((()=>{le("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{_i("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),i._offlineComponents=e}async function ly(i,e){i.asyncQueue.verifyOperationInProgress();const t=await XA(i);le(Ai,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((s=>ny(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>ny(e.remoteStore,o))),i._onlineComponents=e}async function XA(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){le(Ai,"Using user provided OfflineComponentProvider");try{await sd(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;_i("Error using user provided cache. Falling back to memory cache: "+t),await sd(i,new Zu)}}else le(Ai,"Using default OfflineComponentProvider"),await sd(i,new KA(void 0));return i._offlineComponents}async function k_(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(le(Ai,"Using user provided OnlineComponentProvider"),await ly(i,i._uninitializedComponentsProvider._online)):(le(Ai,"Using default OnlineComponentProvider"),await ly(i,new Nd))),i._onlineComponents}function JA(i){return k_(i).then((e=>e.syncEngine))}async function ZA(i){const e=await k_(i),t=e.eventManager;return t.onListen=VA.bind(null,e.syncEngine),t.onUnlisten=FA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=LA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jA.bind(null,e.syncEngine),t}function ex(i,e,t={}){const s=new vi;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,v){const T=new QA({next:x=>{T.Ou(),h.enqueueAndForget((()=>kA(u,A)));const U=x.docs.has(m);!U&&x.fromCache?v.reject(new ge(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&x.fromCache&&g&&g.source==="server"?v.reject(new ge(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),A=new PA(ef(m.path),T,{includeMetadataChanges:!0,ka:!0});return xA(u,A)})(await ZA(i),i.asyncQueue,e,t,s))),s.promise}function C_(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const uy=new Map;const R_="firestore.googleapis.com",cy=!0;class hy{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=R_,this.ssl=cy}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:cy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=a_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CS)throw new ge(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C_((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ge(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ge(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ge(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _f{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new tI;switch(s.type){case"firstParty":return new sI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=uy.get(t);s&&(le("ComponentProvider","Removing Datastore"),uy.delete(t),s.terminate())})(this),Promise.resolve()}}function tx(i,e,t,s={}){var o;i=Fa(i,_f);const u=Eo(e),h=i._getSettings(),m=Object.assign(Object.assign({},h),{emulatorOptions:i._getEmulatorOptions()}),g=`${e}:${t}`;u&&(Sy(`https://${g}`),Ay("Firestore",!0)),h.host!==R_&&h.host!==g&&_i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:g,ssl:u,emulatorOptions:s});if(!is(v,m)&&(i._setSettings(v),s.mockUserToken)){let T,A;if(typeof s.mockUserToken=="string")T=s.mockUserToken,A=$t.MOCK_USER;else{T=hw(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new ge(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new $t(x)}i._authCredentials=new nI(new _v(T,A))}}class wf{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new wf(this.firestore,e,this._query)}}class Pt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Za(t,Pt._jsonSchema))return new Pt(e,s||null,new we(it.fromString(t.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:yt("string",Pt._jsonSchemaVersion),referencePath:yt("string")};class qa extends wf{constructor(e,t,s){super(e,t,ef(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new we(e))}withConverter(e){return new qa(this.firestore,e,this._path)}}function Ef(i,e,...t){if(i=pn(i),arguments.length===1&&(e=Gd.newId()),cI("doc","path",e),i instanceof _f){const s=it.fromString(e,...t);return Ag(s),new Pt(i,null,new we(s))}{if(!(i instanceof Pt||i instanceof qa))throw new ge(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(it.fromString(e,...t));return Ag(s),new Pt(i.firestore,i instanceof qa?i.converter:null,new we(s))}}const dy="AsyncQueue";class fy{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new h_(this,"async_queue_retry"),this.oc=()=>{const s=id();s&&le(dy,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=id();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=id();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new vi;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!xo(e))throw e;le(dy,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,Vr("INTERNAL UNHANDLED ERROR: ",py(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=pf.createAndSchedule(this,e,t,s,(u=>this.lc(u)));return this.ec.push(o),o}ac(){this.tc&&Te(47125,{hc:py(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function py(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Tf extends _f{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new fy,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fy(e),this._firestoreClient=void 0,await e}}}function nx(i,e){const t=typeof i=="object"?i:Ry(),s=typeof i=="string"?i:Wu,o=Ld(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=uw("firestore");u&&tx(o,...u)}return o}function P_(i){if(i._terminated)throw new ge(Q.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||rx(i),i._firestoreClient}function rx(i){var e,t,s;const o=i._freezeSettings(),u=(function(m,g,v,T){return new TI(m,g,v,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,C_(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new YA(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&(function(m){const g=m?._online.build();return{_offline:m?._offline.build(g),_online:g}})(i._componentsProvider))}class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(Mt.fromBase64String(e))}catch(t){throw new ge(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kn(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Za(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:yt("string",kn._jsonSchemaVersion),bytes:yt("string")};class If{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sf{constructor(e){this._methodName=e}}class lr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:lr._jsonSchemaVersion}}static fromJSON(e){if(Za(e,lr._jsonSchema))return new lr(e.latitude,e.longitude)}}lr._jsonSchemaVersion="firestore/geoPoint/1.0",lr._jsonSchema={type:yt("string",lr._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};class ur{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ur._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Za(e,ur._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ur(e.vectorValues);throw new ge(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ur._jsonSchemaVersion="firestore/vectorValue/1.0",ur._jsonSchema={type:yt("string",ur._jsonSchemaVersion),vectorValues:yt("object")};const ix=/^__.*__$/;class sx{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new fs(e,this.data,this.fieldMask,t,this.fieldTransforms):new el(e,this.data,t,this.fieldTransforms)}}function N_(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ec:i})}}class Af{constructor(e,t,s,o,u,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Ac(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Af(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.fc(e),o}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ec(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(N_(this.Ec)&&ix.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class ox{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||mc(e)}Dc(e,t,s,o=!1){return new Af({Ec:e,methodName:t,bc:s,path:Lt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ax(i){const e=i._freezeSettings(),t=mc(i._databaseId);return new ox(i._databaseId,!!e.ignoreUndefinedProperties,t)}function lx(i,e,t,s,o,u={}){const h=i.Dc(u.merge||u.mergeFields?2:0,e,t,o);V_("Data must be an object, but it was:",h,s);const m=b_(s,h);let g,v;if(u.merge)g=new Hn(h.fieldMask),v=h.fieldTransforms;else if(u.mergeFields){const T=[];for(const A of u.mergeFields){const x=ux(e,A,t);if(!h.contains(x))throw new ge(Q.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);hx(T,x)||T.push(x)}g=new Hn(T),v=h.fieldTransforms.filter((A=>g.covers(A.field)))}else g=null,v=h.fieldTransforms;return new sx(new xn(m),g,v)}class xf extends Sf{_toFieldTransform(e){return new QI(e.path,new $a)}isEqual(e){return e instanceof xf}}function D_(i,e){if(O_(i=pn(i)))return V_("Unsupported field value:",e,i),b_(i,e);if(i instanceof Sf)return(function(s,o){if(!N_(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const m of s){let g=D_(m,o.yc(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=pn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return qI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ze.fromDate(s);return{timestampValue:Yu(o.serializer,u)}}if(s instanceof Ze){const u=new Ze(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Yu(o.serializer,u)}}if(s instanceof lr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof kn)return{bytesValue:e_(o.serializer,s._byteString)};if(s instanceof Pt){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:sf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ur)return(function(h,m){return{mapValue:{fields:{[Rv]:{stringValue:Pv},[qu]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw m.wc("VectorValues must only contain numeric values.");return tf(m.serializer,v)}))}}}}}})(s,o);throw o.wc(`Unsupported field value: ${Kd(s)}`)})(i,e)}function b_(i,e){const t={};return Iv(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hs(i,((s,o)=>{const u=D_(o,e.Vc(s));u!=null&&(t[s]=u)})),{mapValue:{fields:t}}}function O_(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ze||i instanceof lr||i instanceof kn||i instanceof Pt||i instanceof Sf||i instanceof ur)}function V_(i,e,t){if(!O_(t)||!Ev(t)){const s=Kd(t);throw s==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+s)}}function ux(i,e,t){if((e=pn(e))instanceof If)return e._internalPath;if(typeof e=="string")return L_(i,e);throw ec("Field path arguments must be of type string or ",i,!1,void 0,t)}const cx=new RegExp("[~\\*/\\[\\]]");function L_(i,e,t){if(e.search(cx)>=0)throw ec(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new If(...e.split("."))._internalPath}catch{throw ec(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function ec(i,e,t,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new ge(Q.INVALID_ARGUMENT,m+i+g)}function hx(i,e){return i.some((t=>t.isEqual(e)))}class M_{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(F_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dx extends M_{data(){return super.data()}}function F_(i,e){return typeof e=="string"?L_(i,e):e instanceof If?e._internalPath:e._delegate._internalPath}class fx{convertValue(e,t="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return hs(e,((o,u)=>{s[o]=this.convertValue(u,t)})),s}convertVectorValue(e){var t,s,o;const u=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[qu].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((h=>dt(h.doubleValue)));return new ur(u)}convertGeoPoint(e){return new lr(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=lc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ua(e));default:return null}}convertTimestamp(e){const t=Ei(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=it.fromString(e);$e(o_(s),9688,{name:e});const o=new Ba(s.get(1),s.get(3)),u=new we(s.popFirst(5));return o.isEqual(t)||Vr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function px(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class ka{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rs extends M_{constructor(e,t,s,o,u,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(F_("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=rs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}rs._jsonSchemaVersion="firestore/documentSnapshot/1.0",rs._jsonSchema={type:yt("string",rs._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Vu extends rs{data(e={}){return super.data(e)}}class Oa{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ka(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Vu(this._firestore,this._userDataWriter,s.key,s,new ka(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Vu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ka(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Vu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ka(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,T=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),T=h.indexOf(m.doc.key)),{type:mx(m.type),doc:g,oldIndex:v,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mx(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:i})}}function j_(i){i=Fa(i,Pt);const e=Fa(i.firestore,Tf);return ex(P_(e),i._key).then((t=>vx(e,i,t)))}Oa._jsonSchemaVersion="firestore/querySnapshot/1.0",Oa._jsonSchema={type:yt("string",Oa._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class gx extends fx{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}}function U_(i,e,t){i=Fa(i,Pt);const s=Fa(i.firestore,Tf),o=px(i.converter,e,t);return yx(s,[lx(ax(s),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,Dr.none())])}function yx(i,e){return(function(s,o){const u=new vi;return s.asyncQueue.enqueueAndForget((async()=>UA(await JA(s),o,u))),u.promise})(P_(i),e)}function vx(i,e,t){const s=t.docs.get(e._key),o=new gx(i);return new rs(i,o,e._key,s,new ka(t.hasPendingWrites,t.fromCache),e.converter)}function Dd(){return new xf("serverTimestamp")}(function(e,t=!0){(function(o){So=o})(To),mo(new ss("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new Tf(new rI(s.getProvider("auth-internal")),new oI(h,s.getProvider("app-check-internal")),(function(v,T){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ge(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ba(v.options.projectId,T)})(h,o),h);return u=Object.assign({useFetchStreams:t},u),m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),gi(wg,Eg,e),gi(wg,Eg,"esm2017")})();const _x={apiKey:"AIzaSyA_tkAvN8JIYHLwRNdxM66aof0Witrtc0w",authDomain:"habitbloom-c28e9.firebaseapp.com",projectId:"habitbloom-c28e9",storageBucket:"habitbloom-c28e9.firebasestorage.app",messagingSenderId:"50886205004",appId:"1:50886205004:web:03997cc2ce5ff8996d5ee9"},B_=Cy(_x),tc=ZT(B_),kf=nx(B_);async function wx(i,e){try{const t=Ef(kf,"users",i);return await U_(t,{...e,updatedAt:Dd()},{merge:!0}),!0}catch(t){return console.error("Error saving user data:",t),!1}}async function Ex(i){try{const e=Ef(kf,"users",i),t=await j_(e);return t.exists()?t.data():null}catch(e){return console.error("Error loading user data:",e),null}}async function Tx(i,e){try{const t=Ef(kf,"users",i);return(await j_(t)).exists()||await U_(t,{email:e,companionType:null,completedHabits:[],customHabits:[],goals:[],totalPoints:0,theme:"warm",moodEntries:[],createdAt:Dd(),updatedAt:Dd()}),!0}catch(t){return console.error("Error creating user profile:",t),!1}}function Ix({onLogin:i}){const[e,t]=_e.useState(""),[s,o]=_e.useState(""),[u,h]=_e.useState(!1),[m,g]=_e.useState(!1),[v,T]=_e.useState(null),[A,x]=_e.useState(!1),U=async H=>{if(H.preventDefault(),!(!e.trim()||!s.trim())){x(!0),T(null);try{let W;u?W=await M1(tc,e.trim(),s):W=await F1(tc,e.trim(),s),g(!0),setTimeout(()=>i(W.user),600)}catch(W){T({"auth/user-not-found":"No account found  try signing up!","auth/wrong-password":"Incorrect password  try again.","auth/invalid-credential":"Incorrect email or password  try again, or sign up.","auth/email-already-in-use":"This email already has an account  try logging in.","auth/weak-password":"Password needs at least 6 characters.","auth/invalid-email":"Please enter a valid email address.","auth/too-many-requests":"Too many attempts  take a breath and try again shortly. "}[W.code]||"Something went wrong  please try again."),x(!1)}}};return E.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:E.jsxs("div",{className:`w-full max-w-sm transition-all duration-700 ${m?"scale-95 opacity-0":"animate-bloom-in"}`,children:[E.jsxs("div",{className:"text-center mb-10",children:[E.jsx("div",{className:"text-6xl mb-4 animate-float",children:""}),E.jsx("h1",{className:"font-display text-4xl font-semibold tracking-tight",style:{color:"var(--text-primary)"},children:"SAGE"}),E.jsxs("p",{className:"mt-2 text-sm font-body",style:{color:"var(--text-secondary)"},children:["Gentle growth, one small step at a time",E.jsx("br",{}),"Focus on Progress, not Perfection. "]})]}),E.jsxs("div",{className:"rounded-3xl p-8 backdrop-blur-sm",style:{background:"var(--bg-card)",boxShadow:"var(--shadow-soft)",border:"1px solid rgba(119, 154, 119, 0.1)"},children:[E.jsx("h2",{className:"font-display text-xl font-medium mb-1",style:{color:"var(--text-primary)"},children:u?"Create your space":"Welcome back"}),E.jsx("p",{className:"text-sm mb-6",style:{color:"var(--text-muted)"},children:u?"Sign up to save your progress across devices.":"Log in to continue your journey."}),v&&E.jsx("div",{className:"mb-4 p-3 rounded-xl text-sm animate-bloom-in",style:{background:"rgba(244, 114, 182, 0.08)",color:"var(--accent-bloom)",border:"1px solid rgba(244, 114, 182, 0.15)"},children:v}),E.jsxs("form",{onSubmit:U,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"email",className:"block text-xs font-medium mb-1.5 uppercase tracking-wider",style:{color:"var(--text-secondary)"},children:"Email"}),E.jsx("input",{id:"email",type:"email",required:!0,value:e,onChange:H=>t(H.target.value),placeholder:"you@example.com",className:"w-full px-4 py-3 rounded-xl text-sm font-body transition-all duration-200 outline-none focus:ring-2",style:{background:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid rgba(119, 154, 119, 0.15)","--tw-ring-color":"var(--accent-sage)"}})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"password",className:"block text-xs font-medium mb-1.5 uppercase tracking-wider",style:{color:"var(--text-secondary)"},children:"Password"}),E.jsx("input",{id:"password",type:"password",required:!0,minLength:6,value:s,onChange:H=>o(H.target.value),placeholder:"At least 6 characters",className:"w-full px-4 py-3 rounded-xl text-sm font-body transition-all duration-200 outline-none focus:ring-2",style:{background:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid rgba(119, 154, 119, 0.15)","--tw-ring-color":"var(--accent-sage)"}})]}),E.jsx("button",{type:"submit",disabled:A,className:"w-full py-3.5 rounded-xl text-white text-sm font-semibold tracking-wide transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50",style:{background:"linear-gradient(135deg, var(--accent-sage), var(--accent-bloom))",boxShadow:"0 4px 16px rgba(119, 154, 119, 0.2)"},children:A?" One moment...":u?"Create Account ":"Log In "})]}),E.jsx("button",{onClick:()=>{h(!u),T(null)},className:"w-full mt-3 py-2 text-sm font-medium transition-all duration-200",style:{color:"var(--text-secondary)",background:"transparent",border:"none",cursor:"pointer"},children:u?"Already have an account? Log in":"Don't have an account? Sign up"})]}),E.jsx("p",{className:"text-center text-xs mt-6",style:{color:"var(--text-muted)"},children:"Your progress is saved securely in the cloud. "})]})})}const Sx=[{type:"plant",emoji:"",name:"Garden Bloom",description:"A gentle plant that grows with your care  from sprout to full bloom.",color:"from-sage-100 to-sage-200",accent:"var(--accent-sage)"},{type:"animal",emoji:"",name:"Cozy Companion",description:"A soft little friend that grows and plays as you nurture your habits.",color:"from-bloom-100 to-petal-100",accent:"var(--accent-bloom)"}];function Ax({onChoose:i}){const[e,t]=_e.useState(null),[s,o]=_e.useState(!1),u=()=>{e&&(o(!0),setTimeout(()=>i(e),500))};return E.jsx("div",{className:`min-h-screen flex items-center justify-center p-6 transition-all duration-500 ${s?"opacity-0 scale-95":""}`,children:E.jsxs("div",{className:"w-full max-w-md page-enter",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("h1",{className:"font-display text-3xl font-semibold",style:{color:"var(--text-primary)"},children:"Choose Your Companion"}),E.jsx("p",{className:"mt-2 text-sm",style:{color:"var(--text-secondary)"},children:"They'll grow alongside you as you bloom."})]}),E.jsx("div",{className:"space-y-4",children:Sx.map(h=>E.jsx("button",{onClick:()=>t(h.type),className:`w-full p-6 rounded-2xl text-left transition-all duration-300 hover:scale-[1.02] ${e===h.type?"ring-2 scale-[1.02]":""}`,style:{background:"var(--bg-card)",boxShadow:e===h.type?"0 8px 32px rgba(119, 154, 119, 0.15)":"var(--shadow-soft)",border:`1px solid ${e===h.type?h.accent:"rgba(119, 154, 119, 0.1)"}`,"--tw-ring-color":h.accent},children:E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("span",{className:`text-5xl ${e===h.type?"animate-bounce-gentle":""}`,children:h.emoji}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-display text-lg font-medium",style:{color:"var(--text-primary)"},children:h.name}),E.jsx("p",{className:"text-sm mt-0.5",style:{color:"var(--text-muted)"},children:h.description})]})]})},h.type))}),e&&E.jsx("button",{onClick:u,className:"w-full mt-6 py-3.5 rounded-xl text-white text-sm font-semibold tracking-wide transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] animate-bloom-in",style:{background:"linear-gradient(135deg, var(--accent-sage), var(--accent-bloom))",boxShadow:"0 4px 16px rgba(119, 154, 119, 0.2)"},children:"Let's Grow Together "})]})})}function xx({stage:i,postAdultPoints:e=0}){const t=Math.min(6,Math.floor(e/5)),s=e>0;return E.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full",style:{filter:s?"drop-shadow(0 0 12px rgba(244, 114, 182, 0.3))":"none"},children:[E.jsx("ellipse",{cx:"100",cy:"175",rx:"35",ry:"8",fill:"#c8a882"}),E.jsx("rect",{x:"70",y:"155",width:"60",height:"20",rx:"4",fill:"#d4a574"}),E.jsx("rect",{x:"65",y:"150",width:"70",height:"8",rx:"3",fill:"#c8a882"}),E.jsx("ellipse",{cx:"100",cy:"152",rx:"30",ry:"5",fill:"#8B6F47"}),i!=="baby"&&E.jsx("rect",{x:"97",y:i==="adult"?55:i==="young"?80:105,width:"6",height:i==="adult"?97:i==="young"?72:47,rx:"3",fill:"#6B9B6B",className:"animate-grow"}),i==="baby"&&E.jsxs("g",{className:"animate-sway",style:{transformOrigin:"100px 150px"},children:[E.jsx("rect",{x:"98",y:"125",width:"4",height:"27",rx:"2",fill:"#7CB87C"}),E.jsx("ellipse",{cx:"100",cy:"122",rx:"8",ry:"6",fill:"#9CD89C"}),E.jsx("ellipse",{cx:"93",cy:"128",rx:"6",ry:"4",fill:"#85C985",transform:"rotate(-30 93 128)"})]}),i==="teen"&&E.jsxs("g",{className:"animate-sway",style:{transformOrigin:"100px 120px"},children:[E.jsx("ellipse",{cx:"85",cy:"110",rx:"14",ry:"8",fill:"#7CB87C",transform:"rotate(-25 85 110)"}),E.jsx("ellipse",{cx:"115",cy:"100",rx:"14",ry:"8",fill:"#85C985",transform:"rotate(25 115 100)"}),E.jsx("ellipse",{cx:"90",cy:"90",rx:"10",ry:"6",fill:"#9CD89C",transform:"rotate(-15 90 90)"})]}),i==="young"&&E.jsxs("g",{className:"animate-sway",style:{transformOrigin:"100px 100px"},children:[E.jsx("ellipse",{cx:"80",cy:"95",rx:"18",ry:"10",fill:"#7CB87C",transform:"rotate(-30 80 95)"}),E.jsx("ellipse",{cx:"120",cy:"90",rx:"18",ry:"10",fill:"#85C985",transform:"rotate(30 120 90)"}),E.jsx("ellipse",{cx:"85",cy:"75",rx:"14",ry:"8",fill:"#9CD89C",transform:"rotate(-15 85 75)"}),E.jsx("ellipse",{cx:"115",cy:"72",rx:"14",ry:"8",fill:"#A8E6A8",transform:"rotate(15 115 72)"}),E.jsx("circle",{cx:"100",cy:"65",r:"8",fill:"#F9A8D4",opacity:"0.6"})]}),i==="adult"&&E.jsxs("g",{className:`${s?"animate-glow":"animate-sway"}`,style:{transformOrigin:"100px 80px"},children:[E.jsx("ellipse",{cx:"75",cy:"100",rx:"20",ry:"11",fill:"#6B9B6B",transform:"rotate(-35 75 100)"}),E.jsx("ellipse",{cx:"125",cy:"95",rx:"20",ry:"11",fill:"#7CB87C",transform:"rotate(35 125 95)"}),E.jsx("ellipse",{cx:"80",cy:"80",rx:"16",ry:"9",fill:"#85C985",transform:"rotate(-20 80 80)"}),E.jsx("ellipse",{cx:"120",cy:"77",rx:"16",ry:"9",fill:"#9CD89C",transform:"rotate(20 120 77)"}),[0,60,120,180,240,300].map((o,u)=>E.jsx("ellipse",{cx:100+Math.cos(o*Math.PI/180)*14,cy:52+Math.sin(o*Math.PI/180)*14,rx:"10",ry:"7",fill:u%2===0?"#F9A8D4":"#FBCFE8",transform:`rotate(${o} ${100+Math.cos(o*Math.PI/180)*14} ${52+Math.sin(o*Math.PI/180)*14})`},u)),E.jsx("circle",{cx:"100",cy:"52",r:"7",fill:"#FBBF24"}),t>=1&&E.jsxs("g",{className:"animate-sparkle",children:[E.jsx("circle",{cx:"72",cy:"68",r:"5",fill:"#F9A8D4"}),E.jsx("circle",{cx:"72",cy:"68",r:"2.5",fill:"#FBBF24"})]}),t>=2&&E.jsxs("g",{className:"animate-sparkle",style:{animationDelay:"0.3s"},children:[E.jsx("circle",{cx:"128",cy:"65",r:"5",fill:"#FBCFE8"}),E.jsx("circle",{cx:"128",cy:"65",r:"2.5",fill:"#FBBF24"})]}),t>=3&&E.jsxs("g",{className:"animate-sparkle",style:{animationDelay:"0.6s"},children:[E.jsx("circle",{cx:"85",cy:"50",r:"4",fill:"#F472B6"}),E.jsx("circle",{cx:"85",cy:"50",r:"2",fill:"#FCD34D"})]}),t>=4&&E.jsxs("g",{className:"animate-sparkle",style:{animationDelay:"0.9s"},children:[E.jsx("circle",{cx:"118",cy:"45",r:"4",fill:"#EC4899"}),E.jsx("circle",{cx:"118",cy:"45",r:"2",fill:"#FCD34D"})]}),t>=5&&E.jsx("g",{className:"animate-float",children:E.jsx("text",{x:"60",y:"42",fontSize:"10",children:""})}),t>=6&&E.jsx("g",{className:"animate-float",style:{animationDelay:"1s"},children:E.jsx("text",{x:"130",y:"38",fontSize:"10",children:""})})]})]})}function kx({stage:i,postAdultPoints:e=0}){const t=Math.min(4,Math.floor(e/8)),s=e>0;return E.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full",style:{filter:s?"drop-shadow(0 0 12px rgba(251, 191, 36, 0.3))":"none"},children:[E.jsx("ellipse",{cx:"100",cy:"175",rx:i==="baby"?20:i==="adult"?40:30,ry:"5",fill:"rgba(0,0,0,0.06)"}),i==="baby"&&E.jsxs("g",{className:"animate-bounce-gentle",style:{transformOrigin:"100px 150px"},children:[E.jsx("ellipse",{cx:"100",cy:"155",rx:"18",ry:"14",fill:"#FFD4A8"}),E.jsx("circle",{cx:"100",cy:"135",r:"16",fill:"#FFE0C0"}),E.jsx("ellipse",{cx:"88",cy:"122",rx:"5",ry:"8",fill:"#FFD4A8",transform:"rotate(-15 88 122)"}),E.jsx("ellipse",{cx:"112",cy:"122",rx:"5",ry:"8",fill:"#FFD4A8",transform:"rotate(15 112 122)"}),E.jsx("ellipse",{cx:"88",cy:"123",rx:"3",ry:"5",fill:"#FFBDA0",transform:"rotate(-15 88 123)"}),E.jsx("ellipse",{cx:"112",cy:"123",rx:"3",ry:"5",fill:"#FFBDA0",transform:"rotate(15 112 123)"}),E.jsx("circle",{cx:"94",cy:"133",r:"3",fill:"#2f412f"}),E.jsx("circle",{cx:"106",cy:"133",r:"3",fill:"#2f412f"}),E.jsx("circle",{cx:"95",cy:"132",r:"1",fill:"white"}),E.jsx("circle",{cx:"107",cy:"132",r:"1",fill:"white"}),E.jsx("ellipse",{cx:"100",cy:"139",rx:"2.5",ry:"2",fill:"#FFBDA0"}),E.jsx("path",{d:"M 97 141 Q 100 144 103 141",stroke:"#FFBDA0",strokeWidth:"1",fill:"none"})]}),i==="teen"&&E.jsxs("g",{className:"animate-sway",style:{transformOrigin:"100px 140px"},children:[E.jsx("ellipse",{cx:"100",cy:"150",rx:"25",ry:"20",fill:"#FFD4A8"}),E.jsx("circle",{cx:"100",cy:"120",r:"22",fill:"#FFE0C0"}),E.jsx("ellipse",{cx:"82",cy:"103",rx:"7",ry:"11",fill:"#FFD4A8",transform:"rotate(-15 82 103)"}),E.jsx("ellipse",{cx:"118",cy:"103",rx:"7",ry:"11",fill:"#FFD4A8",transform:"rotate(15 118 103)"}),E.jsx("ellipse",{cx:"82",cy:"104",rx:"4",ry:"7",fill:"#FFBDA0",transform:"rotate(-15 82 104)"}),E.jsx("ellipse",{cx:"118",cy:"104",rx:"4",ry:"7",fill:"#FFBDA0",transform:"rotate(15 118 104)"}),E.jsx("circle",{cx:"91",cy:"118",r:"4",fill:"#2f412f"}),E.jsx("circle",{cx:"109",cy:"118",r:"4",fill:"#2f412f"}),E.jsx("circle",{cx:"92.5",cy:"116.5",r:"1.5",fill:"white"}),E.jsx("circle",{cx:"110.5",cy:"116.5",r:"1.5",fill:"white"}),E.jsx("ellipse",{cx:"100",cy:"126",rx:"3",ry:"2.5",fill:"#FFBDA0"}),E.jsx("path",{d:"M 95 129 Q 100 133 105 129",stroke:"#FFBDA0",strokeWidth:"1.2",fill:"none"}),E.jsx("path",{d:"M 125 148 Q 140 135 135 155",stroke:"#FFD4A8",strokeWidth:"5",strokeLinecap:"round",fill:"none"}),E.jsx("ellipse",{cx:"85",cy:"168",rx:"6",ry:"4",fill:"#FFE0C0"}),E.jsx("ellipse",{cx:"115",cy:"168",rx:"6",ry:"4",fill:"#FFE0C0"})]}),i==="young"&&E.jsxs("g",{className:"animate-sway",style:{transformOrigin:"100px 130px"},children:[E.jsx("ellipse",{cx:"100",cy:"145",rx:"30",ry:"24",fill:"#FFD4A8"}),E.jsx("circle",{cx:"100",cy:"108",r:"26",fill:"#FFE0C0"}),E.jsx("ellipse",{cx:"78",cy:"88",rx:"8",ry:"13",fill:"#FFD4A8",transform:"rotate(-15 78 88)"}),E.jsx("ellipse",{cx:"122",cy:"88",rx:"8",ry:"13",fill:"#FFD4A8",transform:"rotate(15 122 88)"}),E.jsx("ellipse",{cx:"78",cy:"89",rx:"5",ry:"8",fill:"#FFBDA0",transform:"rotate(-15 78 89)"}),E.jsx("ellipse",{cx:"122",cy:"89",rx:"5",ry:"8",fill:"#FFBDA0",transform:"rotate(15 122 89)"}),E.jsx("path",{d:"M 87 106 Q 91 102 95 106",stroke:"#2f412f",strokeWidth:"2.5",strokeLinecap:"round",fill:"none"}),E.jsx("path",{d:"M 105 106 Q 109 102 113 106",stroke:"#2f412f",strokeWidth:"2.5",strokeLinecap:"round",fill:"none"}),E.jsx("circle",{cx:"83",cy:"112",r:"5",fill:"#FFB8C6",opacity:"0.4"}),E.jsx("circle",{cx:"117",cy:"112",r:"5",fill:"#FFB8C6",opacity:"0.4"}),E.jsx("ellipse",{cx:"100",cy:"114",rx:"3.5",ry:"2.5",fill:"#FFBDA0"}),E.jsx("path",{d:"M 95 117 Q 100 121 105 117",stroke:"#FFBDA0",strokeWidth:"1.5",fill:"none"}),E.jsx("path",{d:"M 130 140 Q 150 120 145 150",stroke:"#FFD4A8",strokeWidth:"6",strokeLinecap:"round",fill:"none"}),E.jsx("ellipse",{cx:"80",cy:"167",rx:"8",ry:"5",fill:"#FFE0C0"}),E.jsx("ellipse",{cx:"120",cy:"167",rx:"8",ry:"5",fill:"#FFE0C0"})]}),i==="adult"&&E.jsxs("g",{className:s?"animate-bounce-gentle":"animate-sway",style:{transformOrigin:"100px 120px"},children:[E.jsx("ellipse",{cx:"100",cy:"140",rx:"35",ry:"28",fill:"#FFD4A8"}),E.jsx("ellipse",{cx:"100",cy:"148",rx:"22",ry:"18",fill:"#FFE8D0"}),E.jsx("circle",{cx:"100",cy:"98",r:"30",fill:"#FFE0C0"}),E.jsx("ellipse",{cx:"74",cy:"74",rx:"9",ry:"15",fill:"#FFD4A8",transform:"rotate(-15 74 74)"}),E.jsx("ellipse",{cx:"126",cy:"74",rx:"9",ry:"15",fill:"#FFD4A8",transform:"rotate(15 126 74)"}),E.jsx("ellipse",{cx:"74",cy:"75",rx:"5.5",ry:"9",fill:"#FFBDA0",transform:"rotate(-15 74 75)"}),E.jsx("ellipse",{cx:"126",cy:"75",rx:"5.5",ry:"9",fill:"#FFBDA0",transform:"rotate(15 126 75)"}),E.jsx("path",{d:"M 85 96 Q 90 91 95 96",stroke:"#2f412f",strokeWidth:"2.5",strokeLinecap:"round",fill:"none"}),E.jsx("path",{d:"M 105 96 Q 110 91 115 96",stroke:"#2f412f",strokeWidth:"2.5",strokeLinecap:"round",fill:"none"}),E.jsx("circle",{cx:"80",cy:"103",r:"6",fill:"#FFB8C6",opacity:"0.4"}),E.jsx("circle",{cx:"120",cy:"103",r:"6",fill:"#FFB8C6",opacity:"0.4"}),E.jsx("ellipse",{cx:"100",cy:"104",rx:"4",ry:"3",fill:"#FFBDA0"}),E.jsx("path",{d:"M 94 108 Q 100 113 106 108",stroke:"#FFBDA0",strokeWidth:"1.5",fill:"none"}),E.jsx("line",{x1:"70",y1:"102",x2:"83",y2:"104",stroke:"#DDB892",strokeWidth:"0.8"}),E.jsx("line",{x1:"70",y1:"108",x2:"83",y2:"108",stroke:"#DDB892",strokeWidth:"0.8"}),E.jsx("line",{x1:"117",y1:"104",x2:"130",y2:"102",stroke:"#DDB892",strokeWidth:"0.8"}),E.jsx("line",{x1:"117",y1:"108",x2:"130",y2:"108",stroke:"#DDB892",strokeWidth:"0.8"}),E.jsx("path",{d:"M 135 135 Q 158 110 152 148",stroke:"#FFD4A8",strokeWidth:"7",strokeLinecap:"round",fill:"none"}),E.jsx("ellipse",{cx:"75",cy:"166",rx:"10",ry:"6",fill:"#FFE0C0"}),E.jsx("ellipse",{cx:"125",cy:"166",rx:"10",ry:"6",fill:"#FFE0C0"}),t>=1&&E.jsx("g",{className:"animate-sparkle",children:E.jsx("text",{x:"92",y:"68",fontSize:"14",children:""})}),t>=2&&E.jsx("g",{className:"animate-sparkle",style:{animationDelay:"0.5s"},children:E.jsx("text",{x:"92",y:"125",fontSize:"12",children:""})}),t>=3&&E.jsxs("g",{className:"animate-float",children:[E.jsx("text",{x:"140",y:"90",fontSize:"10",children:""}),E.jsx("text",{x:"52",y:"85",fontSize:"10",children:""})]}),t>=4&&E.jsxs("g",{className:"animate-float",style:{animationDelay:"0.7s"},children:[E.jsx("text",{x:"45",y:"65",fontSize:"8",children:""}),E.jsx("text",{x:"145",y:"60",fontSize:"8",children:""}),E.jsx("text",{x:"95",y:"55",fontSize:"8",children:""})]})]})]})}function Cx({type:i,totalPoints:e,companionName:t,onRename:s}){const[o,u]=_e.useState([]),[h,m]=_e.useState(!1),[g,v]=_e.useState(""),T=_e.useRef(null),A=e>=50?"adult":e>=25?"young":e>=10?"teen":"baby",x=A==="adult"?e-50:0;_e.useEffect(()=>{if(x>0){const se=Date.now(),pe=Array.from({length:3},(ke,Ie)=>({id:`${se}-${Ie}`,x:30+Math.random()*40,y:20+Math.random()*30,emoji:["","","","",""][Math.floor(Math.random()*5)]}));u(ke=>[...ke,...pe]),setTimeout(()=>{u(ke=>ke.filter(Ie=>!pe.find(P=>P.id===Ie.id)))},1600)}},[x]);const U={baby:"Sprout",teen:"Growing",young:"Maturing",adult:"Fully Bloomed"}[A],H=A==="baby"?0:A==="teen"?10:A==="young"?25:50,W=A==="baby"?10:A==="teen"?25:A==="young"?50:null,z=W?e-H:0,re=W?W-H:0,ce=W?z/re*100:100;return E.jsxs("div",{className:"rounded-3xl p-3 relative overflow-hidden",style:{background:"var(--bg-card)",boxShadow:"var(--shadow-soft)",border:"1px solid rgba(119, 154, 119, 0.1)"},children:[o.map(se=>E.jsx("span",{className:"particle text-lg",style:{left:`${se.x}%`,top:`${se.y}%`},children:se.emoji},se.id)),E.jsx("div",{className:"w-48 h-48 mx-auto mb-4",children:i==="plant"?E.jsx(xx,{stage:A,postAdultPoints:x}):E.jsx(kx,{stage:A,postAdultPoints:x})}),E.jsxs("div",{className:"text-center",children:[h?E.jsx("input",{ref:T,type:"text",value:g,onChange:se=>v(se.target.value),onBlur:()=>{s(g.trim()),m(!1)},onKeyDown:se=>{se.key==="Enter"&&(s(g.trim()),m(!1)),se.key==="Escape"&&m(!1)},maxLength:24,className:"text-sm text-center rounded-lg px-2 py-1 outline-none focus:ring-2 mb-1",style:{background:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid rgba(119, 154, 119, 0.3)","--tw-ring-color":"var(--accent-sage)"},autoFocus:!0,placeholder:"Name your companion"}):E.jsx("button",{onClick:()=>{v(t||""),m(!0)},className:"font-display text-lg font-medium mb-1 transition-all hover:opacity-70",style:{color:t?"var(--text-primary)":"var(--text-muted)"},title:"Click to name your companion",children:t||"Give me a name "}),E.jsxs("h3",{className:"text-sm",style:{color:"var(--text-primary)"},children:[i==="plant"?"":""," ",U]}),E.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:[e," growth points earned",A==="adult"&&x>0&&`  ${x} bonus points!`]}),E.jsx("div",{className:"mt-3 mx-auto max-w-[200px]",children:A!=="adult"?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"h-2 rounded-full overflow-hidden",style:{background:"var(--bg-secondary)"},children:E.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out",style:{width:`${Math.min(100,ce)}%`,background:"linear-gradient(90deg, var(--accent-sage), var(--accent-bloom))"}})}),E.jsxs("p",{className:"text-[10px] mt-1",style:{color:"var(--text-muted)"},children:[W-e," points to next stage"]})]}):E.jsx("p",{className:"text-xs font-medium",style:{color:"var(--accent-bloom)"},children:" Fully grown  each habit adds joy & sparkle!"})})]})]})}function Rx({onMoodSelect:i,todayMood:e}){const[t,s]=_e.useState(e||null),[o,u]=_e.useState(!1),h=[{id:"happy",emoji:"",label:"Happy",color:"#FBBF24"},{id:"mid",emoji:"",label:"Okay",color:"#4ADE80"},{id:"sad",emoji:"",label:"Sad",color:"#60A5FA"},{id:"mad",emoji:"",label:"Mad",color:"#F472B6"}],m=g=>{t!==g&&(s(g),u(!0),i(g),setTimeout(()=>u(!1),600))};return E.jsxs("div",{className:"rounded-3xl p-6 mt-4",style:{background:"var(--bg-card)",boxShadow:"var(--shadow-soft)",border:"1px solid rgba(119, 154, 119, 0.1)"},children:[E.jsxs("div",{className:"text-center mb-4",children:[E.jsx("h3",{className:"font-display text-lg font-medium",style:{color:"var(--text-primary)"},children:"How are you feeling today?"}),E.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:"Track your mood each day"})]}),E.jsx("div",{className:"grid grid-cols-4 gap-3",children:h.map(g=>E.jsxs("button",{onClick:()=>m(g.id),className:`
              flex flex-col items-center gap-2 p-3 rounded-2xl
              transition-all duration-300 hover:scale-105 active:scale-95
              ${t===g.id?"ring-2":"hover:shadow-md"}
            `,style:{background:t===g.id?"var(--bg-secondary)":"transparent",border:t===g.id?`2px solid ${g.color}`:"1px solid rgba(119, 154, 119, 0.1)","--tw-ring-color":g.color},title:g.label,children:[E.jsx("span",{className:`text-3xl ${t===g.id&&o?"animate-bounce-gentle":""}`,children:g.emoji}),E.jsx("span",{className:"text-[10px] font-medium",style:{color:t===g.id?g.color:"var(--text-muted)"},children:g.label})]},g.id))}),t&&E.jsx("div",{className:"mt-4 text-center animate-bloom-in",children:E.jsx("p",{className:"text-xs",style:{color:"var(--accent-sage)"},children:" Mood logged for today"})})]})}function Px({moodEntries:i=[]}){const e={happy:"#FBBF24",mid:"#4ADE80",sad:"#60A5FA",mad:"#F472B6"},t={happy:"Happy",mid:"Okay",sad:"Sad",mad:"Mad"},s=new Date,o=s.getFullYear(),u=s.getMonth(),[h,m]=_e.useState(u),[g,v]=_e.useState(o),T=["January","February","March","April","May","June","July","August","September","October","November","December"],A=new Date(g,h,1).getDay(),x=new Date(g,h+1,0).getDate(),U=()=>{h===0?(m(11),v(g-1)):m(h-1)},H=()=>{h===11?(m(0),v(g+1)):m(h+1)},W={};i.forEach(re=>{re.date&&re.mood&&(W[re.date]=re.mood)});const z=[];for(let re=0;re<A;re++)z.push(null);for(let re=1;re<=x;re++)z.push(re);return E.jsxs("div",{className:"rounded-3xl p-6",style:{background:"var(--bg-card)",boxShadow:"var(--shadow-soft)",border:"1px solid rgba(119, 154, 119, 0.1)"},children:[E.jsxs("div",{className:"flex items-center justify-between mb-6",children:[E.jsx("h2",{className:"font-display text-lg font-medium",style:{color:"var(--text-primary)"},children:"Mood Calendar"}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("button",{onClick:U,className:"p-2 rounded-lg transition-all hover:scale-110",style:{background:"var(--bg-secondary)",color:"var(--text-primary)"},title:"Previous month",children:""}),E.jsxs("span",{className:"text-sm font-medium w-32 text-center",style:{color:"var(--text-primary)"},children:[T[h]," ",g]}),E.jsx("button",{onClick:H,className:"p-2 rounded-lg transition-all hover:scale-110",style:{background:"var(--bg-secondary)",color:"var(--text-primary)"},title:"Next month",children:""})]})]}),E.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(re=>E.jsx("div",{className:"text-center text-[11px] font-bold py-2",style:{color:"var(--text-muted)"},children:re},re))}),E.jsx("div",{className:"grid grid-cols-7 gap-2",children:z.map((re,ce)=>{if(re===null)return E.jsx("div",{className:"aspect-square rounded-lg",style:{background:"transparent"}},`empty-${ce}`);const se=`${g}-${String(h+1).padStart(2,"0")}-${String(re).padStart(2,"0")}`,pe=W[se],ke=pe?e[pe]:null;return E.jsxs("div",{className:"aspect-square rounded-lg flex flex-col items-center justify-center text-sm font-medium transition-all hover:shadow-md hover:scale-105",style:{background:ke||"var(--bg-secondary)",color:ke?"white":"var(--text-primary)",border:ke?"none":"1px solid rgba(119, 154, 119, 0.2)",cursor:"default"},title:pe?`${t[pe]} on ${re}`:`No mood logged on ${re}`,children:[E.jsx("span",{children:re}),pe&&E.jsxs("span",{className:"text-[16px] mt-0.5",style:{opacity:.9},children:[pe==="happy"&&"",pe==="mid"&&"",pe==="sad"&&"",pe==="mad"&&""]})]},`day-${re}`)})}),E.jsxs("div",{className:"mt-6 pt-4 border-t",style:{borderColor:"rgba(119, 154, 119, 0.2)"},children:[E.jsx("p",{className:"text-[10px] uppercase tracking-wider mb-3",style:{color:"var(--text-muted)"},children:"Mood Legend"}),E.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(t).map(([re,ce])=>E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-4 h-4 rounded",style:{background:e[re]}}),E.jsx("span",{className:"text-xs",style:{color:"var(--text-primary)"},children:ce})]},re))})]})]})}const Nx=[{id:"water",label:"Drink a glass of water",emoji:"",points:1},{id:"walk",label:"Take a short walk",emoji:"",points:2},{id:"journal",label:"Write in your journal",emoji:"",points:2},{id:"meditate",label:"Meditate or breathe deeply",emoji:"",points:2},{id:"cook",label:"Cook or prep a meal",emoji:"",points:2},{id:"rest",label:"Take a mindful rest",emoji:"",points:1},{id:"stretch",label:"Gentle stretching",emoji:"",points:1},{id:"connect",label:"Reach out to someone",emoji:"",points:2}],Dx=i=>[`${i} habit${i>1?"s":""} done. That's real progress. `,"Small steps still move you forward. ","Consistency today builds strength tomorrow. ","Every habit is a vote for yourself. ",`You chose yourself ${i} time${i>1?"s":""} today. `,`${i} small acts of care. That's everything. `,`${i} habits done = ${i*2} companion growth points. That's basically free serotonin `,`If each habit saves you $5 in future therapy, you just saved $${i*5} today. Girl math says that's profit `,`${i} small acts of care today  365 days = ${i*365} moments of choosing yourself this year `];function bx(i){if(i.length===0)return[];const e=i.length,t=Dx(e);return[t[Math.floor(Math.random()*t.length)]]}const Ox={1:{emoji:"",message:"Good job girl! Take a 15 min break!"},3:{emoji:"",message:"Don't forget to fuel your brain, grab a snack or a sweet treat!"},5:{emoji:"",message:"Change your environment, take a walk or see a friend!"},10:{emoji:"",message:"Check something off your wish list, you earned it!"}},Vx={5:{emoji:"",message:"Way to go! Pat yourself on the back!"},10:{emoji:"",message:"10 goals, wow! Dance it out!"},15:{emoji:"",message:"Congrats! Set aside 15 minutes for your favorite hobby!"}},Lx={1:{emoji:"",message:"You crushed your first monthly goal! Treat yourself to something small and sweet!"},3:{emoji:"",message:"You did it! Celebrate with your favorite activity!"},10:{emoji:"",message:"Good girlllll daddy says thank you"},15:{emoji:"",message:"Roll a fat blunt and light that sh*t upppp"},20:{emoji:"",message:"GET CROSSEDDDDD"}};function Mx(i){return Ox[i]||null}function Fx(i){return Vx[i]||null}function jx(i){return Lx[i]||null}function Ux(i){return i>=5?"high":i>=2?"medium":"low"}function od({completedHabits:i,onToggle:e,customHabits:t,onAddCustom:s,onEditCustom:o,onDeleteCustom:u,habitCounts:h,setHabitCounts:m,title:g,titledesc:v}){const[T,A]=_e.useState(""),[x,U]=_e.useState(1),[H,W]=_e.useState(!1),[z,re]=_e.useState(null),[ce,se]=_e.useState(""),[pe,ke]=_e.useState(1);yy.useEffect(()=>{h&&t.forEach(ee=>{const Y=h[ee.id]||0,oe=Number(ee.goalFrequency)||1,ie=i.includes(ee.id);(Y>=oe&&!ie||Y<oe&&ie)&&e(ee.id)})},[h,t,i,e]);const P=(()=>{const ee=Nx.map(oe=>oe.emoji),Y=["","","","","","","","","",""];return[...new Set([...ee,...Y])]})(),I=[...t],C=()=>{const ee=T.trim();ee&&(s({id:`custom_${Date.now()}`,label:ee,emoji:"",goalFrequency:x||1}),A(""),U(1),W(!1))},N=(ee,Y)=>{m(oe=>({...oe||{},[ee]:(oe&&oe[ee]||0)+1}))},b=(ee,Y)=>{m(oe=>({...oe||{},[ee]:Math.max(0,(oe&&oe[ee]||0)-1)}))},V=(ee,Y)=>{const ie=(P.indexOf(Y)+1)%P.length,O=P[ie];o(ee,{emoji:O})},k=ee=>ee.startsWith("custom_"),Ye=ee=>{re(ee.id),se(ee.label),ke(ee.goalFrequency||1)},ot=ee=>{ce.trim()&&(o(ee,{label:ce.trim(),goalFrequency:pe||1}),re(null),se(""),ke(1))},at=()=>{re(null),se(""),ke(1)};return E.jsxs("div",{className:"rounded-3xl p-6",style:{background:"var(--bg-card)",boxShadow:"var(--shadow-soft)",border:"1px solid rgba(119, 154, 119, 0.1)"},children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("h2",{className:"font-display text-xl font-medium",style:{color:"var(--text-primary)"},children:[g," "]}),E.jsxs("span",{className:"text-xs px-2.5 py-1 rounded-full font-medium",style:{background:"var(--bg-secondary)",color:"var(--text-secondary)"},children:[i.length,"/",I.length]})]}),E.jsx("p",{className:"text-xs mb-4",style:{color:"var(--text-muted)"},children:v}),E.jsx("div",{className:"space-y-2",children:I.map(ee=>{const Y=i.includes(ee.id),oe=h&&h[ee.id]||0,ie=k(ee.id),O=ee.emoji;return z===ee.id?E.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl animate-bloom-in",style:{background:"var(--bg-secondary)",border:"1px solid rgba(119, 154, 119, 0.2)"},children:[E.jsx("input",{type:"text",value:ce,onChange:ue=>se(ue.target.value),onKeyDown:ue=>{ue.key==="Enter"&&ot(ee.id),ue.key==="Escape"&&at()},className:"flex-1 px-2 py-1 rounded-lg text-sm outline-none focus:ring-2",style:{background:"var(--bg-card)",color:"var(--text-primary)",border:"1px solid rgba(119, 154, 119, 0.15)","--tw-ring-color":"var(--accent-sage)"},autoFocus:!0,placeholder:"Habit name"}),E.jsx("input",{type:"number",value:pe,onChange:ue=>ke(Math.max(1,parseInt(ue.target.value)||1)),onKeyDown:ue=>{ue.key==="Enter"&&ot(ee.id),ue.key==="Escape"&&at()},className:"w-16 px-2 py-1 rounded-lg text-sm text-center outline-none focus:ring-2",style:{background:"var(--bg-card)",color:"var(--text-primary)",border:"1px solid rgba(119, 154, 119, 0.15)","--tw-ring-color":"var(--accent-sage)"},min:"1",placeholder:"Goal"}),E.jsx("button",{onClick:()=>ot(ee.id),className:"px-3 py-1 rounded-lg text-xs font-medium transition-all hover:scale-105",style:{background:"var(--accent-sage)",color:"white"},title:"Save",children:""}),E.jsx("button",{onClick:at,className:"px-3 py-1 rounded-lg text-xs font-medium transition-all hover:scale-105",style:{background:"var(--bg-card)",color:"var(--text-muted)"},title:"Cancel",children:""})]},ee.id):E.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${Y?"scale-[0.98]":"hover:scale-[1.01]"}`,style:{background:Y?"var(--bg-secondary)":"transparent",opacity:Y?.75:1},children:[E.jsx("div",{className:"flex",style:{cursor:"default"},children:E.jsx("input",{type:"checkbox",checked:Y,disabled:!0,className:"rounded opacity-60",style:{cursor:"default"}})}),E.jsxs("div",{className:"flex flex-col justify-between w-[100%] gap-2 sm:flex-row",children:[E.jsxs("div",{className:"flex justify-center items-center gap-1",children:[E.jsx("button",{onClick:()=>V(ee.id,O),className:"text-lg transition-all hover:scale-125 active:scale-100 cursor-pointer",title:"Click to cycle emoji",children:O}),E.jsx("span",{className:`text-sm font-body flex-1 ${Y?"line-through":""}`,style:{color:Y?"var(--text-muted)":"var(--text-primary)"},children:ee.label})]}),E.jsxs("div",{className:"flex gap-1",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>b(ee.id,ee.goalFrequency||1),className:"w-6 h-6 rounded-md flex items-center justify-center text-sm font-medium transition-all hover:scale-110",style:{background:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid rgba(119, 154, 119, 0.2)"},children:""}),E.jsxs("span",{className:"min-w-[40px] text-center text-sm font-medium",style:{color:"var(--text-primary)"},children:[oe,"/",ee.goalFrequency||1]}),E.jsx("button",{onClick:()=>N(ee.id,ee.goalFrequency||1),className:"w-6 h-6 rounded-md flex items-center justify-center text-sm font-medium transition-all hover:scale-110",style:{background:"var(--accent-sage)",color:"white",border:"1px solid rgba(119, 154, 119, 0.3)"},children:"+"})]}),ie&&E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx("button",{onClick:()=>Ye(ee),className:"p-1.5 rounded-md text-xs transition-all hover:scale-110",style:{color:"var(--accent-sage)",background:"rgba(119, 154, 119, 0.1)"},title:"Edit habit",children:""}),E.jsx("button",{onClick:()=>u(ee.id),className:"p-1.5 rounded-md text-xs transition-all hover:scale-110",style:{color:"#d97706",background:"rgba(217, 119, 6, 0.1)"},title:"Delete habit",children:""})]})]})]})]},ee.id)})}),E.jsx("div",{className:"mt-4",children:H?E.jsxs("div",{className:"flex gap-2 animate-bloom-in",children:[E.jsx("input",{type:"text",value:T,onChange:ee=>A(ee.target.value),onKeyDown:ee=>ee.key==="Enter"&&C(),placeholder:"Add a gentle habit...",className:"flex-1 px-3 py-2 rounded-xl text-sm outline-none focus:ring-2",style:{background:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid rgba(119, 154, 119, 0.15)","--tw-ring-color":"var(--accent-sage)"},autoFocus:!0}),E.jsx("input",{type:"number",value:x,onChange:ee=>U(Math.max(1,parseInt(ee.target.value)||1)),onKeyDown:ee=>ee.key==="Enter"&&C(),placeholder:"Goal",className:"w-20 px-3 py-2 rounded-xl text-sm text-center outline-none focus:ring-2",style:{background:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid rgba(119, 154, 119, 0.15)","--tw-ring-color":"var(--accent-sage)"},min:"1",title:"How many times?"}),E.jsx("button",{onClick:C,className:"px-4 py-2 rounded-xl text-sm font-medium text-white",style:{background:"var(--accent-sage)"},children:"Add"}),E.jsx("button",{onClick:()=>{W(!1),A(""),U(1)},className:"px-3 py-2 rounded-xl text-sm",style:{color:"var(--text-muted)"},children:""})]}):E.jsx("button",{onClick:()=>W(!0),className:"w-full py-2.5 rounded-xl text-sm font-medium transition-all duration-200 hover:scale-[1.01]",style:{border:"1px dashed var(--text-muted)",color:"var(--text-secondary)",background:"transparent"},children:"+ Add your own habit"})})]})}function Bx({completedHabits:i}){const e=bx(i);return e.length===0?null:E.jsxs("div",{className:"rounded-3xl p-6 animate-bloom-in",style:{background:"linear-gradient(135deg, var(--bg-card), var(--bg-secondary))",boxShadow:"var(--shadow-soft)",border:"1px solid rgba(244, 114, 182, 0.15)"},children:[E.jsx("h2",{className:"font-display text-lg font-medium mb-3",style:{color:"var(--text-primary)"},children:"Girl Math "}),E.jsx("div",{className:"space-y-2.5",children:e.map((t,s)=>E.jsx("div",{className:"p-3 rounded-xl text-sm animate-bloom-in",style:{background:"var(--bg-card)",color:"var(--text-secondary)",animationDelay:`${s*.15}s`,border:"1px solid rgba(244, 114, 182, 0.08)"},children:t},s))})]})}function zx({completedHabits:i,companionType:e,companionStage:t}){const[s,o]=_e.useState(null),[u,h]=_e.useState(!1),[m,g]=_e.useState(null),[v,T]=_e.useState(0),A=10,x=async()=>{const U=Date.now(),H=(U-v)/1e3;if(H<A&&v>0){g(`Please wait ${Math.ceil(A-H)} seconds before requesting another reflection.`),setTimeout(()=>g(null),3e3);return}h(!0),g(null),T(U);try{const W=await fetch("/api/reflect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({completedHabits:i,activityLevel:Ux(i.length),companionType:e,companionStage:t})});if(!W.ok)throw new Error("Failed to fetch");const z=await W.json();o(z.reflection)}catch{const z=["You're showing up in your own way today  that counts!","Small acts of care are meaningful  keep going.","Your companion is grateful for your presence, however it looks today.","There's no wrong way to take care of yourself. You're doing it.","Every gentle moment you give yourself matters more than you know.","Showing up counts, even on hard days.","Progress doesn't have to be perfect."],re=["Your companion is fully grown, but your habits continue to nourish your wellbeing.","Even though your companion is mature, your care continues to make a difference.","A fully bloomed companion still needs your light  and so do you."],ce=t==="adult"?[...z,...re]:z;o(ce[Math.floor(Math.random()*ce.length)])}finally{h(!1)}};return E.jsxs("div",{className:"rounded-3xl p-6",style:{background:"var(--bg-card)",boxShadow:"var(--shadow-soft)",border:"1px solid rgba(119, 154, 119, 0.1)"},children:[E.jsx("h2",{className:"font-display text-xl font-medium mb-2",style:{color:"var(--text-primary)"},children:"Gentle Reflection "}),E.jsx("p",{className:"text-xs mb-4",style:{color:"var(--text-muted)"},children:"A kind word, just for you. No judgment, ever."}),m&&E.jsx("div",{className:"p-3 rounded-xl mb-4 animate-bloom-in",style:{background:"rgba(244, 114, 182, 0.1)",border:"1px solid rgba(244, 114, 182, 0.3)"},children:E.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:m})}),s&&E.jsxs("div",{className:"p-5 rounded-2xl mb-4 animate-bloom-in",style:{background:"linear-gradient(135deg, var(--bg-secondary), rgba(244, 114, 182, 0.05))",border:"1px solid rgba(119, 154, 119, 0.1)"},children:[E.jsxs("p",{className:"text-sm leading-relaxed font-body italic",style:{color:"var(--text-primary)"},children:['"',s,'"']}),E.jsx("p",{className:"text-[10px] mt-3",style:{color:"var(--text-muted)"},children:" Your SAGE companion "})]}),E.jsx("button",{onClick:x,disabled:u,className:"w-full py-3 rounded-xl text-sm font-medium transition-all duration-200 hover:scale-[1.01] active:scale-[0.98] disabled:opacity-50",style:{background:u?"var(--bg-secondary)":"linear-gradient(135deg, var(--accent-sage), var(--accent-bloom))",color:u?"var(--text-secondary)":"white",boxShadow:u?"none":"0 4px 16px rgba(119, 154, 119, 0.15)"},children:u?E.jsxs("span",{className:"flex items-center justify-center gap-2",children:[E.jsx("span",{className:"animate-spin text-base",children:""}),"Thinking kindly..."]}):s?"Get Another Reflection ":"Get Reflection "})]})}const my=["#f472b6","#86efac","#fbbf24","#a78bfa","#67e8f9","#fb7185","#34d399","#f9a8d4"];function $x({emoji:i,message:e,onClose:t}){const s=_e.useMemo(()=>Array.from({length:28},(o,u)=>({color:my[u%my.length],left:`${u*3.7%100}%`,size:6+u%4*3,delay:u%7*.1,duration:1.5+u%3*.5})),[]);return E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.45)"},onClick:t,children:E.jsxs("div",{className:"relative rounded-3xl p-8 mx-4 text-center animate-bloom-in overflow-hidden",style:{background:"var(--bg-card)",boxShadow:"0 8px 40px rgba(0,0,0,0.2)",maxWidth:"340px",width:"100%"},onClick:o=>o.stopPropagation(),children:[s.map((o,u)=>E.jsx("span",{className:"absolute rounded-full",style:{width:o.size,height:o.size,background:o.color,left:o.left,top:"-12px",animation:`confettiFall ${o.duration}s ease-in ${o.delay}s forwards`}},u)),E.jsx("button",{onClick:t,className:"absolute top-4 right-4 w-7 h-7 flex items-center justify-center rounded-full text-sm transition-all hover:scale-110",style:{background:"var(--bg-secondary)",color:"var(--text-muted)"},children:""}),E.jsx("div",{className:"text-6xl mb-4 mt-2",children:i}),E.jsx("p",{className:"text-sm leading-relaxed font-body",style:{color:"var(--text-primary)"},children:e})]})})}function Hx(){const[i,e]=_e.useState(null),[t,s]=_e.useState(!0),[o,u]=_e.useState(!1),[h,m]=_e.useState(null),[g,v]=_e.useState(""),[T,A]=_e.useState("warm"),[x,U]=_e.useState({daily:{completed:[],custom:[],counts:{}},weekly:{completed:[],custom:[],counts:{}},monthly:{completed:[],custom:[],counts:{}}}),[H,W]=_e.useState(0),z=()=>{const J=new Date;return`${J.getFullYear()}-${String(J.getMonth()+1).padStart(2,"0")}-${String(J.getDate()).padStart(2,"0")}`},[re,ce]=_e.useState(z()),[se,pe]=_e.useState([]),[ke,Ie]=_e.useState(null),P=_e.useRef(0),I=_e.useRef(0),C=_e.useRef(0);_e.useEffect(()=>{const J=B1(tc,async ne=>{if(ne){e(ne),u(!0);const De=await Ex(ne.uid);if(De){m(De.companionType||null),v(De.companionName||"");const qe=De.habits||{daily:{completed:[],custom:[],counts:{}},weekly:{completed:[],custom:[],counts:{}},monthly:{completed:[],custom:[],counts:{}}},ut=z(),on=De.lastDailyReset||"";on!==ut&&(qe.daily={...qe.daily,completed:[],counts:{}}),U(qe),ce(on!==ut?ut:on),W(De.totalPoints||0),A(De.theme||"warm"),pe(De.moodEntries||[])}else await Tx(ne.uid,ne.email);u(!1)}else e(null),m(null),v(""),U({daily:{completed:[],custom:[],counts:{}},weekly:{completed:[],custom:[],counts:{}},monthly:{completed:[],custom:[],counts:{}}}),W(0),ce(z()),A("warm"),pe([]);s(!1)});return()=>J()},[]),_e.useEffect(()=>{const J=x.daily.completed.length,ne=x.weekly.completed.length,De=x.monthly.completed.length,qe=J+ne+De;W(qe)},[x]),_e.useEffect(()=>{if(!i||t||o)return;const J=setTimeout(()=>{wx(i.uid,{companionType:h,companionName:g,habits:x,totalPoints:H,lastDailyReset:re,theme:T,moodEntries:se,email:i.email})},1e3);return()=>clearTimeout(J)},[h,g,x,H,re,T,se,i,t,o]),_e.useEffect(()=>{document.documentElement.setAttribute("data-theme",T==="pastel"?"pastel":"")},[T]);const N=J=>{},b=J=>{m(J)},V=J=>{U(ne=>{const De=ne.daily.completed.includes(J);return{...ne,daily:{...ne.daily,completed:De?ne.daily.completed.filter(qe=>qe!==J):[...ne.daily.completed,J]}}})},k=J=>{U(ne=>({...ne,daily:{...ne.daily,custom:[...ne.daily.custom,J]}}))},Ye=J=>{U(ne=>({...ne,daily:{...ne.daily,counts:typeof J=="function"?J(ne.daily.counts):J}}))},ot=J=>{U(ne=>{const De=ne.weekly.completed.includes(J);return{...ne,weekly:{...ne.weekly,completed:De?ne.weekly.completed.filter(qe=>qe!==J):[...ne.weekly.completed,J]}}})},at=J=>{U(ne=>({...ne,weekly:{...ne.weekly,custom:[...ne.weekly.custom,J]}}))},ee=J=>{U(ne=>({...ne,weekly:{...ne.weekly,counts:typeof J=="function"?J(ne.weekly.counts):J}}))},Y=J=>{U(ne=>{const De=ne.monthly.completed.includes(J);return{...ne,monthly:{...ne.monthly,completed:De?ne.monthly.completed.filter(qe=>qe!==J):[...ne.monthly.completed,J]}}})},oe=J=>{U(ne=>({...ne,monthly:{...ne.monthly,custom:[...ne.monthly.custom,J]}}))},ie=J=>{U(ne=>({...ne,monthly:{...ne.monthly,counts:typeof J=="function"?J(ne.monthly.counts):J}}))},O=(J,ne,De)=>{U(qe=>({...qe,[J]:{...qe[J],custom:qe[J].custom.map(ut=>ut.id===ne?{...ut,...De}:ut)}}))},$=(J,ne)=>{U(De=>{const{[ne]:qe,...ut}=De[J].counts||{};return{...De,[J]:{...De[J],custom:De[J].custom.filter(on=>on.id!==ne),completed:De[J].completed.filter(on=>on!==ne),counts:ut}}})},ue=J=>{const ne=z();pe(De=>{const qe=De.findIndex(ut=>ut.date===ne);if(qe!==-1){const ut=[...De];return ut[qe]={date:ne,mood:J,timestamp:Date.now()},ut}else return[...De,{date:ne,mood:J,timestamp:Date.now()}]})},Ce=async()=>{await z1(tc)},Re=H>=50?"adult":H>=25?"young":H>=10?"teen":"baby",be=z(),Me=se.find(J=>J.date===be),Ue=Me?Me.mood:null,He=[...x.daily.completed,...x.weekly.completed,...x.monthly.completed];_e.useEffect(()=>{o||(P.current=x.daily.completed.length,I.current=x.weekly.completed.length,C.current=x.monthly.completed.length)},[o]),_e.useEffect(()=>{const J=x.daily.completed.length;if(J!==P.current){const ne=Fx(J);ne&&Ie(ne),P.current=J}},[x.daily.completed.length]),_e.useEffect(()=>{const J=x.weekly.completed.length;if(J!==I.current){const ne=Mx(J);ne&&Ie(ne),I.current=J}},[x.weekly.completed.length]),_e.useEffect(()=>{const J=x.monthly.completed.length;if(J!==C.current){const ne=jx(J);ne&&Ie(ne),C.current=J}},[x.monthly.completed.length]);const ft=_e.useCallback(()=>Ie(null),[]);return t||o?E.jsx("div",{className:"min-h-screen flex items-center justify-center",children:E.jsxs("div",{className:"text-center animate-bloom-in",children:[E.jsx("div",{className:"text-5xl mb-4 animate-float",children:""}),E.jsx("p",{className:"font-display text-lg",style:{color:"var(--text-secondary)"},children:"Loading your garden..."})]})}):i?h?E.jsxs("div",{className:"min-h-screen pb-8",children:[ke&&E.jsx($x,{emoji:ke.emoji,message:ke.message,onClose:ft}),E.jsx("header",{className:"sticky top-0 z-50 backdrop-blur-md px-4 py-3",style:{background:"rgba(255, 251, 245, 0.85)"},children:E.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-xl animate-sway inline-block",children:""}),E.jsx("h1",{className:"font-display text-lg font-semibold",style:{color:"var(--text-primary)"},children:"SAGE: Self-care and Goal Engagement"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>A(J=>J==="warm"?"pastel":"warm"),className:"w-8 h-8 rounded-full flex items-center justify-center text-sm transition-all hover:scale-110",style:{background:"var(--bg-secondary)"},title:"Toggle theme",children:T==="warm"?"":""}),E.jsx("button",{onClick:Ce,className:"text-[11px] px-2.5 py-1.5 rounded-lg transition-all hover:scale-105",style:{color:"var(--text-muted)",background:"var(--bg-secondary)"},children:"Logout"})]})]})}),E.jsxs("main",{className:"max-w-7xl mx-auto px-4 mt-4 page-enter",children:[E.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[E.jsxs("div",{className:"w-full md:w-80 md:sticky md:top-20 md:self-start md:max-h-[calc(100vh-100px)] md:overflow-y-auto",children:[E.jsx("div",{className:"text-center",children:E.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Welcome back, ",E.jsx("span",{className:"font-medium",children:i.email.split("@")[0]})," "]})}),E.jsx(Cx,{type:h,totalPoints:H,companionName:g,onRename:v}),E.jsx(Rx,{onMoodSelect:ue,todayMood:Ue})]}),E.jsxs("div",{className:"flex-1 space-y-5",children:[E.jsx(od,{completedHabits:x.daily.completed,onToggle:V,customHabits:x.daily.custom,onAddCustom:k,onEditCustom:(J,ne)=>O("daily",J,ne),onDeleteCustom:J=>$("daily",J),habitCounts:x.daily.counts,setHabitCounts:Ye,title:"Daily Goals",titledesc:"Bloom daily  small self-care rituals for a flourishing you."}),E.jsx(od,{completedHabits:x.weekly.completed,onToggle:ot,customHabits:x.weekly.custom,onAddCustom:at,onEditCustom:(J,ne)=>O("weekly",J,ne),onDeleteCustom:J=>$("weekly",J),habitCounts:x.weekly.counts,setHabitCounts:ee,title:"Weekly Goals",titledesc:"Nurture your growth  weekly intentions for blossoming self-care."}),E.jsx(od,{completedHabits:x.monthly.completed,onToggle:Y,customHabits:x.monthly.custom,onAddCustom:oe,onEditCustom:(J,ne)=>O("monthly",J,ne),onDeleteCustom:J=>$("monthly",J),habitCounts:x.monthly.counts,setHabitCounts:ie,title:"Monthly Goals",titledesc:"Cultivate your well-being  monthly milestones for flourishing self-care."}),E.jsx(Bx,{completedHabits:He}),E.jsx(Px,{moodEntries:se}),E.jsx(zx,{completedHabits:He,companionType:h,companionStage:Re})]})]}),E.jsx("footer",{className:"text-center pt-4 pb-2",children:E.jsx("p",{className:"text-[11px]",style:{color:"var(--text-muted)"},children:"SAGE  Trauma-informed wellness  No streaks, no shame "})})]})]}):E.jsx(Ax,{onChoose:b}):E.jsx(Ix,{onLogin:N})}ew.createRoot(document.getElementById("root")).render(E.jsx(yy.StrictMode,{children:E.jsx(Hx,{})}));
